# Thursday January 9th

Some references:

- [Course Notes](https://sites.google.com/view/benbakker/math-8330?authuser=0)

- Hilbert schemes/functors of points: [Notes by Stromme](http://matwbn.icm.edu.pl/ksiazki/bcp/bcp36/bcp36111.pdf)
  
  - Slightly more detailed: Nitsure, ...Hilbert schemes, Fundamentals of Algebraic Geometry
  
  - Mumford, Curves on Surfaces

- Harris-Harrison, Moduli of Curves (chatty and less rigorous) 


## Representability

Last time:
Fix an $S\dash$scheme, i.e. a scheme over $S$.

Then there is a map

\begin{align*}
\Sch/S &\to \Fun( \Sch/S\op, \Set )\\
x &\mapsto h_x(T) = \hom_{\Sch/S}(T, x)
.\end{align*}

where $T' \mapsvia{f} T$ is given by 

\begin{align*}
h_x(f): h_x(T) &\to h_x(T') \\
\qty{ T \mapsto x } &\mapsto \text{triangles of the form}
\end{align*}

\begin{equation*}
\begin{tikzcd}
T' \arrow[rr] \arrow[rdd] &               & X \\
                          &               &   \\
                          & T \arrow[ruu] &  
\end{tikzcd}
.\end{equation*}

Theorem (Yoneda)
: $$\hom_{\Fun}(h_x, F) = F(x).$$

Corollary
: $$\hom_{\Sch/S}(x, y) \cong \hom_{\Fun}(h_x, h_y).$$

Definition (Moduli Functor)
:   A **moduli functor** is  a map

    \begin{align*}
    F: (\Sch/S)\op &\to \Set \\
    F(x) &= \text{ "Families of something over $x$" } \\
    F(f) &= \text{"Pullback"}
    .\end{align*}

Definition (Moduli Space)
: A **moduli space** for that "something" appearing above is an $M \in \mathrm{Obj}(\Sch/S)$ such that $F \cong h_M$.

Now fix $S = \spec(k)$.

> $h_m$ is the functor of points over $M$.
 
Remark (1)
: $h_m(\spec(k)) = M(\spec(k)) \cong$ "families over $\spec k$" $= F(\spec k)$.
    
Remark (2)
:   $h_M(M) \cong F(M)$ are families over $M$, and $\id_M \in \mathrm{Mor}_{\Sch/S}(M, M) = \xi_{Univ}$ is the universal family.
  
    Every family is uniquely the pullback of $\xi_{\text{Univ}}$ 
    This makes it much like a classifying space.

    For $T\in \Sch/S$,
    \begin{align*}
    h_M &\mapsvia{\cong} F \\
    f\in h_M(T) &\mapsvia{\cong} F(T) \ni \xi = F(f)(\xi_{\text{Univ}})
    .\end{align*}

    where $T\mapsvia{f} M$ and $f = h_M(f)(\id_M)$.

Remark (3)
:   If $M$ and $M'$ both represent $F$ then $M \cong M'$ up to unique isomorphism.

    \begin{center}
    \begin{tikzcd}
    \xi_M              &  & \xi_{M'} \\
    M \arrow[rr, "f"]  &  & M'       \\
                      &  &          \\
    M' \arrow[rr, "g"] &  & M        \\
    \xi_{M'}           &  & \xi_M   
    \end{tikzcd}
    \end{center}

    which shows that $f, g$ must be mutually inverse by using universal properties.


Example
:   A length 2 subscheme of $\AA^1_k$ then $F(S) = \theset{ V(x^2 + bx + c)} \subset \AA_5'$ where $b, c \in \OO_s(s)$, which is functorially bijective with $\theset{b, c \in \OO_s(s)}$ and $F(f)$ is pullback.

    Then $F$ is representable by $\AA_k^2(b, c)$ and the universal object is given by 
    $$
    V(x^2 + bx + c) \subset \AA^1(?) \cross \AA^2(b, c)
    $$ 
    where $b, c \in k[b, c]$.

    Moreover, $F'(S)$ is the set of effective Cartier divisors in $\AA_5'$ which are length 2 for every geometric fiber.
    $F''(S)$ is the set of subschemes of $\AA_5'$ which are length 2 on all geometric fibers.
    In both cases, $F(f)$ is always given by pullback.

Problem: $F''$ is not a good moduli functor, as it is not representable.
Consider $\spec k[\varepsilon]$.


\begin{center}
\begin{tikzpicture}[scale=2.0]
\begin{axis}[
		hide axis,
    xmin=-12,
xmax=18,
    ymin=-4,
    ymax=10,
		xtick = {0},
		ytick = {0},
    disabledatascaling]

\draw[-][black][opacity=1] (axis cs:-10.0, 9) --  (axis cs:-10, -0);
\draw[-][black][opacity=1] (axis cs:-14.0, 0) --  (axis cs:-6, -0);

\draw[-][black][opacity=1] (axis cs:0.0, 9)  --  (axis cs:-0, -0);
\draw[-][black][opacity=1] (axis cs:-4.0, 0) --  (axis cs:4, -0);

\draw[-][black][opacity=1] (axis cs:10.0, 9)  --  (axis cs: 10, -0);
\draw[-][black][opacity=1] (axis cs:6.0, 0) --  (axis cs:14, -0);

\node[draw, circle, blue,  scale=0.4, fill=blue](left1) at (axis cs:-10, 6)  [anchor=center] {};
\node[right=1mm of left1,font=\tiny] {$(\eps+ x  - 1)$};
\node[draw, circle, blue,  scale=0.4, fill=blue](center1) at (axis cs:0, 6)  [anchor=center] {};
\node[right=1mm of center1,font=\tiny] {$(x)(\eps, x-1)$};
\node[draw, circle, blue,  scale=0.4, fill=blue](right1) at (axis cs:10, 6)  [anchor=center] {};
\node[right=1mm of right1,font=\tiny] {$(x(x-1), \eps)$};

\node[draw, circle, blue,  scale=0.4, fill=blue](left2) at (axis cs:-10, 3)  [anchor=center] {};
\node[draw, circle, blue,  scale=0.4, fill=blue](center2) at (axis cs:0, 3)  [anchor=center] {};
\node[draw, circle, blue,  scale=0.4, fill=blue](right2) at (axis cs:10, 3)  [anchor=center] {};

\node[draw, circle, blue,  scale=0.4, fill=blue](left3) at (axis cs:-10, 0)  [anchor=center] {};
\node[draw, circle, blue,  scale=0.4, fill=blue](center3) at (axis cs:0, 0)  [anchor=center] {};
\node[draw, circle, blue,  scale=0.4, fill=blue](right3) at (axis cs:10, 0)  [anchor=center] {};

\draw[-][blue, very thick][opacity=0.9] (axis cs:-10.0, 6) --  (axis cs:-7, 9);
\draw[-][blue, very thick][opacity=0.9] (axis cs:-10.0, 3) --  (axis cs:-7, 3);

\draw[-][blue, very thick][opacity=0.9] (axis cs:0, 3) --  (axis cs:3, 3);
\draw[-][blue, very thick][opacity=0.9] (axis cs:0, 0) --  (axis cs:3, 0);

\draw[-][blue, very thick][opacity=0.9] (axis cs:10, 0) --  (axis cs:13, 0);
\end{axis}
\end{tikzpicture}

\begin{table}[H]
\centering
\begin{tabular}{l|lll}
\hline \\
$F$   & \checkmark & x & x \\
$F'$  & \checkmark & x &  x \\
$F''$ & \checkmark & \checkmark & \checkmark
\end{tabular}
\end{table}

\begin{tikzcd}
\spec k \arrow[rrr, "i", hook]                &  &  & {\spec k[\varepsilon]} &  & =F'(\spec k) \arrow[rd] &               \\
{F(\spec k[\varepsilon])} \arrow[rrr, "F(i)"] &  &  & F(\spec k) \arrow[rru] &  &                         & =F''(\spec k) \\
&  &  & &  &                         &               \\
{T_p F^{', ''}}\arrow[uu, "\subset", hook]&  &  & P = V(x(x-1)) \arrow[uu, "\in", hook] & &&              
\end{tikzcd}
\end{center}



We think of $T_p F^{', ''}$ as the tangent space at $p$.

If $F$ is representable, then it is actually the Zariski tangent space.
\begin{center}
\begin{tikzcd}
{M(\spec k[\varepsilon])} \arrow[rr] &  & M(\spec k) \\
&  & \\
T_p M \arrow[rr] \arrow[uu, "\subset", hook]&  & p \arrow[uu, "\subset", hook]         
\end{tikzcd}
\end{center}

\begin{center}
\begin{tikzcd}
&                                            & \spec k \arrow[rdd, "?"] \arrow[lldd, hook] &                                     \\
&                                            &                                             &                                     \\
{\spec k[\varepsilon]} \arrow[rrr] &                                            &                                             & {\spec \OO_{M, p} \subset M} \\
&                                            &                                             & k                                   \\
& {\OO_{M, p}} \arrow[rru] \arrow[rr] &                                             & {k[\varepsilon]} \arrow[u]          \\
& \mfm_p  \arrow[u, hook]                                     &                                             & (\varepsilon)  \arrow[u, hook]                       \\
& \mfm_p^2 \arrow[u, hook]                                      &                                             & 0  \arrow[u, hook]                                 
\end{tikzcd}
\end{center}

Moreover, $T_p M = (\mfm_p / \mfm_p^2)\dual$, and in particular this is a $k\dash$vector space.
To see the scaling structure, take $\lambda \in k$.

\begin{align*}
\lambda: k[\varepsilon] & \to k[\varepsilon] \\
\varepsilon &\mapsto \lambda \varepsilon \\ \\
\lambda^*: \spec(k[\varepsilon]) &\to \spec(k[\varepsilon]) \\ \\
\lambda: M(\spec(k[\varepsilon])) &\to M(\spec(k[\varepsilon])) \\
\rotatebox{90}{$\subset$} \quad & \quad\quad\quad \rotatebox{90}{$\subset$}  \\
T_pM &\to T_pM 
.\end{align*}

**Conclusion**:
If $F$ is representable, for each $p\in F(\spec k)$ there exists a unique point of $T_p F$ that are invariant under scaling.

1. If $F, F', G \in \Fun( (\Sch/S)\op, \Set)$, there exists a fiber product
    \begin{center}
    \begin{tikzcd}
    F \cross_G F' \arrow[rr, dotted] \arrow[dd, dotted] &  & F' \arrow[dd] \\
    &  & \\
    F \arrow[rr] &  & G            
    \end{tikzcd}
    \end{center}

    where 
    $$
    (F \cross_G F')(T) = F(T) \cross_{G(T)} F'(T)
    .$$

2. This works with the functor of points over a fiber product of schemes $X \cross_T Y$ for $X, Y \to T$, where 
    $$
    h_{X \cross_T Y}= h_X \cross_{h_t} h_Y
    .$$

3. If $F, F', G$ are representable, then so is the fiber product $F \cross_G F'$.

4. For any functor 
    $$
    F: (\Sch/S)\op \to \Set
    ,$$
    for any $T \mapsvia{f} S$ there is an induced functor 
    \begin{align*}
        F_T: (\Sch/T) &\to \Set \\ 
        x &\mapsto F(x)
    .\end{align*}
    

5. $F$ is representable by $M/S$ implies that $F_T$ is representable by $M_T = M \cross_S T / T$.


## Projective Space

Consider $\PP^n_\ZZ$, i.e. "rank 1 quotient of an $n+1$ dimensional free module".

Proposition
:   $\PP^n_\ZZ$ represents the following functor

    \begin{align*}
    F: \Sch\op &\to \Set \\
    F(S) =  \OO_s^{n+1} &\to L \to 0 / \sim
    .\end{align*}

    where $\sim$ identifies diagrams of the following form:

    \begin{center}
    \begin{tikzcd}
    \OO_s^{n+1} \arrow[dd, equal] \arrow[rr] &  & L \arrow[dd, "\cong"] \arrow[rr] &  & 0 \\
    &  &                                  &  &   \\
    \OO_s^{n+1} \arrow[rr]                 &  & M \arrow[rr]                     &  & 0
    \end{tikzcd}
    \end{center}

    and $F(f)$ is given by pullbacks.

Remark
:   $\PP^n_S$ represents the following functor: 
    \begin{align*}
    F_S: (\Sch/S)\op &\to \Sets \\
    T &\mapsto F_S(T) =  \theset{ \OO_T^{n+1} \to L \to 0} / \sim
    .\end{align*}

    This gives us a cleaner way of gluing affine data into a scheme.

Proof (of Proposition)
:   Note: $\OO^{n+1} \to L \to 0$ is the same as giving $n+1$ sections $s_1, \cdots s_n$ of $L$, where surjectivity ensures that they are not the zero section.

    So 
    $$
    F_i(S) = \theset{\OO_s^{n+1} \to L \to 0}/\sim
    ,$$ 
    with the additional condition that $s_i \neq 0$ at any point.

    There is a natural transformation $F_i \to F$ by forgetting the latter condition, and is in fact a subfunctor.

    > $F\leq G$ is a subfunctor iff $F(s) \injects G(s)$.

    **Claim:**
    It is enough to show that each $F_i$ and each $F_{ij}$ are representable, since we have natural transformations:

    \begin{center}
    \begin{tikzcd}
    F_i  \arrow[rr]              &  & F              \\
                             &  &                \\
    F_{ij} \arrow[rr] \arrow[uu] &  & F_j \arrow[uu]
    \end{tikzcd}
    \end{center}

    and each $F_{ij} \to F_i$ is an open embedding (on the level of their representing schemes).

    Example
    :   For $n=1$, we can glue along open subschemes
        \begin{tikzcd}
        &  & F_0 \\
        F_{01} \arrow[rru] \arrow[rrd] &  &     \\
        &  & F_1
        \end{tikzcd}

        For $n=2$, we get overlaps of the following form:
        \begin{center}
        \begin{tikzcd}
        &  &                                                                                             &                              & F_0 \arrow[rrdd] &  &   \\
        &  &                                                                                             & F_{01} \arrow[rd] \arrow[ru] &                  &  &   \\
        F_{012} \arrow[rr] \arrow[rrru] \arrow[rrrd] &  & F_{02} \arrow[ru] \arrow[rd] \arrow[rruu, dotted, bend left=49] \arrow[rrdd, bend right=49] &                              & F_1 \arrow[rr]   &  & F \\
        &  &                                                                                             & F_{12} \arrow[ru] \arrow[rd] &                  &  &   \\
        &  &                                                                                             &                              & F_2 \arrow[rruu] &  &  
        \end{tikzcd}
        \end{center}

        This claim implies that we can glue together $F_i$ to get a scheme $M$.
        We want to show that $M$ represents $F$.
        $F(s)$ (LHS) is equivalent to an open cover $U_i$ of $S$ and sections of $F_i(U_i)$ satisfying the gluing (RHS).

        Going from LHS to RHS isn't difficult, since for $\OO_s^{n+1} \to L \to 0$, $U_i$ is the locus where $s_i \neq 0$ and by surjectivity, this gives a cover of $S$.

        RHS to LHS comes from gluing.

Proof (of Claim )
:   $$
    F_i(S) = \theset{\OO_S^{n+1} \to L \cong \OO_s \to 0, s_i \neq 0}
    ,$$ 
    but there are no conditions on the sections other than $s_i$.  
    So specifying $F_i(S)$ is equivalent to specifying $n-1$ functions $f_1 \cdots \hat f_i \cdots f_n \in \OO_S(s)$ with $f_k \neq 0$.
    We know this is representable by $\AA^n$.

    We also know $F_{ij}$ is obviously the same set of sequences, where now $s_j \neq 0$ as well, so we need to specify $f_0 \cdots \hat f_i \cdots f_j \cdots f_n$ with $f_j \neq 0$.
    This is representable by $\AA^{n-1} \cross \GG_m$, i.e. $\spec k[x_1, \cdots, \hat x_i, \cdots, x_n, x_j\inv]$.
    Moreover, $F_{ij} \injects F_i$ is open.

    What is the compatibility we are using to glue?
    For any subset $I \subset \theset{0, \cdots, n}$, we can define 
    $$
    F_I = \theset{\OO_s^{n+1} \to L \to 0, s_i\neq 0 \text{ for } i\in I} = {\bigtimes_{i\in I}}_F F_i
    ,$$ 
    and $F_I \to F_J$ when $I \supset J$.
