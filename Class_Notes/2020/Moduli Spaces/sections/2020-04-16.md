# Thursday April 16th

Recap from last time: the cotangent complex answers an extension problem.
Given $X \mapsvia{f} Y$ and $Y \injects Y'$ a square zero thickening.
When can the pullback diagram be filled in?

\begin{center}
\begin{tikzcd}
X  \ar[r, dotted] \ar[d] \arrow[dr, phantom, "\scalebox{1.5}{\color{black}$\lrcorner$}" , very near start, color=black]
& X' \ar[d, dotted] \\
Y \ar[r] 
& Y'
\end{tikzcd}
\end{center}

- The existence is governed by $\obs \in \Ext^2( L_{X/Y}, f^* I)$
- The number of extensions by $\Ext^1( L_{X/Y}, f^* I)$
- The automorphisms by $\Ext^0( L_{X/Y}, f^* I)$

Suppose we're considering $k[\eps] \to k$, where $L_{X/k} = \Omega_{X/k}$, and $H^*(T_{X/k})$ houses the obstruction theory.
For an embedded deformation $X \injects Y$, we have
\begin{center}
\begin{tikzcd}
X  \ar[r, dotted]
& X' \ar[d, dotted] \
Y \ar[r] 
& Y \cross_{\spec k} \spec k[\eps]
\end{tikzcd}
\end{center}

then $L_{X/Y} = I/I^2 [1] = N_{X/Y}\dual[1]$ and $\obs \in \ext^2(N\dual[1], \OO) = \Ext^1(N\dual, \OO) = H^1(N)$, and similarly $\def = H^0(N)$ and $\aut = 0$.

For $X \mapsvia{f} Y$, we can think of this as an embedded deformation of $\Gamma \subset X \cross Y$, in which case $N\dual = F^* \Omega_{Y/k}$.
Then $\obs, \def \in H^{1, 0}(f^* T_{X/k})$ respectively and $\aut = 0$.
There is an exact triangle
\begin{align*}
f^* L_{Y/k} \to L_{X/k} \to L_{X/Y} \to f^* L_{Y/k}[1]
.\end{align*}


## T1 Lifting

This will give a criterion for a pro-representable functor to be smooth.
We've seen a condition on $F$ with obstruction theory for the hull to be smooth, namely $\obs(F) = 0$.
However, often $F = h_R$ will have $R$ smooth with a natural obstruction theory for which $\obs(F) \neq 0$.

Example:
For $X/k$ smooth projective, the picard functor $\pic_{X/k}$ is smooth because we know it's an abelian variety.
We also know that the natural obstruction space is $\obs = H^2(\OO_X)$, which may be nonzero.
We could also have abstract deformations given by $H^2(T_X)$

Given $A \in \Art/k$ and $M$ a finite length $A\dash$module, we can form the ring $A \oplus M$ where $M$ is square zero and $A\actson M$ by the module structure.
This yields
\begin{align*}
0 \to M \to A \oplus M \to A \to 0
\end{align*}

The explicit ring structure is given by $(x, y) \cdot (x, y') = (xx', x'y + xy')$.

Proposition
:   Assume $\ch k =0$ and $F$ is a pro-representable deformation functor, so $F = \hom(R, \cdot)$ where $R$ is a complete local $k\dash$algebra with $\dim t_R < \infty$.
    Then $R$ is smooth over $k$, i.e. $R \cong k[[t_R\dual]]$, iff for all $A\in \art/k$ and all $M, M' \in A\dash\text{mod}$ finite dimensional with $M \surjects M'$, we have $F(A\oplus M) \surjects F(A\oplus M')$.

Proof:
First observe that $\ker(F(A\oplus M) \to F(A)) = \ker(\hom(R, A\oplus M) \to \hom(R, A))$, note that if we have two morphism $R\righrightarrows^{f\oplus g}_{f \oplus g'} A \oplus M$, denoting these maps $h, h'$ we have

1. $g-g' \in \Der_k(R, M)$, since 
  \begin{align*}
  (h-h')(x, y) = h(x)h(y) - h'(x) h'(y) = (f(x)f(y), f(x)g(y) + f(y)g(x) )  - (f(x)f(y), f(x) g'(y) + f(y) g'(x)) = f(x)(g-g')(y) + f(y)(g-g')(x)$
  .\end{align*}

2. Given $g: R\to A\oplus M$ and $\theta \in \Der_k(R, M)$, then $g + \theta: R \to A\oplus M$.

We conclude that the fibers are naturally torsors for $\Der_k(R, M)$ if nonempty.
It is in fact a canonically trivial torsor, since there is a distinguished element in each fiber.

Thus to show
\begin{center}
\begin{tikzcd}
F(A\oplus M) \ar[rr]\ar[rd]& & F(A\oplus M') \ar[ld]\\
& F(A) &
\end{tikzcd}
\end{center}

It is enough to show surjection on fibers and trivial extensions go to trivial ones, then $\Der_k(R, M) \to \Der_k(R, M')$ with $0\mapsto 0$.
The criterion for $F$ being surjective is equivalent to $\Der_k(R, M) \sujects \Der_k(R, M')$, which we identify as $\hom_R(\Omega_{R/k}, M) \surjects \hom(\Omega_{R/k'}, M')$

Warning: $\Omega_{R/k}$ is complicated.
Example: $\Omega_{k[[x]]/k} \tensor k((x)) = \Omega_{k((x))/k}$ which is an infinite dimensional $k((x))$ vector space.

Here we only need to consider the completions $\hom_R(\hat \Omega_{R/k}, M) \surjects \hom(\hat \Omega_{R/k'}, M') = k[[x]]~dx$.

Fact: In characteristic zero, $R?k$ is smooth iff $\hat \Omega_{R/k}$ is free.

Thus the surjectivity condition is equivalent to checking that $\hom(\hat \Omega_{R/k}, \wait)$ is right-exact on finite length modules.
This happens iff $\hat \Omegaaa$ are projective iff they are free.

> Uses an algebra fact: for a complete f.g. module over a complete ring, projective wrt sequences of finite-length modules implies free.
> Over a local ring, f.g. and projective implies free.

This is powerful -- allows showing deformations of Calabi-Yaus are unobstructed.

Definition
: $X/k$ smooth projective is CY iff $\omega_x \cong \OO_x$, i.e. the canonical bundle is trivial.
