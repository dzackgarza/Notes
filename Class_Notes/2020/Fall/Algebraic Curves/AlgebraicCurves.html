<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:title" content="Algebraic Curves" />
<meta property="og:type" content="book" />

<meta property="og:image" content="figures/cover.png" />






<script type="text/javascript"
  src="https://dzackgarza.com/assets/dist.js">
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config( window.mjconfig );
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

<meta name="description" content="Algebraic Curves">

<title>Algebraic Curves</title>



<script src="https://cdnjs.cloudflare.com/ajax/libs/pushy/1.3.0/js/pushy.min.js" integrity="sha512-+YLFvWFpPgQOV1/PoGgIinfvZEsUpfO5YEoxH4MlBAW5lf2WAVK5F4HtWA1BvZEYqK+AWW0fb/C797ttp1fL7g==" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pushy/1.3.0/css/pushy.min.css" integrity="sha512-qGokfFEnfziCnGfs9Dpy65qVsouyHwLFx2YUq/UScF4ojoI7P2sV1ETuV6HSqdOp5I9zIGi2S7YOJglhWE3chg==" crossorigin="anonymous" />


<link rel="stylesheet" href="/home/zack/.pandoc/pandoc-templates/marked/kultiad-serif.css" />


</head>

<body>
<!-- Site Overlay -->
<div class="site-overlay"></div>

<!-- Your Content -->
<div id="container" class="sticky">
    <!-- Menu Button -->
    <button class="menu-btn">&#9776; Table of Contents</button>
</div>




<!--bookdown:title:start-->
<div id="header">
    
    <p class="small"><span class="marginnote shownote">
        <img src="figures/cover.png" alt="Cover" width="100%">
         
    </span>
  </p>
  
    <p class="small introquote"><span class="marginnote shownote">
      <em>Note:
      <p>These are notes live-tex’d from a graduate course in Algebraic Curves taught by Pete Clark at the University of Georgia in Fall 2020. As such, any errors or inaccuracies are almost certainly my own.</p>
      </em>
    </span>
  </p>  
    <h1 class="title">Algebraic Curves</h1>
    <h3 class="subtitle">University of Georgia, Fall 2020</h3>
          <address class="author_afil">
  <h2 class="author">D. Zack Garza</h2>
    University of Georgia<br>        <a class="author_email" href="mailto:#">dzackgarza@gmail.com</a>
        <p class="small">Last updated: 2020-12-13</p>
    
  </address>
      </div>


<hr>

<nav class="pushy pushy-left" id="TOC">
<ul>
<li><a href="#references">References</a>
<ul>
<li><a href="#references-1">References</a></li>
</ul></li>
<li><a href="#lecture-1-field-theory-preliminaries">Lecture 1: Field Theory Preliminaries</a>
<ul>
<li><a href="#finite-generation-of-fields">Finite Generation of Fields</a>
<ul>
<li><a href="#notion-1">Notion 1</a></li>
<li><a href="#notion-2">Notion 2</a></li>
<li><a href="#notion-3">Notion 3</a></li>
</ul></li>
<li><a href="#case-study-the-lüroth-problem.">Case Study: The Lüroth Problem.</a></li>
<li><a href="#integrals-closures-and-constant-fields">Integrals Closures and Constant Fields</a></li>
</ul></li>
<li><a href="#lecture-1-discussion-and-review">Lecture 1: Discussion and Review</a>
<ul>
<li><a href="#valuations">Valuations</a></li>
<li><a href="#places">Places</a></li>
<li><a href="#divisors">Divisors</a></li>
</ul></li>
<li><a href="#lecture-2-field-theory-preliminaries">Lecture 2: Field Theory Preliminaries</a>
<ul>
<li><a href="#base-extension">Base Extension</a></li>
<li><a href="#when-extensions-preserve-being-a-domain">When Extensions Preserve Being a Domain</a></li>
<li><a href="#good-base-change-for-function-fields">Good Base Change For Function Fields</a></li>
<li><a href="#example-of-a-non-regular-family-of-function-fields">Example of a Non-Regular Family of Function Fields</a></li>
</ul></li>
<li><a href="#lecture-3-last-of-preliminaries">Lecture 3: Last of Preliminaries</a>
<ul>
<li><a href="#polynomials-defining-regular-function-fields">Polynomials Defining Regular Function Fields</a></li>
<li><a href="#geometric-irreducibility">Geometric Irreducibility</a></li>
<li><a href="#our-function-fields-are-geometrically-irreducible">Our Function Fields are Geometrically Irreducible</a></li>
</ul></li>
<li><a href="#lecture-4-chapter-1-one-variable-function-fields-and-their-valuations">Lecture 4: Chapter 1, One Variable Function Fields and Their Valuations</a>
<ul>
<li><a href="#valuation-rings-and-krull-valuations">Valuation Rings and Krull Valuations</a></li>
<li><a href="#group-of-divisibility">Group of Divisibility</a></li>
<li><a href="#generalized-valuations">Generalized Valuations</a></li>
<li><a href="#regular-or-centered-valuations">Regular or Centered Valuations</a></li>
<li><a href="#topological-considerations">Topological Considerations</a></li>
<li><a href="#scheme-theory-resolution-of-singularities">Scheme Theory, Resolution of Singularities</a></li>
<li><a href="#intermediate-rings">Intermediate Rings</a></li>
<li><a href="#valuations-of-every-rank">Valuations of Every Rank</a></li>
</ul></li>
<li><a href="#lecture-5-places">Lecture 5: Places</a>
<ul>
<li><a href="#investigating-the-set-of-places">Investigating the Set of Places</a></li>
<li><a href="#describing-the-missing-place">Describing the Missing Place</a></li>
<li><a href="#finite-generation-in-towers">Finite Generation in Towers</a></li>
<li><a href="#regularity-lemma">Regularity Lemma</a></li>
<li><a href="#an-inequality-on-degrees">An Inequality on Degrees</a></li>
<li><a href="#affine-grounding-and-residue-fields">Affine Grounding and Residue Fields</a></li>
</ul></li>
<li><a href="#lecture-6-affine-domains-and-places-sigmakk">Lecture 6: Affine Domains and Places <span class="math inline">\(\Sigma(K/k)\)</span></a>
<ul>
<li><a href="#holomorphy-rings-are-affine-dedekind-domains-with-fraction-field-k">Holomorphy Rings are Affine Dedekind Domains with Fraction Field <span class="math inline">\(K\)</span></a></li>
<li><a href="#proof-of-main-theorem">Proof of Main Theorem</a>
<ul>
<li><a href="#case-1">Case 1</a></li>
<li><a href="#case-2">Case 2</a></li>
<li><a href="#case-3">Case 3</a></li>
</ul></li>
<li><a href="#case-3-fixed-proof">Case 3: Fixed Proof</a></li>
</ul></li>
<li><a href="#lecture-7-riemann-roch">Lecture 7: Riemann-Roch</a>
<ul>
<li><a href="#divisors-1">Divisors</a></li>
<li><a href="#the-degree-of-the-divisor-of-a-rational-function-is-zero">The Degree of the Divisor of a Rational Function is Zero</a></li>
</ul></li>
<li><a href="#lecture-8-riemann-roch-spaces-part-1">Lecture 8: Riemann-Roch Spaces (Part 1)</a>
<ul>
<li><a href="#setup-for-the-riemann-roch-theorem">Setup for the Riemann-Roch Theorem</a></li>
<li><a href="#the-riemann-roch-space">The Riemann-Roch Space</a></li>
<li><a href="#working-with-divisors">Working with Divisors</a></li>
<li><a href="#subspaces-and-dimension-of-riemann-roch-spaces">Subspaces and Dimension of Riemann-Roch Spaces</a></li>
<li><a href="#bounds-on-dimensions">Bounds on Dimensions</a></li>
</ul></li>
<li><a href="#lecture-8-riemann-roch-spaces-part-2">Lecture 8: Riemann-Roch Spaces (Part 2)</a>
<ul>
<li><a href="#proof-of-upper-bound">Proof of Upper Bound</a>
<ul>
<li><a href="#step-1">Step 1</a></li>
<li><a href="#step-2">Step 2</a></li>
<li><a href="#step-3">Step 3</a></li>
<li><a href="#step-4">Step 4</a></li>
</ul></li>
<li><a href="#genus">Genus</a></li>
</ul></li>
<li><a href="#lecture-9-todo">Lecture 9 (Todo)</a></li>
<li><a href="#lecture-10a-todo">Lecture 10A (Todo)</a></li>
<li><a href="#lecture-10b-todo">Lecture 10B (Todo)</a></li>
<li><a href="#lecture-10c-todo">Lecture 10C (Todo)</a></li>
<li><a href="#lecture-11a-weils-proof-of-riemann-roch">Lecture 11A: Weil’s Proof of Riemann-Roch</a></li>
<li><a href="#lecture-11b-weils-proof-of-riemann-roch-todo">Lecture 11B: Weil’s Proof of Riemann-Roch (TODO)</a></li>
<li><a href="#lecture-11c-weils-proof-of-riemann-roch-todo">Lecture 11C: Weil’s Proof of Riemann-Roch (TODO)</a></li>
<li><a href="#lecture-12-chapter-3-curves-over-a-finite-field">Lecture 12: Chapter 3, Curves Over a Finite Field</a>
<ul>
<li><a href="#finiteness-of-class-groups">Finiteness of Class Groups</a></li>
<li><a href="#base-extension-1">Base Extension</a>
<ul>
<li><a href="#splitting-of-places">Splitting of Places</a></li>
</ul></li>
<li><a href="#degree-1-places-and-rational-points-on-a-curve">Degree 1 Places and Rational Points on a Curve</a></li>
<li><a href="#finiteness-of-places-and-rational-points">Finiteness of Places and Rational Points</a></li>
<li><a href="#finiteness-of-class-group">Finiteness of Class Group</a></li>
</ul></li>
<li><a href="#lecture-13-splitting-places">Lecture 13: Splitting Places</a>
<ul>
<li><a href="#how-places-split">How Places Split</a></li>
<li><a href="#counting-effective-divisors">Counting Effective Divisors</a></li>
<li><a href="#hasse-weil-zeta-functions">Hasse-Weil Zeta Functions</a></li>
<li><a href="#proof-of-rationality">Proof of Rationality</a></li>
</ul></li>
<li><a href="#lecture-14-the-hasse-weil-zeta-function">Lecture 14: The Hasse-Weil Zeta Function</a>
<ul>
<li><a href="#comparing-zeta-functions-after-extending-scalars">Comparing Zeta Functions After Extending Scalars</a></li>
<li><a href="#proof-that-delta-1">Proof That <span class="math inline">\(\delta = 1\)</span></a></li>
<li><a href="#the-functional-equation">The Functional Equation</a></li>
<li><a href="#the-l-polynomial">The <span class="math inline">\(L\)</span> Polynomial</a></li>
</ul></li>
<li><a href="#lecture-15-the-lhbox-polynomial">Lecture 15: The <span class="math inline">\(L{\hbox{-}}\)</span>Polynomial</a>
<ul>
<li><a href="#big-list-of-important-facts">Big List of Important Facts</a></li>
<li><a href="#proofs">Proofs</a>
<ul>
<li><a href="#the-degree-of-l-and-l1">The degree of <span class="math inline">\(L\)</span> and <span class="math inline">\(L(1)\)</span></a></li>
<li><a href="#functional-equation">Functional Equation</a></li>
<li><a href="#coefficients-a_j-for-j0-1-2g-and-duality">Coefficients <span class="math inline">\(a_j\)</span> for <span class="math inline">\(j=0, 1, 2g\)</span> and Duality</a></li>
<li><a href="#absolute-values-of-roots-rh">Absolute Values of Roots / RH</a></li>
</ul></li>
<li><a href="#applications-and-corollaries">Applications and Corollaries</a>
<ul>
<li><a href="#counting-rational-points">Counting Rational Points</a></li>
<li><a href="#relating-rational-points-to-coefficients">Relating Rational Points to Coefficients</a></li>
</ul></li>
</ul></li>
<li><a href="#lecture-16-todo">Lecture 16 (Todo)</a></li>
<li><a href="#lecture-17-todo">Lecture 17 (Todo)</a></li>
<li><a href="#lecture-18-todo">Lecture 18 (Todo)</a></li>
<li><a href="#lecture-19-todo">Lecture 19 (Todo)</a></li>
<li><a href="#lecture-20-todo">Lecture 20 (Todo)</a></li>
<li><a href="#lecture-21-todo">Lecture 21 (Todo)</a></li>
<li><a href="#lecture-22-todo">Lecture 22 (Todo)</a></li>
<li><a href="#lecture-23-sketch">Lecture 23 (Sketch)</a>
<ul>
<li><a href="#artin-schreier-extensions-of-function-fields">Artin-Schreier Extensions of Function Fields</a></li>
</ul></li>
<li><a href="#lecture-24-hermitian-function-fields-sketch">Lecture 24: Hermitian Function Fields (Sketch)</a></li>
<li><a href="#lecture-25-differential-pullback-theorem-sketch">Lecture 25: Differential Pullback Theorem (Sketch)</a></li>
<li><a href="#lecture-26-todo">Lecture 26 (Todo)</a></li>
</ul>
</nav>




<h1 id="references">References</h1>
<h2 id="references-1">References</h2>
<ul>
<li>Stichtenoth<span class="citation" data-cites="stichtenoth_2009">(Stichtenoth, 2009)</span>.</li>
</ul>
<h1 id="lecture-1-field-theory-preliminaries">Lecture 1: Field Theory Preliminaries</h1>
<p>The main theorems in this course, in order of importance:</p>
<ul>
<li>The Riemann-Roch Theorem</li>
<li>The Riemann-Hurwitz Formula</li>
</ul>
<h2 id="finite-generation-of-fields">Finite Generation of Fields</h2>
<p>See Chapter 11 of Field Theory notes.</p>
<h3 id="notion-1">Notion 1</h3>
<div class="definition" title="Finitely Generated Field Extension">
<p>A field extension <span class="math inline">\(\ell/k\)</span> is <em>finitely generated</em> if there exists a finite set <span class="math inline">\(x_1, \cdots, x_n \in \ell\)</span> such that <span class="math inline">\(\ell = k(x_1, \cdots, x_n)\)</span> and <span class="math inline">\(\ell\)</span> is the smallest field extension of <span class="math inline">\(k\)</span>.</p>
<p>Concretely, every element of <span class="math inline">\(\ell\)</span> is a quotient of the form <span class="math inline">\({p(x_1, \cdots, x_n) \over q(x_1, \cdots, x_n)}\)</span> with <span class="math inline">\(p, q\in k[x_1, \cdots, x_n]\)</span>.</p>
</div>
<p>There are three different notions of finite generation for fields, the above is the weakest.</p>
<h3 id="notion-2">Notion 2</h3>
<p>The second is being finitely generated as an algebra:</p>
<div class="definition" title="Finitely Generated Algebras">
<p>For <span class="math inline">\(R\subset S\)</span> finitely generated algebras, <span class="math inline">\(S\)</span> is finitely generated over <span class="math inline">\(R\)</span> if every element of <span class="math inline">\(S\)</span> is a polynomial in <span class="math inline">\(x_1, \cdots, x_n\)</span>, with coefficients in <span class="math inline">\(R\)</span>, i.e. <span class="math inline">\(S = R[x_1, \cdots, x_n]\)</span>.</p>
</div>
<p>Note that this implies the previous definition, since anything that is a polynomial is also a quotient of polynomials.</p>
<h3 id="notion-3">Notion 3</h3>
<p>The final notion: <span class="math inline">\(\ell/k\)</span> is finite (finite degree) if <span class="math inline">\(\ell\)</span> is finitely generated as a <span class="math inline">\(k{\hbox{-}}\)</span>module, i.e. a finite-dimensional <span class="math inline">\(k{\hbox{-}}\)</span>vector space.</p>
<div class="definition" title="Rational Function Field">
<p>A <em>rational function field</em> is <span class="math inline">\(k(t_1, \cdots, t_n) \mathrel{\vcenter{:}}= ff \qty{ k[t_1, \cdots, t_n]}\)</span>.</p>
</div>
<p>Note that we can make a similar definition for infinitely many generators by taking a direct limit (here: union), and in fact every element will only involve finitely many generators.</p>
<div class="exercise">
<ol type="a">
<li><p>Show <span class="math inline">\(k(t) / k\)</span> is finitely generated by notion (3) but not by (2).</p></li>
<li><p>Show that <span class="math inline">\(k[t]/k\)</span> is (2) but not (1).<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p></li>
<li><p>Show that it is not possible for a <strong>field</strong> extension to satisfy (2) but not (1).<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p></li>
<li><p>Show that if <span class="math inline">\(\ell/k\)</span> is finitely generated by (3) and algebraic, then it satisfies (1).</p></li>
</ol>
</div>
<div class="theorem" title="Field Theory Notes 11.19">
<p>If <span class="math inline">\(L/K/F\)</span> are field extensions, then <span class="math inline">\(L/F\)</span> is finitely generated <span class="math inline">\(\iff\)</span> <span class="math inline">\(K/F\)</span> and <span class="math inline">\(L/K\)</span> are finitely generated.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></p>
</div>
<div class="definition" title="Algebraically Independent">
<p>For <span class="math inline">\(\ell/k\)</span>, a subset <span class="math inline">\(\left\{{x_i}\right\}\subset \ell\)</span> is <em>algebraically independent</em> over <span class="math inline">\(k\)</span> if no finite subset satisfies a nonzero polynomial with <span class="math inline">\(k\)</span> coefficients.</p>
<p>In this case, <span class="math inline">\(k[\left\{{x_i}\right\}] / k\)</span> is <em>purely transcendental</em> as a rational function field.</p>
</div>
<div class="theorem" title="Existence of transcendence bases">
<p>For <span class="math inline">\(\ell/k\)</span> a field extension,</p>
<ol type="a">
<li><p>There exists a subset <span class="math inline">\(\left\{{x_i}\right\}\subset \ell\)</span> algebraically independent over <span class="math inline">\(k\)</span> such that <span class="math inline">\(\ell/k(\left\{{x_i}\right\})\)</span> is algebraic.</p></li>
<li><p>If <span class="math inline">\(\left\{{y_t}\right\}\)</span> is another set of algebraically independent elements such that <span class="math inline">\(\ell/k(\left\{{y_t}\right\})\)</span> is algebraic, then <span class="math inline">\({\left\lvert {\left\{{x_i}\right\}} \right\rvert} = {\left\lvert {\left\{{y_t}\right\}} \right\rvert}\)</span>.</p></li>
</ol>
</div>
<p>Thus every field extension is algebraic over a purely transcendental extension. A subset as above is called a <em>transcendence basis</em>, and every 2 such bases have the same cardinality.</p>
<p>We have a notion of generation (similar to “spanning”), independence, and bases, so there are analogies to linear algebra (e.g. every vector space has a basis, any two have the same cardinality).<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a></p>
<p>The following notion will be analagous to that of dimension in linear algebra:</p>
<div class="definition" title="Transcendence Degree">
<p>The <em>transcendence degree</em> of <span class="math inline">\(\ell/k\)</span> is the cardinality of any transcendence basis.</p>
</div>
<div class="theorem" title="Transcendence Degree is Additive in Towers">
<p>If <span class="math inline">\(L/K/F\)</span> are fields then <span class="math inline">\(\operatorname{trdeg}(L/F) = \operatorname{trdeg}(K/F) + \operatorname{trdeg}(L/K)\)</span>.</p>
</div>
<div class="theorem" title="Bounds on Transcendence Degree">
<p>Let <span class="math inline">\(K/k\)</span> be finitely degenerated, so <span class="math inline">\(K = k(x_1, \cdots, x_n)\)</span>. Then <span class="math inline">\(\operatorname{trdeg}(K/k) \leq n\)</span>, with equality iff <span class="math inline">\(K/k\)</span> is purely transcendental.</p>
</div>
<div class="proof">
<p>Suppose <span class="math inline">\(K\)</span> is monogenic, i.e. generated by one element. Then <span class="math inline">\(\operatorname{trdeg}(F(x)/F) = \indic{x/F\text{ is transcendental}}\)</span>.</p>
<p>So the degree increases when a transcendental element is added, and doesn’t change when <span class="math inline">\(x\)</span> is algebraic.</p>
<p>By additivity in towers, we take <span class="math inline">\(k \hookrightarrow k(x_1) \hookrightarrow k(x_1, x_2) \hookrightarrow\cdots \hookrightarrow k(x_1, \cdots, x)n) = K\)</span> to obtain a chain of length <span class="math inline">\(n\)</span>. The transcendence degree is thus the number of indices <span class="math inline">\(i\)</span> such that <span class="math inline">\(x_i\)</span> is transcendental over <span class="math inline">\(k(x_1, \cdots, x_{i-1})\)</span>.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p>
</div>
<div class="definition" title="Function fields in $d$ variables">
<p>For <span class="math inline">\(d\in{\mathbb{Z}}^{\geq 0}\)</span>, an extension <span class="math inline">\(K/k\)</span> is <em>a function field in <span class="math inline">\(d\)</span> variables</em> (i.e. of dimension <span class="math inline">\(d\)</span>) if <span class="math inline">\(K/k\)</span> is finitely generated of transcendence degree <span class="math inline">\(d\)</span>.</p>
</div>
<div class="remark">
<p>The study of such fields is birational geometry over the ground field <span class="math inline">\(k\)</span>. <span class="math inline">\(k={\mathbb{C}}\)</span> is of modern interest, things get more difficult in other fields. The case of <span class="math inline">\(d=1\)</span> is much easier: the function field will itself be the geometric object and everything will built from that. Our main tool will be <strong>valuation theory</strong>, where valuations will correspond to points on the curve.</p>
</div>
<h2 id="case-study-the-lüroth-problem.">Case Study: The Lüroth Problem.</h2>
<div class="question">
<p>For which fields <span class="math inline">\(k\)</span> and <span class="math inline">\(d\in {\mathbb{Z}}^{\geq 0}\)</span> is it true that if <span class="math inline">\(k \subset \ell \subset k(t_1, \cdots, t_d)\)</span> with <span class="math inline">\(k(t_1 ,\cdots, t_d)/\ell\)</span> finite then <span class="math inline">\(\ell\)</span> is purely transcendental?</p>
</div>
<div class="answer">
<p>It’s complicated, and depends on <span class="math inline">\(d\)</span> and <span class="math inline">\(k\)</span>. We have the following partial results.</p>
</div>
<div class="theorem" title="Lüroth">
<p>True for <span class="math inline">\(d=1\)</span>: For any <span class="math inline">\(k\subset \ell \subset k(t)\)</span>, <span class="math inline">\(\ell = k(x)\)</span>.</p>
</div>
<div class="theorem" title="Castelnuovo">
<p>Also true for <span class="math inline">\(d=2, k={\mathbb{C}}\)</span>.</p>
</div>
<div class="theorem" title="Zariski">
<p>No if <span class="math inline">\(d= 2\)</span>, <span class="math inline">\(k=\mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span>, and <span class="math inline">\(k\)</span> is positive characteristic. Also no if <span class="math inline">\(d=2, k\neq \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span> in characteristic zero.</p>
</div>
<div class="theorem" title="Clemens-Griffiths">
<p>No if <span class="math inline">\(d\geq 3\)</span> and <span class="math inline">\(k= {\mathbb{C}}\)</span>.</p>
</div>
<div class="remark">
<p>Note that unirational need not imply rational for varieties.</p>
</div>
<div class="exercise">
<p>Let <span class="math inline">\(k\)</span> be a field, <span class="math inline">\(G\)</span> a finite group with <span class="math inline">\(G\hookrightarrow S_n\)</span> the Cayley embedding. Then <span class="math inline">\(S_n\)</span> acts by permutation of variables on <span class="math inline">\(k(t_1, \cdots, t_n)\)</span>, thus so does <span class="math inline">\(G\)</span>. Set <span class="math inline">\(\ell \mathrel{\vcenter{:}}= k(t_1, \cdots, t_n)^G\)</span> the fixed field, then by Artin’s observation in Galois theory: if you have a finite field acting effectively by automorphisms on a field then taking the fixed field yields a galois extension with automorphism group <span class="math inline">\(G\)</span>.</p>
<p>So <span class="math inline">\(\operatorname{Aut}(k(t_1, \cdots, t_n)/ \ell) = G\)</span>.A</p>
<ol type="a">
<li>Suppose <span class="math inline">\(k={\mathbb{Q}}\)</span>, and show that an affirmative answer to the Lüroth problem implies an affirmative answer to the inverse galois problem for <span class="math inline">\({\mathbb{Q}}\)</span>.</li>
</ol>
<blockquote>
<p>Hint: works for any field for which Hilbert’s Irreducibility Theorem holds.</p>
</blockquote>
<ol start="2" type="a">
<li><p><span class="math inline">\(\ell /{\mathbb{Q}}\)</span> need not be a rational function field, explore the literature on this: first example due to Swan with <span class="math inline">\({\left\lvert {G} \right\rvert} = 47\)</span>.</p></li>
<li><p>Can still give many positive examples using the Shepherd-Todd Theorem.</p></li>
</ol>
</div>
<h2 id="integrals-closures-and-constant-fields">Integrals Closures and Constant Fields</h2>
<div class="definition" title="Integral Closure and Field of Constants">
<p>For <span class="math inline">\(K/k\)</span> a field extension, set <span class="math inline">\(\kappa(K)\)</span> to be the algebraic closure of <span class="math inline">\(k\)</span> in <span class="math inline">\(K\)</span>, i.e. special case of <em>integral closure</em>. If <span class="math inline">\(K/k\)</span> is finitely generated, then <span class="math inline">\(\kappa(K)/k\)</span> is finite degree.</p>
<p>Here <span class="math inline">\(\kappa(K)\)</span> is called the <em>field of constants</em>, and <span class="math inline">\(K\)</span> is also a function field over <span class="math inline">\(\kappa(K)\)</span>.</p>
</div>
<div class="remark">
<p>In practice, we don’t want <span class="math inline">\(\kappa(K)\)</span> to be a proper extension of <span class="math inline">\(k\)</span>. If this isn’t the case, we replace considering <span class="math inline">\(K/k\)</span> by <span class="math inline">\(K/\kappa(K)\)</span>. If <span class="math inline">\(K/k\)</span> is finitely generated, then</p>
<p><p style="text-align:center;"> <img class="tikz" src="/home/zack/SparkleShare/github.com/Notes/Class_Notes/2020/Fall/Algebraic Curves/63b9e36512ba0ca6bc76563ce4353caa2c501683.svg"></p></p>
<p>Where we use the fact that from above, <span class="math inline">\(\kappa(K)/k\)</span> is finitely generated and algebraic and thus finite, and by a previous theorem, if <span class="math inline">\(K/k\)</span> is transcendental then <span class="math inline">\(K/\kappa(K)\)</span> is as well, and thus finitely generated. Thus if you have a function field over <span class="math inline">\(k\)</span>, you can replace <span class="math inline">\(k\)</span> by <span class="math inline">\(\kappa(K)\)</span> and regard <span class="math inline">\(K\)</span> as a function field over <span class="math inline">\(\kappa(K)\)</span> instead.</p>
</div>
<h1 id="lecture-1-discussion-and-review">Lecture 1: Discussion and Review</h1>
<h2 id="valuations">Valuations</h2>
<ul>
<li>Transcendence bases</li>
<li>Lüroth problem</li>
</ul>
<p>For <span class="math inline">\(K/k\)</span> a one variable function field, if we want a curve <span class="math inline">\(C/k\)</span>, what are the points? We’ll use <em>valuations</em>, see NT 2.1. See also completions, residue fields. If <span class="math inline">\(R \subset K\)</span> a field, <span class="math inline">\(R\)</span> is a <em>valuation ring</em> of <span class="math inline">\(K\)</span> if for all <span class="math inline">\(x\in K^{\times}\)</span>, at least one of <span class="math inline">\(x, x^{-1} \in R\)</span>.</p>
<div class="example">
<p>The valuation rings of <span class="math inline">\({\mathbb{Q}}\)</span> are <span class="math inline">\({\mathbb{Z}}_{(p)}\mathrel{\vcenter{:}}={\mathbb{Z}}[\left\{{{1\over \ell} ~{\text{s.t.}}~\ell\neq p}\right\}]\)</span> for all primes <span class="math inline">\(p\)</span>.</p>
</div>
<p>See also <em>Krull valuations</em>, which take values in some totally ordered commutative group.</p>
<div class="exercise">
<p>Show that a valuation ring is a local ring, i.e. it has a unique maximal ideal.</p>
</div>
<div class="example">
<p>Where does the log come from?</p>
<p>There is a <span class="math inline">\(p{\hbox{-}}\)</span>adic valuation: <span class="math display">\[\begin{align*}   v: {\mathbb{Q}}&amp;\to {\mathbb{Z}}_{(p)} \\ {a\over b} = p^n {u \over v} &amp;\mapsto n .\end{align*}\]</span></p>
<p>Then we recover <span class="math display">\[\begin{align*}   {\mathbb{Z}}_{(p)} = \left\{{x\in {\mathbb{Q}}^{\times}~{\text{s.t.}}~v_p(x) \geq 0}\right\} \cup\left\{{0}\right\} \\ {\mathfrak{m}}_{(p)} = \left\{{x\in {\mathbb{Q}}^{\times}~{\text{s.t.}}~v_p(x) &gt; 0}\right\} \cup\left\{{0}\right\} \\ .\end{align*}\]</span></p>
<p>There is a <span class="math inline">\(p{\hbox{-}}\)</span>adic norm <span class="math display">\[\begin{align*}   {\left\lvert {{\,\cdot\,}} \right\rvert}_p: {\mathbb{Q}}&amp;\to {\mathbb{R}}\\ 0 &amp; \mapsto 0 \\ x &amp;\mapsto p^{-n} = p^{-v_p(x)} .\end{align*}\]</span></p>
<p>Then we get an ultrametric function, a non-archimedean function <span class="math display">\[\begin{align*}   d_p: {\mathbb{Q}}^2 \to {\mathbb{R}}\\ (x, y) &amp;\mapsto {\left\lvert {x- y} \right\rvert}_p .\end{align*}\]</span></p>
<p>We then recover <span class="math inline">\(v_p(x) = -\log_p {\left\lvert {x} \right\rvert}_p\)</span>.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
</div>
<h2 id="places">Places</h2>
<p>For <span class="math inline">\(A\subset K\)</span> a subring of a field, we’ll be interested in the place <span class="math inline">\(\tilde \Sigma = \left\{{\text{Valuation rings } R_v \text{ of } K}\right\} ~{\text{s.t.}}~A \subset R_v \subsetneq K\)</span>. Thus the valuation takes non-negative values on all elements of <span class="math inline">\(K\)</span>. Can equip this with a topology (the “Zariski” topology, not the usual one). This is always quasicompact, and called the <em>Zariski-Riemann space</em>. Can determine a sheaf of rings to make this a locally ringed space.</p>
<p>We can define an equivalence of valuations and define the set of <em>places</em> <span class="math display">\[\begin{align*}   \Sigma(K/k) \mathrel{\vcenter{:}}=\left\{{\text{Nontrivial valuations } v\in K ~{\text{s.t.}}~v(x) \geq 0\, \forall x\in k^{\times}}\right\} ,\end{align*}\]</span> which will be the points on the curve. Here the Zariski topology will be the cofinite topology (which is not Hausdorff). Scheme-theoretically, this is exactly the set of closed points on the curve.</p>
<div class="definition" title="Generic Points">
<p>A point <span class="math inline">\(p\in X\)</span> a topological space is a <strong>generic point</strong> iff its closure in <span class="math inline">\(X\)</span> is all of <span class="math inline">\(X\)</span>.</p>
</div>
<div class="remark">
<p>Note we will have unique models for curves, but this won’t be the case for surfaces: blowing up a point will yield a birational but inequivalent surface.</p>
</div>
<h2 id="divisors">Divisors</h2>
<div class="definition" title="Divisor Group">
<p>The <em>divisor group</em> of <span class="math inline">\(K\)</span> is the free <span class="math inline">\({\mathbb{Z}}{\hbox{-}}\)</span>module on <span class="math inline">\(\Sigma(K/k)\)</span></p>
</div>
<div class="remark">
<p>This comes with a degree map <span class="math display">\[\begin{align*}   \deg: \operatorname{Div}(K) \to {\mathbb{Z}} \end{align*}\]</span> which need not be surjective.</p>
</div>
<div class="definition" title="Principal Divisors">
<p>Consider the map <span class="math display">\[\begin{align*}   \phi_d: K^{\times}&amp;\to \operatorname{Div}(K) \\ f &amp;\mapsto (f) .\end{align*}\]</span> Then we define <span class="math inline">\(\operatorname{im}\phi_d\)</span> as the subgroup of <strong>principal divisors</strong>.</p>
</div>
<div class="definition" title="Class Group">
<p>Define the <strong>class group</strong> of <span class="math inline">\(K\)</span> as <span class="math display">\[\begin{align*}   \operatorname{cl}(K) \mathrel{\vcenter{:}}=\left\{{\text{Divisors}}\right\} / \left\{{\text{Principal divisors}}\right\} \mathrel{\vcenter{:}}=\operatorname{Div}(K) / \operatorname{im}\phi_d .\end{align*}\]</span></p>
</div>
<p>We can define the <strong>class group</strong> as divisors modulo principle divisors <span class="math inline">\(\operatorname{cl}(K) = \operatorname{Div}(K) / \operatorname{im}(K^{\times})\)</span> and the Riemann-Roch space <span class="math inline">\(\mathcal{L}(D)\)</span>. The Riemann-Roch theorem will then be a statement about <span class="math inline">\(\dim \mathcal{L}(D)\)</span>.</p>
<h1 id="lecture-2-field-theory-preliminaries">Lecture 2: Field Theory Preliminaries</h1>
<h2 id="base-extension">Base Extension</h2>
<p>Given some object <span class="math inline">\(A/k\)</span> and <span class="math inline">\(k\hookrightarrow\ell\)</span> is a field extension, we would like some extended object <span class="math inline">\(A/\ell\)</span>.</p>
<div class="example">
<p>An <em>affine variety</em> <span class="math inline">\(V/k\)</span> is given by finitely many polynomials in <span class="math inline">\(p_i \in k[t_1, \cdots, t_n]\)</span>, and base extension comes from the map <span class="math inline">\(k[t_1, \cdots, t_n] \hookrightarrow\ell[t_1, \cdots, t_n]\)</span>. More algebraically, we have the affine coordinate ring over <span class="math inline">\(k\)</span> given by <span class="math inline">\(k[V] = k[t_1,\cdots, t_n]/\left\langle{p_i}\right\rangle\)</span>, the ring of polynomial functions on the zero locus corresponding to this variety. We can similarly replace <span class="math inline">\(k\)</span> be <span class="math inline">\(\ell\)</span> in this definition. Here we can observe that <span class="math inline">\(\ell[V] \cong k[V] \otimes_k \ell\)</span>.</p>
</div>
<p>In general we have a map <span class="math display">\[\begin{align*}   {\,\cdot\,}\otimes_k \ell &amp; \\ \left\{{k{\hbox{-}}\text{vector spaces}}\right\} &amp;\to \left\{{\ell{\hbox{-}}\text{vector spaces}}\right\} \\ \left\{{k{\hbox{-}}\text{algebras}}\right\} &amp;\to\left\{{\ell{\hbox{-}}\text{algebras}}\right\} .\end{align*}\]</span> This will be an exact functor on the category <span class="math inline">\(k{\hbox{-}}\text{Vect}\)</span>, i.e. <span class="math inline">\(\ell\)</span> is a flat module. Here everything is free, and free <span class="math inline">\(\implies\)</span> flat, so things work out nicely.</p>
<p>What about for function fields? Since <span class="math inline">\(k\)</span> is a <span class="math inline">\(k{\hbox{-}}\)</span>algebra, we can consider <span class="math inline">\(k\otimes_k \ell\)</span>, however this need not be a field. Note that tensor products of fields come up very often, but don’t seem to be explicitly covered in classes! We will broach this subject here.</p>
<div class="exercise">
<p>If <span class="math inline">\(\ell/k\)</span> is algebraic and <span class="math inline">\(\ell\otimes_k \ell\)</span> is a domain, the <span class="math inline">\(\ell = k\)</span>.</p>
</div>
<div class="remark">
<p>In other words, this is rarely a domain. A hint: start with the monogenic case, and also reduce to the case where the extension is not just algebraic but finite.</p>
</div>
<div class="remark">
<p>Tensor products of field extensions are still interesting: if <span class="math inline">\(\ell/k\)</span> is finite, it is galois <span class="math inline">\(\iff\)</span> <span class="math inline">\(\ell \otimes_k \ell \cong \ell^{[\ell: k]}\)</span>. So its dimension as an <span class="math inline">\(\ell{\hbox{-}}\)</span>algebra is equal to the degree of <span class="math inline">\(\ell/k\)</span>, so it splits as a product of copies of <span class="math inline">\(\ell\)</span>.</p>
<p>We’d like the tensor product of a field to be a field, or at least a domain where we can take the fraction field and get a field. This hints that we should not be tensoring algebraic extensions, but rather transcendental ones.</p>
</div>
<div class="exercise">
<p>For <span class="math inline">\(\ell/k\)</span> a field extension,</p>
<ol type="a">
<li><p>Show <span class="math inline">\(k(t) \otimes_k \ell\)</span> is a domain with fraction field <span class="math inline">\(\ell(t)\)</span>.</p></li>
<li><p>Show it is a field <span class="math inline">\(\iff\)</span> <span class="math inline">\(\ell/k\)</span> is algebraic.</p></li>
</ol>
</div>
<div class="proposition" title="FT 12.7, 12.8">
<p>Let <span class="math inline">\(k_1, k_2 / k\)</span> are field extensions, and suppose <span class="math inline">\(k_1 \otimes_k k_2\)</span> is a domain. Then this is a field <span class="math inline">\(\iff\)</span> at least one of <span class="math inline">\(k_1/k\)</span> or <span class="math inline">\(k_2/k\)</span> is algebraic.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
</div>
<p>So we’ll concentrate on when <span class="math inline">\(K \otimes_k \ell\)</span> is a domain.</p>
<h2 id="when-extensions-preserve-being-a-domain">When Extensions Preserve Being a Domain</h2>
<div class="question">
<p>What’s the condition on a function field <span class="math inline">\(K/k\)</span> that guarantees this, i.e. when extending scalars from <span class="math inline">\(k\)</span> to <span class="math inline">\(\ell\)</span> still yields a domain?</p>
</div>
<div class="definition" title="Base Change">
<p>If this remains a domain, we’ll take the fraction field and call it the <strong>base change</strong>.</p>
</div>
<div class="exercise">
<p>If <span class="math inline">\(K/k\)</span> is finitely generated (i.e. a function field) and <span class="math inline">\(K\otimes_k \ell\)</span> is a domain, then <span class="math inline">\(ff(K\otimes_k \ell)/\ell\)</span> is finitely generated.</p>
</div>
<div class="remark">
<p>The point here is that if taking a function field and extending scalars still results in a domain, we’ll call the result a function field as well. Most of all, we want to base change to the algebraic closure. We’ll have issues if the constant field is not just <span class="math inline">\(k\)</span> itself:</p>
</div>
<div class="lemma">
<p>If <span class="math inline">\(K\otimes_k \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span> is a domain, then the constant field <span class="math inline">\(\kappa(K) = k\)</span>.</p>
</div>
<div class="proof">
<p>Use the fact that <span class="math inline">\({\,\cdot\,}\otimes_k V\)</span> is exact. We then get an injection</p>
<p><p style="text-align:center;"> <img class="tikz" src="/home/zack/SparkleShare/github.com/Notes/Class_Notes/2020/Fall/Algebraic Curves/b1197514822257a6e8959dc23e0aafb89b8534b2.svg"></p></p>
<p>Here we use the injections <span class="math inline">\(\kappa(K) \hookrightarrow\mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span> and <span class="math inline">\(\kappa(K) \hookrightarrow K\)</span>.</p>
<p>We now have an injection of <span class="math inline">\(k{\hbox{-}}\)</span>algebras, and subrings of domains are domains. So apply the first exercise: the only way this can happen is if <span class="math inline">\(\kappa(K) = k\)</span>.</p>
</div>
<div class="exercise" title="the simplest possible case">
<p>Describe <span class="math inline">\({\mathbb{C}}(t) \otimes_{\mathbb{R}}{\mathbb{C}}\)</span>, tensored as <span class="math inline">\({\mathbb{R}}{\hbox{-}}\)</span>algebras.</p>
</div>
<div class="remark">
<p>Won’t be a domain by the lemma, and will instead be some <span class="math inline">\({\mathbb{C}}(t){\hbox{-}}\)</span>algebra of dimension 2.</p>
</div>
<h2 id="good-base-change-for-function-fields">Good Base Change For Function Fields</h2>
<p>In order to have a good base change for our function fields, we want to constant extension to be trivial, i.e. <span class="math inline">\(\kappa(K) = k\)</span>. This requires that the ground field be algebraically closed.</p>
<p>In this case, you might expect that extending scalars to the algebraic closure would yield a field again. This is true in characteristic zero, but false in positive characteristic.</p>
<div class="question" title="a more precise one">
<p>If <span class="math inline">\(\kappa(K) = k\)</span>, must <span class="math inline">\(K\otimes_K \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span> be a field?</p>
</div>
<p>If that’s true and we’re in positive characteristic, recalling the for an algebraic extension this being a field is equivalent to it being a domain. But if that’s a domain, the tensor product of every algebraic extension must be a domain, which is why this is an important case.</p>
<p>If so, then <span class="math inline">\(K\otimes_k k^{1\over p}\)</span> is a field, where <span class="math inline">\(k^{1\over p} \mathrel{\vcenter{:}}= k\qty{\left\{{x^{1\over p} ~{\text{s.t.}}~x\in k }\right\}}\)</span> is obtained by adjoining all <span class="math inline">\(p\)</span>th roots of all elements. This is a purely inseparable extension. The latter condition (this tensor product being a field) is one of several equivalent conditions for a field to be separable.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p>
<div class="remark">
<p>Recall that <span class="math inline">\(K/k\)</span> is transcendental, and there is an extended notion of separability for non-algebraic extensions. Another equivalent condition is that every finitely generated subextension is separably generated, i.e. it admits a transcendence basis <span class="math inline">\(\left\{{x_i}\right\}\)</span> such that <span class="math inline">\(k\hookrightarrow k(\left\{{x_i}\right\}) \hookrightarrow F\)</span> where <span class="math inline">\(F/k(\left\{{x_i}\right\})\)</span> is algebraic and separable. Such a transcendence basis is called a <em>separating transcendence basis</em>. Since we’re only looking at finitely generated extensions, we wont’ have to worry much about the difference between separable and separably generated.</p>
</div>
<div class="question">
<p>What’s the point? There’s an extra technical condition to ensure the base change is a field: the function field being separable over the ground field. Is this necessarily the case if <span class="math inline">\(\kappa(K) = k\)</span>?</p>
</div>
<div class="answer">
<p>No, for fairly technical reasons. </p>
</div>
<div class="example">
<p> Set <span class="math inline">\(k = {\mathbb{F}}_p(a, b)\)</span> a rational function field in two variables as the ground field. Set <span class="math display">\[\begin{align*}   A \mathrel{\vcenter{:}}= k[x, y]/ \left\langle{ax^p + b-y^b}\right\rangle .\end{align*}\]</span> Then <span class="math inline">\(A\)</span> is a domain, so set <span class="math inline">\(k = ff(A)\)</span>.</p>
<div class="claim">
<p><span class="math inline">\(\kappa(K) = k\)</span>, so <span class="math inline">\(k\)</span> is algebraically closed in this extension, but <span class="math inline">\(K/k\)</span> is <em>not</em> separable.</p>
</div>
<p>How to show: extending scalars to <span class="math inline">\(k^{1\over p}\)</span> does not yield a domain.</p>
<p>Let <span class="math inline">\(\alpha, \beta \in \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span> such that <span class="math inline">\(\alpha^p = a, \beta^b = b\)</span>, so <span class="math display">\[\begin{align*}   ax^p + b-y^b = (\alpha x + \beta - y)^p ,\end{align*}\]</span> which implies <span class="math inline">\(K \otimes_k k^{1\over p}\)</span> is not a domain: <span class="math inline">\(k[x, y]\)</span> is a UFD, so the quotient of a polynomial is a domain iff the polynomial is irreducible. However, the <span class="math inline">\(p\)</span>th power map is a homomorphism, and this exhibits the image of the defining polynomial as something non-irreducible.</p>
</div>
<div class="remark">
<p>Note that <span class="math inline">\(f(x, y) = ax^p + b - y^p\)</span> is the curve in this situation. The one variable function field is defined by quotienting out a function in two variables and taking the function field. Every 1-variable function field can be obtained in this way. Therefore this polynomial is irreducible, but becomes reducible over the algebraic closure. So we’d like the polynomial to be irreducible over both.</p>
</div>
<div class="remark">
<p>This is pretty technical, but we won’t have to worry if <span class="math inline">\(k = k^{1\over p}\)</span>. Equivalently, frobenius is surjective on <span class="math inline">\(k\)</span>, i.e. <span class="math inline">\(k\)</span> is a perfect field.</p>
<p>If <span class="math inline">\(k\)</span> is not perfect, it can happen (famous paper of Tate) making an inseparable base extension can decrease the genus of the curve.</p>
</div>
<p>Recall that the perfect fields are given by:</p>
<ul>
<li>Anything characteristic zero, every reducible polynomial is separable.</li>
<li>Any algebraically closed field</li>
<li>Finite fields (frobenius is always injective)</li>
</ul>
<p>Imperfect fields include:</p>
<ul>
<li>Function fields in characteristic <span class="math inline">\(p\)</span></li>
<li>Complete discretely valued fields <span class="math inline">\(k((t))\)</span> in characteristic <span class="math inline">\(p\)</span><a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></li>
</ul>
<div class="theorem" title="FT 12.20: Regular Field Extensions">
<p>For field extensions <span class="math inline">\(K/k\)</span>, TFAE</p>
<ol type="1">
<li><p><span class="math inline">\(\kappa(K) = k\)</span> and <span class="math inline">\(K/k\)</span> is separable</p></li>
<li><p><span class="math inline">\(K\otimes_k \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span> is a domain, or equivalently a field</p></li>
<li><p>For all field extensions <span class="math inline">\(\ell/k\)</span>, <span class="math inline">\(K\otimes_k \ell\)</span> is a domain.</p></li>
</ol>
</div>
<div class="remark">
<p>Note that this allows making not just an algebraic base change, but a totally arbitrary one.</p>
</div>
<div class="definition" title="?">
<p>A field extension satisfying these conditions is called <strong>regular</strong>.</p>
</div>
<div class="remark">
<p>Regular corresponds to “nonsingular” in this neck of the woods. The implication <span class="math inline">\(2\implies 3\)</span> is the interesting one. To prove it, reduces to showing that if <span class="math inline">\(k= \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span> and <span class="math inline">\(R_i\)</span> are domains that are finitely generated as <span class="math inline">\(k{\hbox{-}}\)</span>algebras, then <span class="math inline">\(R_1 \otimes_k R_2\)</span> is also a domain. This doesn’t always happen, e.g. <span class="math inline">\({\mathbb{Q}}(\sqrt{2}) \otimes_{\mathbb{Q}}{\mathbb{Q}}(\sqrt{2})\)</span> is not a domain. Really need algebraically closed.</p>
<p>This is a result in affine algebraic geometry. An algebra that is a domain and finitely generated over a field is an <em>affine algebraic variety</em>, more precisely it is integral. The tensor product on the coordinate ring side corresponds to taking the product of varieties. Thus the fact here is that a product of integral varieties remains integral, as long as you’re over an algebraically closed field. Proof uses Hilbert’s Nullstellensatz.</p>
</div>
<div class="exercise">
<ol type="a">
<li><p>Show that <span class="math inline">\(k(t) / k\)</span> is regular.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a></p></li>
<li><p>Show every purely transcendental extension is regular.</p></li>
<li><p>Show that for a field <span class="math inline">\(k\)</span>, every extension is regular <span class="math inline">\(\iff\)</span> <span class="math inline">\(k = \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span>.</p></li>
<li><p>Show <span class="math inline">\(K/k\)</span> is regular <span class="math inline">\(\iff\)</span> every finitely generated subextension is regular.</p></li>
</ol>
</div>
<h2 id="example-of-a-non-regular-family-of-function-fields">Example of a Non-Regular Family of Function Fields</h2>
<p>Choose an elliptic curve <span class="math inline">\(E/{\mathbb{Q}}(t)\)</span> with <span class="math inline">\(j{\hbox{-}}\)</span>invariant <span class="math inline">\(t\)</span>. For <span class="math inline">\(N\in {\mathbb{Z}}^{+}\)</span>, define <span class="math inline">\(\tilde K_N \mathrel{\vcenter{:}}={\mathbb{Q}}(t)(E[N])\)</span> the <span class="math inline">\(N{\hbox{-}}\)</span>torsion field of <span class="math inline">\(E\)</span>. Then <span class="math inline">\(\tilde K_N/{\mathbb{Q}}(t)\)</span> is a finite galois extension with galois group isomorphic to the image of the modular galois representation<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a></p>
<p><span class="math display">\[\begin{align*}   \rho_N: g({\mathbb{Q}}(t)) \to \operatorname{GL}(2, {\mathbb{Z}}/N{\mathbb{Z}}) \mod N .\end{align*}\]</span></p>
<div class="proposition" title="Some Facts">
<p><span class="math inline">\(\rho_N\)</span> is surjective, and <span class="math display">\[\begin{align*}   {\operatorname{Aut}}(\tilde K_N / {\mathbb{Q}}(t))  \cong \operatorname{GL}(2, {\mathbb{Z}}/N{\mathbb{Z}}) .\end{align*}\]</span></p>
<p><span class="math inline">\(\det \rho_N = \chi_N \mod N\)</span>, the cyclotomic character, and therefore <span class="math inline">\(\chi_N\)</span> restricted to <span class="math inline">\(g(\tilde K_N)\)</span> is trivial, so <span class="math inline">\(\tilde K_N \supset {\mathbb{Q}}(\zeta_N)\)</span>. For <span class="math inline">\(N\geq 3\)</span>, <span class="math inline">\({\mathbb{Q}}(\zeta_N) \supsetneq {\mathbb{Q}}\)</span>, so <span class="math inline">\(\tilde K_N / {\mathbb{Q}}(t)\)</span> is a non-regular function field.</p>
</div>
<div class="remark">
<p>Actually <span class="math inline">\(\tilde K_N\)</span> depends on the choice of <span class="math inline">\(E\)</span>: difference choices of nonisomorphic curves with the same <span class="math inline">\(j{\hbox{-}}\)</span>invariant differ by a quadratic twist and the <span class="math inline">\(\rho_N\)</span> differ by a quadratic character on <span class="math inline">\(g({\mathbb{Q}}(t))\)</span>. Importantly, this changes the kernel, and thus the field.</p>
</div>
<p>To fix this, we look at the <em>reduced galois representation</em>, the following composition: <span class="math display">\[\begin{align*}   \mkern 1.5mu\overline{\mkern-1.5mu\rho\mkern-1.5mu}\mkern 1.5mu_N: g({\mathbb{Q}}(t)) \to \operatorname{GL}(2, {\mathbb{Z}}/N{\mathbb{Z}}) \twoheadrightarrow\operatorname{GL}(2, {\mathbb{Z}}/N{\mathbb{Z}})/\left\{{\pm I}\right\} .\end{align*}\]</span></p>
<p>We obtain a field theory diagram</p>
<p>So if you just take the field fixed by <span class="math inline">\(\pm I\)</span>, you get <span class="math inline">\(K_N\)</span>. In this case, the reduced galois representation depends only on the <span class="math inline">\(j{\hbox{-}}\)</span>invariant, and not on the model chosen. So the function field <span class="math inline">\(K_N/{\mathbb{Q}}(t)\)</span> is the “canonical” choice.</p>
<div class="question">
<p>Does this make <span class="math inline">\(K_N/{\mathbb{Q}}(t)\)</span> regular?</p>
</div>
<div class="answer">
<p>No, <span class="math inline">\(\rho_N(g(K_N)) = \left\{{\pm I}\right\}\)</span> and <span class="math inline">\(\det(\pm I) = 1\)</span>, so we still have <span class="math inline">\(K_N \supset {\mathbb{Q}}(\zeta_N)\)</span>.</p>
</div>
<p>In this course, we’ll identify algebraic curves over <span class="math inline">\(k\)</span> and one-variable function fields <span class="math inline">\(K/k\)</span>. The function field <span class="math inline">\(K_N\)</span> corresponds to an algebraic curve <span class="math inline">\(X(N)/{\mathbb{Q}}\)</span> that is “nicer” over <span class="math inline">\({\mathbb{Q}}(\zeta_N)\)</span>. In fact, see Rohrlich: <span class="math inline">\(\kappa(K_N) = {\mathbb{Q}}(\zeta_N)\)</span>. Our curves will have points (equal to valuations) which will have degrees. If the constant subfield is not just <span class="math inline">\(k\)</span>, this prevents degree 1 points on the curve. By Galois theory, for every subgroup <span class="math inline">\(H \subseteq \operatorname{GL}(2, {\mathbb{Z}}/N{\mathbb{Z}}) / \left\{{\pm I}\right\}\)</span>, we’ll get a function field <span class="math inline">\({\mathbb{Q}}(H) \mathrel{\vcenter{:}}= H_N^H\)</span>.gg In this case, <span class="math inline">\({\mathbb{Q}}(H)/{\mathbb{Q}}\)</span> is regular <span class="math inline">\(\iff\)</span> <span class="math inline">\(\det(H) = ({\mathbb{Z}}/N{\mathbb{Z}})^{\times}\)</span>.</p>
<p>Later we’ll understand the residues at points as the residue fields of some DVRs, then the residue field will always contain the field of constants.</p>
<h1 id="lecture-3-last-of-preliminaries">Lecture 3: Last of Preliminaries</h1>
<p>Today we’ll be wrapping up the last of the preliminaries. Upcoming: one-variable function fields and their valuation rings.</p>
<h2 id="polynomials-defining-regular-function-fields">Polynomials Defining Regular Function Fields</h2>
<div class="question">
<p>Where’s the curve in all of this?</p>
</div>
<div class="answer">
<p>This will come from an equation like <span class="math inline">\(f(x, y) = 0\)</span>.</p>
</div>
<div class="exercise">
<p>Let <span class="math inline">\(R_1, R_2\)</span> be <span class="math inline">\(k{\hbox{-}}\)</span>algebras that are also domains with fraction fields <span class="math inline">\(K_i\)</span>. Show <span class="math inline">\(R_1 \otimes_k R_2\)</span> is a domain <span class="math inline">\(\iff\)</span> <span class="math inline">\(K_1 \otimes_k K_2\)</span> is a domain.<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a></p>
</div>
<h2 id="geometric-irreducibility">Geometric Irreducibility</h2>
<div class="definition" title="Geometrically Irreducible Polynomial">
<p>A polynomial of positive degree <span class="math inline">\(f\in k[t_1, \cdots, t_n]\)</span> is <strong>geometrically irreducible</strong> if <span class="math inline">\(f\in \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu[t_1, \cdots, t_n]\)</span> is irreducible as a polynomial.</p>
</div>
<div class="remark">
<p>If <span class="math inline">\(n=1\)</span> then <span class="math inline">\(f\)</span> is geometrically irreducible <span class="math inline">\(\iff\)</span> <span class="math inline">\(f\)</span> is linear, i.e. of degree 1. Let <span class="math inline">\(f\)</span> be irreducible, then since polynomial rings are UFDs then <span class="math inline">\(\left\langle{f}\right\rangle\)</span> is a prime ideal (irreducibles generate principal ideals) and <span class="math inline">\(k[t_1, \cdots, t_n]/\left\langle{f}\right\rangle\)</span> is a domain. Let <span class="math inline">\(K_f\)</span> be the fraction field.</p>
</div>
<div class="exercise" title="an easy one">
<ol type="a">
<li><p>Above for <span class="math inline">\(1\leq i \leq n\)</span> let <span class="math inline">\(x_i\)</span> be the image of <span class="math inline">\(t_i\)</span> in <span class="math inline">\(K_f\)</span>. Show that <span class="math inline">\(K_f = k(x_1, \cdots, x_n)\)</span>.</p></li>
<li><p>Show that if <span class="math inline">\(K/k\)</span> is generated by <span class="math inline">\(x_1, \cdots, x_n\)</span>, then it is the fraction field of <span class="math inline">\(k[t_1, \cdots, t_n] /{\mathfrak{p}}\)</span> for some prime ideal <span class="math inline">\({\mathfrak{p}}\)</span> (equivalently, a height 1 ideal).</p></li>
</ol>
</div>
<div class="proposition" title="?">
<p>Suppose that <span class="math inline">\(f\)</span> is geometrically irreducible.</p>
<ol type="a">
<li><p>The function field <span class="math inline">\(K/k\)</span> is regular.</p></li>
<li><p>For all <span class="math inline">\(\ell/k\)</span>, <span class="math inline">\(f\in \ell[t_1, \cdots, t_n]\)</span> is irreducible.</p></li>
</ol>
</div>
<div class="definition" title="Absolutely Irreducible Polynomial">
<p>In this case we say <span class="math inline">\(f\)</span> is <strong>absolutely irreducible</strong> as a synonym for geometrically irreducible.</p>
</div>
<div class="proof">
<p>By definition of geometric irreducibility, <span class="math inline">\(\mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu[t_1, \cdots, t_n]/\left\langle{f}\right\rangle = k[t_1, \cdots, t_n]/\left\langle{f}\right\rangle \otimes_k \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span> is a domain. The exercise shows that <span class="math inline">\(K_f \otimes_k k\)</span> is a domain, so <span class="math inline">\(K_f\)</span> is regular. It follows that for all <span class="math inline">\(\ell/k\)</span>, <span class="math inline">\(K_f \otimes_k \ell\)</span> is a domain, so <span class="math inline">\(\ell[t_1, \cdots, t_n]/\left\langle{f}\right\rangle\)</span> is a domain.</p>
</div>
<div class="slogan">
<p>Geometrically irreducible polynomials are good sources of regular function fields.</p>
</div>
<div class="exercise">
<p>Let <span class="math inline">\(k\)</span> be a field, <span class="math inline">\(d\in {\mathbb{Z}}^+\)</span> such that <span class="math inline">\(4\nmid d\)</span> and <span class="math inline">\(p(x) \in k[x]\)</span> be positive degree. Factor <span class="math inline">\(p(x) = \prod_{i=1}^r (x-a_i)^{\ell_i}\)</span> in <span class="math inline">\(\mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu[x]\)</span>.</p>
<ol type="a">
<li><p>Suppose that for some <span class="math inline">\(i\)</span>, <span class="math inline">\(d\nmid\ell_i\)</span>. Show that <span class="math inline">\(f(x, y) \mathrel{\vcenter{:}}= y^d - p(x) \in k[x, y]\)</span> is geometrically irreducible. Conclude that <span class="math inline">\(K_f \mathrel{\vcenter{:}}= ff\qty{k[x, y] / \left\langle{y^d - p(x)}\right\rangle}\)</span> is a regular one-variable function field over <span class="math inline">\(k\)</span>, and thus elliptic curves yield regular function fields.<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a></p></li>
<li><p>What happens when <span class="math inline">\(4{~\Bigm|~}d\)</span>?</p></li>
</ol>
</div>
<div class="exercise" title="Nice, Recommended">
<p>Assume <span class="math inline">\(k\)</span> is a field, if necessary assuming <span class="math inline">\(\operatorname{ch}(k) \neq 2\)</span>.</p>
<ol type="a">
<li><p>Let <span class="math inline">\(f(x, y) = x^2 - y^2 -1\)</span> and show <span class="math inline">\(K_f\)</span> is is rational: <span class="math inline">\(K_f = k(z)\)</span>.</p></li>
<li><p>Let <span class="math inline">\(f(x, y) = x^2 + y^2 - 1\)</span>. Show that <span class="math inline">\(K_f\)</span> is again rational.</p></li>
<li><p>Let <span class="math inline">\(k = {\mathbb{C}}\)</span> and <span class="math inline">\(f(x, y) = x^2 + y^2 + 1\)</span>, <span class="math inline">\(K_f\)</span> is rational.</p></li>
<li><p>Let <span class="math inline">\(k= {\mathbb{R}}\)</span>. For <span class="math inline">\(f(x ,y) = x^2 + y^2 + 1\)</span>, is <span class="math inline">\(K_f\)</span> rational?<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a></p></li>
</ol>
</div>
<div class="question">
<p>Can we always construct regular function fields using geometrically irreducible polynomials?</p>
</div>
<div class="answer">
<p>In several variables, no, since not every variety is birational to a hypersurface. In one variable, yes, as the following theorem shows:</p>
</div>
<h2 id="our-function-fields-are-geometrically-irreducible">Our Function Fields are Geometrically Irreducible</h2>
<div class="theorem" title="Regular Function Fields in One Variable are Geometrically Irreducible">
<p>Let <span class="math inline">\(K/k\)</span> be a one variable function field (finitely generated, transcendence degree one). Then</p>
<ol type="a">
<li><p>If <span class="math inline">\(K/k\)</span> is separable, then <span class="math inline">\(K = k(x, y)\)</span> for some <span class="math inline">\(x, y\in K\)</span>.</p></li>
<li><p>If <span class="math inline">\(K/k\)</span> is regular (separable + constant subfield is <span class="math inline">\(k\)</span>, so stronger) then <span class="math inline">\(K \cong K_f\)</span> for a geometrically irreducible <span class="math inline">\(f\in k[x ,y]\)</span>.</p></li>
</ol>
</div>
<p>Recall separable implies there exists a separating transcendence basis.</p>
<div class="proof" title="of a">
<p>This means there exists a primitive element <span class="math inline">\(x\in K\)</span> such that <span class="math inline">\(K/k(x)\)</span> is finite and separable. By the Primitive Element Corollary (FT 7.2), there exist a <span class="math inline">\(y\in K\)</span> such that <span class="math inline">\(K = k(x, y)\)</span>.</p>
</div>
<div class="proof" title="of b">
<p>Omitted for now, slightly technical.</p>
</div>
<div class="remark">
<p>Importance of last result: a regular function field on one variable corresponds to a nice geometrically irreducible polynomial <span class="math inline">\(f\)</span>.</p>
</div>
<div class="remark">
<p>Note that the plane curve module may not be smooth, and in fact usually is not possible. I.e. <span class="math inline">\(k[x ,y]/\left\langle{f}\right\rangle\)</span> is a one-dimensional noetherian domain, which need not be integrally closed.</p>
</div>
<div class="question">
<p>Can every one variable function field be 2-generated?</p>
</div>
<div class="answer">
<p>Yes, as long as the ground field is perfect. In positive characteristic, the suspicion is no: there exists finite inseparable extensions <span class="math inline">\(\ell/k\)</span> that need arbitrarily many generators. However, what if <span class="math inline">\(K/k\)</span> has constant field <span class="math inline">\(k\)</span> but is not separable? Riemann-Roch may have something to say about this.</p>
</div>
<div class="example">
<p><span class="math display">\[\begin{align*} ax^p + b - y^b \end{align*}\]</span></p>
</div>
<div class="remark">
<p>We can find examples of nice function fields by taking irreducible polynomials in two variables. This will define a one-variable function field. If the polynomial is geometrical reducible, this produces regular function fields.</p>
</div>
<h1 id="lecture-4-chapter-1-one-variable-function-fields-and-their-valuations">Lecture 4: Chapter 1, One Variable Function Fields and Their Valuations</h1>
<p>Since we have the field-theoretic preliminaries out of the way, we now start studying one-variable function fields in earnest. The main technique that we use to extract the geometry will be the theory of valuations. These may be familiar from NTII, but we will cover them in more generality here.</p>
<h2 id="valuation-rings-and-krull-valuations">Valuation Rings and Krull Valuations</h2>
<p>Recall that NTII approach to valuations:</p>
<div class="definition" title="Valuation">
<p>A <strong>valuation</strong> on a field <span class="math inline">\(K\)</span> is a map <span class="math inline">\(v:K\to {\mathbb{R}}\cup\left\{{\infty}\right\}\)</span> such that <span class="math inline">\(v(K^{\times}) \subset {\mathbb{R}}\)</span>, <span class="math inline">\(v(0) = \infty\)</span>, and <span class="math inline">\(v\)</span> is of the form <span class="math inline">\(-\log({\left\lvert {{\,\cdot\,}} \right\rvert})\)</span> where <span class="math inline">\({\left\lvert {{\,\cdot\,}} \right\rvert}: K \to [0, \infty)\)</span> is an <em>ultrametric norm</em>.<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a> Recall that an <em>ultrametric norm</em> satisfies not only the triangle inequality but the ultrametric triangle inequality, i.e. <span class="math inline">\(d(x, z) \leq \max(x, z)\)</span>.</p>
</div>
<p>We now take an algebraic approach to this definition, where we’ll end up replacing <span class="math inline">\({\mathbb{R}}\)</span> with something more general.</p>
<div class="definition" title="Valuation Ring">
<p>A subring <span class="math inline">\(R\)</span> of a field <span class="math inline">\(K\)</span> is a <strong>valuation ring</strong> if for all <span class="math inline">\(x\in K^{\times}\)</span>, at least one of <span class="math inline">\(x\)</span> or <span class="math inline">\(x^{-1}\)</span> is in <span class="math inline">\(R\)</span>.</p>
</div>
<div class="remark">
<p>This is a “largeness” property. It also implies that <span class="math inline">\(K = \operatorname{ff}(R)\)</span>.</p>
</div>
<h2 id="group-of-divisibility">Group of Divisibility</h2>
<div class="definition" title="Group of Divisibility">
<p>Given any integral domain <span class="math inline">\(R\)</span> with fraction field <span class="math inline">\(K\)</span>, the <strong>group of divisibility</strong> <span class="math inline">\(G(R)\)</span> is defined as the <em>partially ordered commutative group</em><a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a></p>
<p><span class="math display">\[\begin{align*}   G(R) \mathrel{\vcenter{:}}= K^{\times}/ R^{\times} .\end{align*}\]</span> We will write the group law here additively. The ordering is given by <span class="math inline">\(x\leq y \iff y/x \in R\)</span>.</p>
</div>
<div class="remark">
<p>Note that the way the partial order is written, it’s a relation on <span class="math inline">\(K^{\times}\)</span>, but it is not quite a partial ordering there. It is reflexive and transitive, but need not be antireflexive: if <span class="math inline">\(x/y, y/x\in R\)</span> then <span class="math inline">\(x,y\)</span> differ by an element of <span class="math inline">\(u\in R^{\times}\)</span> so that <span class="math inline">\(x=uy\)</span>. In particular, they need not be equal. This gives a structure of a <em>quasiordering</em>, and if you set <span class="math inline">\(x\sim y \iff x\leq y\)</span> and <span class="math inline">\(y\leq x\)</span>, this leads to an equivalence relation, and modding out by it yields a partial order. Here this is accomplished by essentially trivializing units.<br />
</p>
<p>Another way to think of <span class="math inline">\(G(R)\)</span> is as the nonzero principal fractional ideals of <span class="math inline">\(K\)</span>, since any two generators of an ideal will differ by a unit.</p>
</div>
<div class="remark">
<p>Inside this group there is a <em>positive cone</em> <span class="math inline">\(G(R)^+\)</span> of elements that are “nonnegative”: since we’re in a commutative setting, the zero element is equal to 1, and the positive cone is given by <span class="math inline">\(\left\{{y\geq 0}\right\} = \left\{{y\in R}\right\}\)</span>, and is thus given by the group <span class="math inline">\(G(R)^+ = (R, \cdot)\)</span>.<br />
</p>
<p>This is very general: if you’re studying factorization in integral domains, many properties are reflected in <span class="math inline">\(G(R)\)</span>. E.g. being a UFD (the most important factorization property!) implies that <span class="math inline">\(G(R)\)</span> is a free commutative group.</p>
</div>
<div class="remark">
<p>In general this is only a <em>partially</em> ordered group and not totally ordered. For example, take <span class="math inline">\(R = {\mathbb{Z}}\)</span> and <span class="math inline">\(x=2, y=3\)</span>, then neither of <span class="math inline">\(2/3, 3/2\)</span> are in <span class="math inline">\({\mathbb{Z}}\)</span>, so <span class="math inline">\(x\not\leq y\)</span> and <span class="math inline">\(y\not\leq x\)</span>. On the other hand, if we do have a total order, then either <span class="math inline">\(x\)</span> or <span class="math inline">\(x^{-1}\)</span> is in the ring, which are exactly valuation subring of a field.</p>
</div>
<div class="claim">
<p><span class="math inline">\(R\)</span> is a valuation ring <span class="math inline">\(\iff\)</span> <span class="math inline">\(G(R)\)</span> is totally ordered.</p>
</div>
<div class="remark">
<p>Note that <span class="math inline">\({\mathbb{R}}\)</span> is a totally ordered group.</p>
</div>
<h2 id="generalized-valuations">Generalized Valuations</h2>
<p>This makes <span class="math inline">\(G(R)\)</span> the “target group” of a generalized analytic valuation. Whenever we have a valuation ring, we have a totally ordered commutative group, and the valuation <span class="math inline">\(v: K^{\times}\to G(R)\)</span> is a quotient map which we can extend to <span class="math inline">\(K\)</span> by <span class="math inline">\(v(0) \mathrel{\vcenter{:}}=\infty\)</span>. This has some familiar properties:</p>
<ul>
<li>(VRK1) For all <span class="math inline">\(x,y\in K^{\times}\)</span>,<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a></li>
</ul>
<p><span class="math display">\[\begin{align*}   v(xy) = v(x) + v(y) .\end{align*}\]</span></p>
<ul>
<li>(VRK2) For all <span class="math inline">\(x,y \in K^{\times}\)</span> such that <span class="math inline">\(x+y\neq 0\)</span>, <span class="math display">\[\begin{align*}       v(x+y) \geq \min(v(x), v(y))     .\end{align*}\]</span></li>
</ul>
<p>For ultrametric norms, all triangles are isosceles: is that true for this type of function? The answer is yes, by the following exercise:</p>
<div class="exercise" title="?">
<p>If <span class="math inline">\(v(x) \neq v(y)\)</span>, then <span class="math inline">\(v(x+y) = \min(v(x), v(y))\)</span>.</p>
</div>
<p>So the properties here are formally identical to the NTII notion of valuation, with <span class="math inline">\(({\mathbb{R}}, +, \leq)\)</span> replaced by <span class="math inline">\((G(R), +, \leq)\)</span>.</p>
<div class="exercise" title="?">
<p>Conversely, if <span class="math inline">\(v: K^{\times}\to G\)</span> is a map into a totally ordered commutative group satisfying VRK1 and VRK2<a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a>, then <span class="math display">\[\begin{align*}   R_v \mathrel{\vcenter{:}}=\left\{{x\in K^{\times}~{\text{s.t.}}~v(x) \geq 0}\right\} \cup\left\{{0}\right\} \end{align*}\]</span> is a valuation ring.<a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a> We can thus extract valuation rings in this situation.</p>
</div>
<div class="exercise" title="?">
<p>A valuation ring is <strong>local</strong>, i.e. there is a unique maximal ideal <span class="math display">\[\begin{align*}   \mathfrak{m}_v \mathrel{\vcenter{:}}=\left\{{x\in K^{\times}~{\text{s.t.}}~v(x) &gt; 0}\right\} \cup\left\{{0}\right\} .\end{align*}\]</span></p>
</div>
<div class="remark">
<p>These two constructions are morally mutually inverse. This doesn’t hold on the nose, since there is extraneous data in the new analytic valuation. Recall that in NTII we have a notion of equivalence of norms, and two distinct norms that are equivalent can give rise to the same valuation. For example, given a valuation, one can scale it by <span class="math inline">\(\alpha \in {\mathbb{R}}\)</span>, and it’s easy to check that this gives the same valuation. It is possible for the valuation not to surject onto <span class="math inline">\({\mathbb{R}}\)</span>, but this doesn’t happen in practice. The image is usually infinite cyclic, what we call a <em>discrete valuation</em>, and so one is led to the definition of the <em>value group</em> of the valuation as its image. If you have a notion of equivalence of Krull valuations, you want to allow for isomorphisms of the value group. The cleanest notion of equivalence is thus the following:</p>
</div>
<div class="definition" title="Equivalence of Krull valuations">
<p>Two Krull valuations on a field <span class="math inline">\(K\)</span> are <strong>equivalent</strong> iff their valuation rings are <em>equal</em>.</p>
</div>
<div class="remark">
<p>Going back to NTII, if you have two nonarchimedean norms on a field, then there are many equivalent conditions for equivalence, and this is one of them.</p>
</div>
<p>Some general valuation theory:</p>
<ul>
<li><p>Every totally ordered commutative group is a group of divisibility.<a href="#fn20" class="footnote-ref" id="fnref20" role="doc-noteref"><sup>20</sup></a></p></li>
<li><p>A totally ordered group has <strong>rank 1</strong> if it is nontrivial and embeds into <span class="math inline">\({\mathbb{R}}\)</span></p>
<ul>
<li>If the value group is trivial, <span class="math inline">\(R = K\)</span></li>
</ul></li>
<li><p>A Krull valuation of rank at most 1 is the NTII notion of a valuation.</p></li>
</ul>
<div class="exercise" title="?">
<p>For <span class="math inline">\(n\geq 2\)</span>, put the lexicographic order on <span class="math inline">\({\mathbb{Z}}^n\)</span>, and show this has rank strictly larger than 1. Thus <span class="math inline">\({\mathbb{Z}}^n\hookrightarrow{\mathbb{R}}\)</span> as a commutative group, but not as a totally ordered commutative group.</p>
</div>
<div class="remark">
<p>In fact, for any ordered group <span class="math inline">\(G\)</span>, one can attach a rank: a cardinal number <span class="math inline">\(r(G)\)</span>. Here, <span class="math inline">\(r(({\mathbb{Z}}^n, \text{lex})) = n\)</span>. This is useful when studying <span class="math inline">\(\operatorname{Spec}(R)\)</span> for <span class="math inline">\(R\)</span> a DVR.</p>
</div>
<p>A valuation of rank bigger than 1 does not induce a norm on <span class="math inline">\(K\)</span> in the metric sense, although this is not so important. A closer notion is expanding the notion of a metric space by allowing the metric to be defined on <span class="math inline">\(X\)</span> as <span class="math inline">\(d: X\times X \to R\)</span> for some <span class="math inline">\(R\)</span> more general than <span class="math inline">\({\mathbb{R}}\)</span>, like a totally ordered group or a nonarchimedean field. This would yield a class of topological spaces that are reminiscent of metric spaces.</p>
<h2 id="regular-or-centered-valuations">Regular or Centered Valuations</h2>
<div class="definition" title="Important: Regular and Centered">
<p>Let <span class="math inline">\(v:K^{\times}\to (G, +)\)</span> be a Krull valuation and let <span class="math inline">\(A \subset K\)</span> be a subring of <span class="math inline">\(K\)</span>. Then <span class="math inline">\(v\)</span> is <strong><span class="math inline">\(A{\hbox{-}}\)</span>regular</strong> or <strong>centered in <span class="math inline">\(A\)</span></strong> if <span class="math inline">\(A\)</span> is a subset of some valuation ring <span class="math inline">\(R_v\)</span>. In this case, <span class="math inline">\(\mathfrak{p} \mathrel{\vcenter{:}}=\mathfrak{m}_v \cap A \in \operatorname{Spec}(A)\)</span> is denoted the <strong>center of <span class="math inline">\(v\)</span> in <span class="math inline">\(A\)</span></strong>.<a href="#fn21" class="footnote-ref" id="fnref21" role="doc-noteref"><sup>21</sup></a></p>
</div>
<div class="remark">
<p>The term regularity here arises because we’ll want to think of elements of <span class="math inline">\(A\)</span> as functions and the valuation as a type of point, then the notion of being a regular function at a point will carry over. The center is the subset of <span class="math inline">\(A\)</span> with strictly positive valuation. Also recall that pulling back prime ideals yields prime ideals, and maximal ideals are a special kind of prime ideal, but in general pulling back a maximal ideal may not result in another maximal ideal. So somehow the valuation affects every subring on which it is regular.</p>
</div>
<div class="definition" title="Key: Zariski-Riemann Space">
<p>For <span class="math inline">\(A \subset K\)</span>, define <span class="math display">\[\begin{align*}   \Sigma(K/A) &amp;\mathrel{\vcenter{:}}=\left\{{\text{valuation rings } A \subset R \subsetneq K ~{\text{s.t.}}~K = \operatorname{ff}(R)}\right\} \\ \tilde \Sigma(K/A) &amp;\mathrel{\vcenter{:}}=\left\{{\text{valuation rings } A \subset R \subseteq K ~{\text{s.t.}}~K = \operatorname{ff}(R)}\right\} .\end{align*}\]</span> The set <span class="math inline">\(\tilde \Sigma(K/A)\)</span> is the <strong>Zariski-Riemann space</strong>.</p>
</div>
<div class="remark">
<p>Note that in this definition, we’re taking all <span class="math inline">\(A{\hbox{-}}\)</span>regular valuation rings <span class="math inline">\(R\)</span> in <span class="math inline">\(K\)</span>. If someone says <span class="math inline">\(R\)</span> is a valuation ring of <span class="math inline">\(K\)</span>, they likely mean that <span class="math inline">\(K = \operatorname{ff}(R)\)</span>. Note that fields are valuation rings, so otherwise, any subfield of <span class="math inline">\(K\)</span> would also be a valuation ring of <span class="math inline">\(K\)</span>. Here, <span class="math inline">\(K\)</span> itself plays the role of a generic point. (?) The only difference in these two definitions is that in the first, the trivial valuation ring is being excluded.</p>
</div>
<div class="definition" title="Key: Places, Points of a Curve">
<p>If <span class="math inline">\(K/k\)</span> is a one variable function field<a href="#fn22" class="footnote-ref" id="fnref22" role="doc-noteref"><sup>22</sup></a> , then <span class="math inline">\(\Sigma(K/k)\)</span> will be the <strong>points of the associated algebraic curve</strong> or <strong>places</strong>. These can be thought of as valuation rings, or equivalence classes of Krull valuations, where two valuations are equivalent if they have the same valuation ring.</p>
</div>
<div class="remark">
<p>In terms of scheme theory, these will be the closed points of our algebraic curve. We will view elements <span class="math inline">\(f\in K\)</span> as meromorphic functions on <span class="math inline">\(\Sigma(K/k)\)</span>.</p>
</div>
<h2 id="topological-considerations">Topological Considerations</h2>
<div class="definition" title="Zariski Topology">
<p>The <strong>Zariski topology</strong> on <span class="math inline">\(\Sigma(K/A)\)</span> has a sub-base <span class="math display">\[\begin{align*}   \left\{{U(f) ~{\text{s.t.}}~f\in K }\right\} &amp;&amp; U(f) \mathrel{\vcenter{:}}=\left\{{v\in \tilde \Sigma(K/A) ~{\text{s.t.}}~v(f) \geq 0}\right\} = \tilde \Sigma(K/ A[f]) .\end{align*}\]</span> and we thus take the minimal topology such that all of these sets are open. In other words, every open set is a finite intersection and/or arbitrary unions, including empty intersections/unions. The last term is precisely the subring generated by <span class="math inline">\(A\)</span> and <span class="math inline">\(f\)</span>. Thus a base is <span class="math inline">\(U(f_1, \cdots, f_n) = \tilde \Sigma(K / A[f_1, \cdots, f_n])\)</span>. The Zariski topology on <span class="math inline">\(\Sigma(K/A)\)</span> is defined the same way and/or via the subspace topology, since this removes a single point.</p>
</div>
<div class="remark">
<p>We thus get the subrings of <span class="math inline">\(K\)</span> that contain <span class="math inline">\(A\)</span> and are finitely generated as <span class="math inline">\(A{\hbox{-}}\)</span>algebras. We’ll be specifically looking at the case where <span class="math inline">\(A\)</span> is a field and <span class="math inline">\(K\)</span> is a one variable function field.</p>
</div>
<div class="theorem" title="Zariski">
<p><span class="math inline">\(\tilde \Sigma(K/A)\)</span> is quasi-compact.</p>
</div>
<div class="proof" title="?">
<p>See Mazamara (?) in the chapter discussing valuation rings.</p>
</div>
<p>Note that by definition, <span class="math inline">\(v_n \not\in \Sigma(K/A)\)</span>. In <span class="math inline">\(\tilde \Sigma(K/A)\)</span>, we have a trivial valuation <span class="math inline">\(v_n\)</span> whose value group is trivial and valuation ring is <span class="math inline">\(K\)</span> itself, and <span class="math inline">\(v_n\)</span> is a generic point of <span class="math inline">\(\Sigma(K/A)\)</span>: its closure is the entire space. In other words, it is in every nonempty open subset. Since we have at least one generic point, and in general there may be many, if <span class="math inline">\({\left\lvert {\tilde\Sigma(K/A) &gt; 1} \right\rvert}\)</span> then this is not a separated (<span class="math inline">\(T_1\)</span>) space since the point is not closed.<a href="#fn23" class="footnote-ref" id="fnref23" role="doc-noteref"><sup>23</sup></a> Another example of such a space would be <span class="math inline">\(\operatorname{Spec}(R)\)</span> for <span class="math inline">\(R\)</span> a commutative ring with positive Krull dimension, which will be Kolmogorov (<span class="math inline">\(T_0\)</span>) but not separated. Such a spectrum is the underlying topological space of some affine scheme, and in general, schemes will have these kinds of properties that are bad (but not <em>too</em> bad).</p>
<p>In our case of interest, when <span class="math inline">\(K/k\)</span> is finitely generated of transcendence degree one, we’ll see that this is the cofinite topology on an infinite space: the proper closed subsets are precisely the finite subsets, or equivalently every nonempty open subset has finite complement. This is far from Hausdorff: the intersection of two open subsets will still have finite complement, so any two nonempty open subsets must intersect.<br />
</p>
<p>It’s not generally true that just removing the generic point <span class="math inline">\(v_n\)</span> will make the space separated, but in our case, it will be. So if we restrict to nontrivial valuation rings, then the underlying set will be infinite and we’ll get the cofinite topology. This will be the coarsest separated topology, i.e. if you want singletons to be closed, finite subsets must be closed. If <span class="math inline">\(k \subset A \subset K\)</span> where <span class="math inline">\(A\)</span> is a Dedekind domain with fraction field <span class="math inline">\(K\)</span>, we will see that if we consider not the <span class="math inline">\(k{\hbox{-}}\)</span>regular elements but the <span class="math inline">\(A{\hbox{-}}\)</span>regular ones, we’ll get <span class="math inline">\(\Sigma(K/A) = {\operatorname{maxSpec}}(A)\)</span> and both Zariski topologies are cofinite. Note that in a Dedekind domain, trading in a prime spectrum for a max spectrum is removing a generic point, so this matches up. The moral: the topology of <span class="math inline">\(\Sigma(K/k)\)</span> is not doing anything interesting and we won’t need it much.</p>
<h2 id="scheme-theory-resolution-of-singularities">Scheme Theory, Resolution of Singularities</h2>
<p>When <span class="math inline">\(K/k\)</span> instead has transcendence degree <em>bigger</em> than 1, then <span class="math inline">\(\tilde \Sigma(K/k)\)</span> is much more interesting. If we were doing things scheme-theoretically, we could try to define a structure sheaf: attaching a sheaf whose stalks are local commutative rings to make it a locally ringed space.<a href="#fn24" class="footnote-ref" id="fnref24" role="doc-noteref"><sup>24</sup></a> Here, the choice of a ring is straightforward: literally <span class="math inline">\(\tilde \Sigma(A, A[f_1, \cdots, f_n])\)</span>. There’s an exercise that shows that although defining a sheaf on the entire space is somewhat annoying, defining it on a basis suffices.</p>
<div class="exercise" title="?">
<p>Endow <span class="math inline">\(\tilde \Sigma(K/k)\)</span> with the structure of a locally ringed space.</p>
</div>
<div class="remark">
<p>In dimension 1 (the case we’re studying), the corresponding Zariski-Riemann space will be the scheme associated to the complete nonsingular model of the curve. So this valuation-theoretic approach will take you from the function field back to a nice model of the scheme itself. But note that in larger dimensions, there is no unique complete nonsingular model – for example, you can blow any one up to get another – so this pattern can’t possibly continue to hold. In fact, it’s not clear if we even know if there’s <em>one</em> such model!</p>
</div>
<div class="remark">
<p>Thus in dimension <span class="math inline">\(&gt;1\)</span>, you get something that is decidedly not a scheme, but is still relevant to the study of resolution of singularities for your function field. Where do these come up? Zariski used <span class="math inline">\(\Sigma(K/A)\)</span> to prove resolution of singularities<a href="#fn25" class="footnote-ref" id="fnref25" role="doc-noteref"><sup>25</sup></a> in characteristic zero and dimensions 2 and 3 in 1944, although dimension 2 was classical by the Italian school. Later, Hironaka (1984) got the Fields medal for proving resolution of singularities for all dimensions in characteristic zero using an ingenious inductive argument that avoided Zariski-Riemann spaces entirely. It remarkably doesn’t use any new objects/tools, just uses existing ones in a clever way. So why talk about Zariski-Riemann spaces at all? In the last 10 years or so, work of Ternkin and Conrad has revived and generalized them. They study <em>relative</em> such spaces.</p>
</div>
<div class="problem" title="Open">
<p>In positive characteristic, resolution of singularities is only known up to dimension <span class="math inline">\(\leq 3\)</span>.</p>
</div>
<h2 id="intermediate-rings">Intermediate Rings</h2>
<p>The following is an extremely important result from commutative algebra:</p>
<div class="theorem" title="CA 17.17">
<p>Let <span class="math inline">\(A \subset K\)</span> be a subring of a field, then <span class="math display">\[\begin{align*}   \cap_{v\in \tilde \Sigma(K/A)} R_v ,\end{align*}\]</span> the intersection of all valuation subrings of the field, is the integral closure of <span class="math inline">\(A\)</span> in <span class="math inline">\(K\)</span>.</p>
</div>
<p>The proof is mostly a Zorn’s lemma type of argument. Note that each <span class="math inline">\(R_v\)</span> is generally big, contains <span class="math inline">\(A\)</span>, and <span class="math inline">\(\operatorname{ff}(R_v) = K\)</span>. Moreover, each valuation ring is integrally closed, although we haven’t proved this yet.</p>
<div class="corollary" title="?">
<p>For <span class="math inline">\(K/k\)</span> function field, <span class="math inline">\(\cap_{v\in \Sigma(K/k)} R_v = \kappa(K)\)</span>, the constant subfield of <span class="math inline">\(K\)</span>.</p>
</div>
<div class="proof" title="?">
<p>Note that <span class="math inline">\(\kappa(K)\)</span> is the integral (algebraic) closure of <span class="math inline">\(k\)</span> in <span class="math inline">\(K\)</span>. Applying the theorem directly almost works, except the theorem involves <span class="math inline">\(\tilde \Sigma\)</span>. Can we remove the tilde? Suppose not, this can only happen if <span class="math inline">\(\Sigma(K/k) = \emptyset\)</span> and the intersection is just <span class="math inline">\(K\)</span> itself, the largest thing in the intersection. But can the integral closure of <span class="math inline">\(k\)</span> in <span class="math inline">\(K\)</span> be <span class="math inline">\(K\)</span> itself? No, since the transcendence degree of the function field is positive. So <span class="math inline">\(K/k\)</span> is transcendental, while <span class="math inline">\(\kappa(K) / k\)</span> is an algebraic extension, a contradiction.</p>
</div>
<div class="remark">
<p>Note that <span class="math inline">\(\Sigma(K/k)\)</span> is nonempty: there is a nontrivial valuation ring between <span class="math inline">\(k\)</span> and <span class="math inline">\(K\)</span> in great generality, and there are often many.</p>
</div>
<div class="claim" title="Key">
<p>If <span class="math inline">\(\operatorname{trdeg}(K/k) = 1\)</span>, then every <span class="math inline">\(v\in \Sigma(K/k)\)</span> is discrete and thus has value group isomorphic to <span class="math inline">\({\mathbb{Z}}\)</span>.</p>
</div>
<p>So despite the fact that we’ve introduced a more general notion of higher rank valuations, in dimension 1, every single valuation is discrete.</p>
<div class="proof" title="?">
<p>Let <span class="math inline">\(v\in \Sigma(K/k)\)</span> be a place, so its a valuation ring with fraction field <span class="math inline">\(K\)</span> that is not <span class="math inline">\(K\)</span>, then <span class="math inline">\(R_v\)</span> is not a field. So its maximal ideal <span class="math inline">\(\mathfrak{m}_v\)</span> is nonzero, so choose a nonzero element <span class="math inline">\(t\in \mathfrak{m}_v\)</span>. Then <span class="math inline">\(t \in R_v\)</span> and <span class="math inline">\(R_v\)</span> contains <span class="math inline">\(k\)</span>, so <span class="math inline">\(k[t] \subset R_v\)</span>. Note that <span class="math inline">\(k[t]\)</span> is a PID sitting inside a valuation ring. So restrict this maximal ideal down: <span class="math inline">\(\mathfrak{m}_v \cap k[t]\)</span> is a prime ideal of <span class="math inline">\(k[t]\)</span> containing <span class="math inline">\(t\)</span>, and thus the center <span class="math inline">\(\mathfrak{m}_v \cap k[t] = \left\langle{t}\right\rangle\)</span>. This follows because a prime ideal in the polynomial ring <span class="math inline">\(k[t]\)</span> which contains <span class="math inline">\(t\)</span> is necessarily generated by <span class="math inline">\(t\)</span>, since there’s exactly one such ideal.<br />
</p>
<p>Now restricting the valuation on <span class="math inline">\(K\)</span> to <span class="math inline">\(k(t) \subset K\)</span>, <span class="math inline">\(K / k(t)\)</span> will be a finite extension (from the first lecture). We know <span class="math inline">\(k(t) \subset K\)</span>, and we can now check that <span class="math inline">\({\left.{v}\right|_{k(t)}}\)</span> is the <span class="math inline">\(t{\hbox{-}}\)</span>adic valuation <span class="math inline">\(v_t\)</span>. Note that <span class="math inline">\(\mathfrak{m}_v\)</span> can not contain any other monic irreducible polynomials, since distinct such polynomials are coprime. Since we’re in a PID, this ideal would contain any linear combination of them and thus contain 1. So consider the map <span class="math display">\[\begin{align*}   k[t] \hookrightarrow R_b \to G(R_v) = K^{\times}/ R^{\times} .\end{align*}\]</span> Note that the units of <span class="math inline">\(k[t]\)</span> map trivially, using the fact that any element in <span class="math inline">\(k[t]\)</span> can be written as <span class="math inline">\(u \prod p_i^{a_i}\)</span> with the <span class="math inline">\(p_i\)</span> monic irreducible polynomials. The unit maps to zero, along with all of the other monic irreducibles, and thus the image is determined entirely by the image of powers of <span class="math inline">\(t\)</span>. This whole term goes to zero unless some <span class="math inline">\(p_i\mapsto t\)</span>, in which case it maps to some power of <span class="math inline">\(t\)</span>.<br />
</p>
<p>So suppose <span class="math inline">\(t\mapsto \gamma \neq 0\in G(R)\)</span>, which is nonzero because <span class="math inline">\(t\)</span> was not a unit (since it was in the maximal ideal). Then the image is exactly <span class="math inline">\(\gamma^{\mathbb{N}}\)</span>, the non-negative integer powers of the image of <span class="math inline">\(t\)</span>. But if we know goes on this domain, taking denominators shows where it goes on the fraction field (of a UFD), so the image is the cyclic group generated by <span class="math inline">\(\gamma\)</span>, i.e. the powers of <span class="math inline">\(t\)</span> are literally the only valuations we get. So the image of <span class="math inline">\(k(t)^{\times}\)</span> in <span class="math inline">\(G(R_v)\)</span> is <span class="math inline">\(\gamma^{\mathbb{Z}}\)</span>, yielding a discrete valuation. This proves that the restriction to the rational function field <span class="math inline">\(k(t)\)</span> is discrete, and we want to use this to deduce that the original valuation is discrete.<br />
</p>
<p>We can now use NTII:<a href="#fn26" class="footnote-ref" id="fnref26" role="doc-noteref"><sup>26</sup></a> since <span class="math inline">\(K/k(t)\)</span> is finite, it follows that <span class="math inline">\(v\)</span> is discrete iff <span class="math inline">\({\left.{v}\right|_{k(t)}}\)</span> is discrete, and thus <span class="math inline">\(v\)</span> is discrete.</p>
</div>
<h2 id="valuations-of-every-rank">Valuations of Every Rank</h2>
<p>So every place of <span class="math inline">\(K/k\)</span> is a discrete valuation as long as the transcendence degree is one, but this is far from the case for degree <span class="math inline">\(\geq 2\)</span>! In the following example, we’ll have a rational function field, which makes things easier. You need a theory of extending Krull valuations, since we’ll define a non-rank 1 valuation on the rational function field. But an arbitrary finitely generated field extension of degree <span class="math inline">\(d\)</span> over <span class="math inline">\(k\)</span> is a finite degree extension of the rational function field, and valuation theory will tell you that every valuation downstairs can be extended in full generality to a finite degree field extension, and the rank will not change.</p>
<div class="exercise" title="?">
<p>If <span class="math inline">\(K/k\)</span> is finitely generated of <span class="math inline">\(\operatorname{trdeg}\geq 2\)</span>, then <span class="math inline">\(\Sigma(K/k)\)</span> has valuations of rank <span class="math inline">\(d\)</span>.</p>
</div>
<p>Note that the Zariski-Riemann space only consists of discrete valuations, which is a characteristic property of one variable function fields. So these higher rank valuations may look weird, but when studying a function field of higher transcendence degree (e.g. for an algebraic surface), these occur.</p>
<div class="exercise" title="Constructing valuations of arbitrary rank and value group">
<p>Let <span class="math inline">\(k\)</span> be a field and <span class="math inline">\(K = k(t_1, \cdots, t_n)\)</span>. Set <span class="math inline">\(G = {\mathbb{Z}}^n\)</span> with the lex order, so <span class="math inline">\(G^{\geq 0} = {\mathbb{N}}^n\)</span>.</p>
<ul>
<li><p>Show that <span class="math inline">\(k[t_1, \cdots, t_n] = k[G^{\geq 0}]\)</span>, where the RHS is the associated semigroup ring.</p></li>
<li><p>Define <span class="math inline">\(v: k[G^{\geq 0}]^{\bullet}\to G^{\geq 0}\)</span> by mapping each polynomial the minimal index of a monomial in its support. For example, <span class="math display">\[\begin{align*}       v(a_1 t_1^3 t_2 + a_2 t_1^2 t_2^{10})  = (2, 10)     ,\end{align*}\]</span> which has support <span class="math inline">\((3, 1)\)</span> and <span class="math inline">\((2, 10)\)</span>, and we take the min in the lex order.</p></li>
<li><p>Extend <span class="math inline">\(v\)</span> to <span class="math inline">\(v: K^{\bullet}\twoheadrightarrow G\)</span> satisfying VRK1 and VRK2. Show that <span class="math inline">\(R_v \mathrel{\vcenter{:}}= v^{-1}(G^{\geq 0}) \cup\left\{{0}\right\}\)</span> is a valuation ring with value group <span class="math inline">\(G\)</span>, and in particular, the rank is <span class="math inline">\(n\)</span>.</p></li>
</ul>
</div>
<p>Note that doing this for <span class="math inline">\(n=1\)</span> reduces to the <span class="math inline">\(t{\hbox{-}}\)</span>adic valuation, which just keeps track of the smallest power of <span class="math inline">\(t\)</span> appearing. Here you can extend to fraction fields by defining <span class="math inline">\(v(x/y) = v(x) - v(y)\)</span>. The semigroup ring can’t <em>be</em> the valuation ring, since polynomial rings are not local rings, so it’s much bigger. Note also that <span class="math inline">\({\mathbb{Z}}\)</span> can be replaced with any group <span class="math inline">\(G\)</span>, since it’s never used in anything but a psychological fashion.</p>
<div class="slogan">
<p>There is a huge difference between <span class="math inline">\(\operatorname{trdeg}= 1\)</span> and <span class="math inline">\(\operatorname{trdeg}&gt; 1\)</span>, and so we’ll only be working with the former case in this course.</p>
</div>
<h1 id="lecture-5-places">Lecture 5: Places</h1>
<div class="definition" title="Affine Domain">
<p>An <strong>affine domain</strong> <span class="math inline">\(R\)</span> over a field <span class="math inline">\(k\)</span> is a domain that is finitely generated as a <span class="math inline">\(k{\hbox{-}}\)</span>algebra.</p>
</div>
<h2 id="investigating-the-set-of-places">Investigating the Set of Places</h2>
<p>We saw an interesting example of a function field in more than one variable which showed that valuations of rank larger than 1 can arise, but this does not happen for one variable function fields. That is, for <span class="math inline">\(K/k\)</span> of transcendence degree 1, all valuations on <span class="math inline">\(K\)</span> which are trivial on <span class="math inline">\(k\)</span> are discrete. We’ll now want to go farther and describe the places <span class="math inline">\(\Sigma(K/k)\)</span>, which will be the set of points on an algebraic curve. Scheme-theoretically, this will literally be the set of closed points on a certain projective curve whose function field is <span class="math inline">\(K\)</span>. Note that a priori, finding closed points on a curve over an arbitrary field is hard!</p>
<p>Recall that if <span class="math inline">\(A\)</span> is a Dedekind domain such that <span class="math inline">\(\operatorname{ff}(A) = K\)</span>, then for all <span class="math inline">\(\mathfrak{p}\in \operatorname{mSpec}(A)\)</span> there exists a discrete valuation <span class="math inline">\(v_p\)</span> on <span class="math inline">\(K\)</span>. I.e., every maximal ideal induces a discrete valuation that is <span class="math inline">\(A{\hbox{-}}\)</span>regular, so the valuation ring will contain <span class="math inline">\(A\)</span>. How is this obtained? Take a nonzero <span class="math inline">\(x\in K^{\times}\)</span>, and take the corresponding principal fractional ideal <span class="math inline">\(\left\langle{x}\right\rangle \mathrel{\vcenter{:}}= Ax\)</span>, which we can factor in a Dedekind domain as <span class="math inline">\(Ax = \prod_{\mathfrak{p} \in \operatorname{mSpec}(A)} \mathfrak{p}^{\alpha_{\mathfrak{p}}}\)</span> with <span class="math inline">\(\alpha_{\mathfrak{p}} \in {\mathbb{Z}}\)</span>. This looks like an infinite product, but for any fixed <span class="math inline">\(x\)</span>, only finitely many <span class="math inline">\(\alpha\)</span> are nonzero. Note that these <span class="math inline">\(\alpha\)</span> are exactly what we’re looking for: the <span class="math inline">\(\mathfrak{p}{\hbox{-}}\)</span>adic evaluation of <span class="math inline">\(x\)</span> is given precisely by <span class="math inline">\(v_{\mathfrak{p}}(x) \mathrel{\vcenter{:}}=\alpha_{\mathfrak{p}}\)</span>, where we are using unique factorization of ideals in Dedekind domains. Thus we have a map <span class="math display">\[\begin{align*}   v_{{\,\cdot\,}}: \operatorname{mSpec}(A) &amp;\to \Sigma(K/A) \\ \mathfrak{p} &amp;\mapsto v_{\mathfrak{p}} .\end{align*}\]</span></p>
<p>So this sends a maximal ideal to a place that is <span class="math inline">\(A{\hbox{-}}\)</span>regular, and it turns out to be a bijection.</p>
<div class="proposition" title="?">
<p>The map <span class="math inline">\(v\)</span> is a bijection, and thus we may write <span class="math display">\[\begin{align*}   \Sigma(K/A) \cong \operatorname{mSpec}(A) .\end{align*}\]</span></p>
</div>
<div class="proof" title="?">
<div class="claim">
<p><span class="math inline">\(v\)</span> is injective.</p>
</div>
<p>If <span class="math inline">\(\mathfrak{p}_1, \mathfrak{p}_2 \in \operatorname{mSpec}(A)\)</span> are two different maximal ideals. Then there exists an element <span class="math inline">\(x\in \mathfrak{p}_1 \setminus\mathfrak{p}_2\)</span>, and so <span class="math inline">\(x^{-1} \in A_{\mathfrak{p}_2} \setminus A_{\mathfrak{p}_1}\)</span>. This follows since if <span class="math inline">\(x\)</span> is not in <span class="math inline">\(\mathfrak{p}_2\)</span>, its <span class="math inline">\(\mathfrak{p}_2{\hbox{-}}\)</span>adic valuation is zero, and thus the <span class="math inline">\(\mathfrak{p}_2{\hbox{-}}\)</span>adic valuation of <span class="math inline">\(x^{-1}\)</span> is <span class="math inline">\(-0 = 0\)</span> as well. On the other hand, since <span class="math inline">\(x\in \mathfrak{p}_1\)</span>, its <span class="math inline">\(\mathfrak{p}_1{\hbox{-}}\)</span>adic valuation is positive and therefore <span class="math inline">\(v_{\mathfrak{p}_1}(x^{-1}) &lt; 0\)</span> and <span class="math inline">\(x^{-1}\)</span> is not in <span class="math inline">\(A_{\mathfrak{p}_1}\)</span>.</p>
<div class="claim">
<p><span class="math inline">\(v\)</span> is surjective.</p>
</div>
<p>Let <span class="math inline">\(v\in \Sigma(K/A)\)</span>, so <span class="math inline">\(A \subset R_v\)</span>, i.e. take a valuation whose valuation ring contains <span class="math inline">\(A\)</span>. Note that we’re not assuming the valuation is discrete, this can be a general Krull valuation, but we’re trying to show it’s equal to a certain <span class="math inline">\(p{\hbox{-}}\)</span>adic valuation. As always with a subring of a valuation ring, we can pull back the maximal ideal and consider <span class="math inline">\(\mathfrak{m}_v \cap A \in \operatorname{Spec}(A)\)</span>. We’re hoping that this is a maximal ideal, since maximals correspond to valuations. Since we’re in a Dedekind domain, the only prime ideal we <em>don’t</em> want this to be is the zero ideal of <span class="math inline">\(A\)</span>, so suppose it were. Then <span class="math inline">\(A^{\bullet}\subset R_v^{\times}\)</span>, and so <span class="math inline">\(K^{\times}\subset R_v^{\times}\)</span>. This is because the only element of the maximal ideal that lies in <span class="math inline">\(A\)</span> is zero, so every nonzero element of <span class="math inline">\(A\)</span> is not in this maximal ideal and is thus a unit. But for any unit, its inverse is also a unit, yielding the inclusion <span class="math inline">\(K^{\times}\subset R_v^{\times}\)</span>. The only way this could possibly happen is if <span class="math inline">\(R_v = K\)</span>, which yields the trivial valuation ring. However, by definition, in <span class="math inline">\(\Sigma(K/A)\)</span> we’ve excluded the trivial valuation, so this ideal can not be zero.<br />
</p>
<p>So we can conclude that the pullback <span class="math inline">\(\mathfrak{m}_v \cap A \in \operatorname{mSpec}(A)\)</span>, and so <span class="math inline">\(A_{\mathfrak{p}} \subset R_v\)</span>. This is from viewing elements in <span class="math inline">\(A_{\mathfrak{p}}\)</span> as quotients of elements in <span class="math inline">\(A\)</span> whose denominator have <span class="math inline">\(\mathfrak{p}{\hbox{-}}\)</span>adic valuation zero. Recall that we want to show that <span class="math inline">\(R_v = A_{\mathfrak{p}}\)</span>. We know <span class="math inline">\(R_v \subset K\)</span> is a proper containment, and we can use the fact that a <em>discrete</em> valuation ring is maximal among all proper subrings of its fraction field. In other words, for <span class="math inline">\(R\)</span> a DVR, there is no ring <span class="math inline">\(R&#39;\)</span> such that <span class="math inline">\(R \subset R&#39; \subset \operatorname{ff}(R)\)</span>. How do you prove this? This is similar to an early exercise in commutative algebra, where we looked at all rings between <span class="math inline">\({\mathbb{Z}}\)</span> and <span class="math inline">\({\mathbb{Q}}\)</span>, which generalized to looking at all rings between a PID and its fraction field, and a DVR is a local PID. So proving this statement is actually easier.<br />
</p>
<p>This is enough to show that <span class="math inline">\(A_{\mathfrak{p}} = R_v\)</span>, and this <span class="math inline">\(v\sim v_{\mathfrak{p}}\)</span>.</p>
</div>
<div class="remark">
<p>What the idea? For a general one variable function field <span class="math inline">\(K/k\)</span>, we’ll produce affine Dedekind domains <span class="math inline">\(R\)</span> with <span class="math inline">\(k \subset R \subset K\)</span> and <span class="math inline">\(\operatorname{ff}(R) = K\)</span>. This will give is subrings of this full ring of places that are <span class="math inline">\(\operatorname{mSpec}\)</span> of Dedekind domains. How many such domains will we need for their union to be the entire set of places? Just one won’t work, since <span class="math inline">\(\Sigma(K/k)\)</span> is like a complete or projective object, and a projective variety of dimension 1 can’t be covered by a single affine variety. However, it turns out that you can always cover it with 2. In fact, if you take any Dedekind domain between <span class="math inline">\(k\)</span> and <span class="math inline">\(\operatorname{ff}(K)\)</span>, the set of missing places (the ones that aren’t regular for any of these domains) will be a nonempty finite set of places. So you can always cover it by finitely many, and two suffices: as a consequence of the Riemann-Roch theorem, after removing any nonempty finite set of places, you’ll have the <span class="math inline">\(\operatorname{mSpec}\)</span> of a canonically associated Dedekind domain. We’ll prove this by starting with the case of <span class="math inline">\(K = k(t)\)</span>.</p>
</div>
<div class="claim">
<p><span class="math display">\[\begin{align*}   {\left\lvert { \Sigma(k(t)/k) \setminus\operatorname{mSpec}k[t] } \right\rvert} = 1 .\end{align*}\]</span></p>
</div>
<div class="question">
<p>Note that <span class="math inline">\(k \subset k[t] \subset k(t)\)</span> and <span class="math inline">\(k[t]\)</span> is a Dedekind domain, so this fits into the above framework, and moreover we know the maximal ideals of polynomial rings: irreducible monic polynomials. Taking all of these misses exactly one place.</p>
<p>How do we describe this missing place?</p>
</div>
<h2 id="describing-the-missing-place">Describing the Missing Place</h2>
<p>Suppose <span class="math inline">\(v \in \Sigma(k(t) / k) \setminus\Sigma(k(t) / k[t])\)</span>, so the valuation ring of <span class="math inline">\(v\)</span> contains <span class="math inline">\(k\)</span> but does not contain <span class="math inline">\(k[t]\)</span>. Then the valuation ring can not contain <span class="math inline">\(t\)</span>, and thus <span class="math inline">\(v(t) &lt; 0\)</span> and <span class="math inline">\(v(1/t) = -v(t) &gt; 0\)</span>. Since <span class="math inline">\(k[1/t]\)</span> is a PID, so if the valuation wasn’t <span class="math inline">\(t dash\)</span>regular, it’s <span class="math inline">\(1/t{\hbox{-}}\)</span>regular by definition. So <span class="math inline">\(v\in \Sigma(k(t) / k[1/t])\)</span>. Note that <span class="math inline">\(k[1/t] \cong k[t]\)</span> as rings. How many valuations on this polynomial ring give positive valuation to <span class="math inline">\(1/t\)</span>? Exactly one, since this corresponds to a prime ideal, namely <span class="math inline">\(\left\langle{1/t}\right\rangle\)</span>, so this unique valuation is <span class="math inline">\(v = v_{1 \over t}\)</span>, the <span class="math inline">\(1/t{\hbox{-}}\)</span>adic valuation.</p>
<p>That is, if we write <span class="math inline">\(f\in k(t)\)</span> as <span class="math inline">\((1/t)^n a(1/t)/b(1/t)\)</span> with <span class="math inline">\(a, b\in k[t]\)</span> polynomials with nonzero constant terms, then <span class="math inline">\(v_{1\over t}(f) = n\)</span>. Note that this process is the same as the one used to compute the <span class="math inline">\(t{\hbox{-}}\)</span>adic valuation <span class="math inline">\(v_t\)</span>.</p>
<p>Recall that a valuation on a domain can be uniquely extended to its fraction field by setting <span class="math inline">\(v(x/y) = v(x) - v(y)\)</span>.</p>
<div class="exercise" title="?">
<p>Define <span class="math inline">\(v_\infty: k(t)^{\times}\to {\mathbb{Z}}\)</span> by <span class="math inline">\(p(t)/q(t) \mapsto \deg q - \deg p\)</span>.</p>
<ol type="a">
<li><p>Show <span class="math inline">\(v_ \infty \in \Sigma(k(t) / k[1/t])\)</span>.</p></li>
<li><p>Show <span class="math inline">\(v_ \infty \sim v_{1\over t}\)</span> by showing they have the same valuation ring.</p></li>
<li><p>Show that <span class="math inline">\(v_ \infty = v_{1\over t}\)</span>.</p></li>
</ol>
</div>
<p>Note that <span class="math inline">\(1/t\)</span> is a uniformizer for <span class="math inline">\(v_ \infty\)</span></p>
<div class="theorem" title="Complete description of places">
<p><span class="math display">\[\begin{align*}   \Sigma(k(t) / k) = \operatorname{mSpec}k[t] {\coprod}\left\{{v_ \infty}\right\} .\end{align*}\]</span></p>
</div>
<p>Note that we know the maximal ideals – the irreducible monic polynomials – but it takes some effort to write them down. If <span class="math inline">\(k\)</span> is algebraically closed, however, every such polynomial is linear of the form <span class="math inline">\(t-\alpha\)</span> for <span class="math inline">\(\alpha\in k\)</span>. In this case, <span class="math inline">\(\operatorname{mSpec}k(t) \cong k\)</span>, and so <span class="math inline">\(\sigma( \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu (t) / \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu) = \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu {\coprod}\left\{{\infty}\right\} = {\mathbb{P}}^1(\mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu)\)</span>. More generally, the set of places on a rational function field will yield the scheme-theoretic set of closed points on the projective line over <span class="math inline">\(k\)</span>, which is more complicated if <span class="math inline">\(k\neq \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span> since not all closed points are <span class="math inline">\(k{\hbox{-}}\)</span>rational. Another way to say this is that if you have a valuation, there is a residue field, and for any place on a one variable function field the residue field will be a finite degree extension of <span class="math inline">\(k\)</span>. The degree 1 points will be the <span class="math inline">\(k{\hbox{-}}\)</span>rational points, and so <span class="math inline">\(\Sigma(k(t) / k)\)</span> will always contain a copy of <span class="math inline">\(k\)</span> but may have closed points of larger degree, making things slightly more complicated. This complication is handled well in both the scheme-theoretic and this valuation-theoretic approach.</p>
<h2 id="finite-generation-in-towers">Finite Generation in Towers</h2>
<p>The next theorem is a fact from commutative algebra:</p>
<div class="theorem" title="?">
<p>Let <span class="math inline">\(A\)</span> be a domain with <span class="math inline">\(\operatorname{ff}(A) = K\)</span>. Suppose <span class="math inline">\(A\)</span> is a finitely generated <span class="math inline">\(k{\hbox{-}}\)</span>algebra, let <span class="math inline">\(L/K\)</span> be a finite degree field extension, and let <span class="math inline">\(B\)</span> be the integral closure of <span class="math inline">\(A\)</span> in <span class="math inline">\(L\)</span>. Then</p>
<ol type="a">
<li><span class="math inline">\(B\)</span> is finitely generated as an <span class="math inline">\(A{\hbox{-}}\)</span>module.<a href="#fn27" class="footnote-ref" id="fnref27" role="doc-noteref"><sup>27</sup></a></li>
</ol>
<!-- -->
<ol start="2" type="a">
<li><p><span class="math inline">\(B\)</span> is an integrally closed domain with <span class="math inline">\(\operatorname{ff}(B) = L\)</span> which is finitely generated as a <span class="math inline">\(k{\hbox{-}}\)</span>algebra.</p></li>
<li><p><span class="math inline">\(\dim A = \dim B\)</span><a href="#fn28" class="footnote-ref" id="fnref28" role="doc-noteref"><sup>28</sup></a></p></li>
</ol>
<!-- -->
<ol start="4" type="a">
<li>If <span class="math inline">\(A\)</span> is Dedekind, so is <span class="math inline">\(B\)</span>.</li>
</ol>
</div>
<div class="proof" title="?">
<p>See Pete’s CA notes sections 18 and 14.</p>
</div>
<div class="remark">
<p>On why these should be true: we have a NTI square</p>
<p><p style="text-align:center;"> <img class="tikz" src="/home/zack/SparkleShare/github.com/Notes/Class_Notes/2020/Fall/Algebraic Curves/e7c74d9eba108e42314b1ae5553dd78b397445ce.svg"></p></p>
<p>We have a domain <span class="math inline">\(A\)</span> with a fraction field <span class="math inline">\(K\)</span>, we take a finite degree extension <span class="math inline">\(L/K\)</span>, and to complete the square we let <span class="math inline">\(B\)</span> be the integral closure of <span class="math inline">\(A\)</span> in <span class="math inline">\(L\)</span>: the collection of elements in <span class="math inline">\(L\)</span> satisfying monic polynomials with coefficients in <span class="math inline">\(A\)</span>.<br />
</p>
<p>In our case, we’re additionally assuming that <span class="math inline">\(A/k\)</span> is finitely generated as a <span class="math inline">\(k{\hbox{-}}\)</span>algebra.</p>
</div>
<div class="remark">
<p>On (b): <span class="math inline">\(B\)</span> being finitely generated as a <span class="math inline">\(k{\hbox{-}}\)</span>algebra follows from assuming <span class="math inline">\(A\)</span> is, and additionally that <span class="math inline">\(B\)</span> is finitely generated as an <span class="math inline">\(A{\hbox{-}}\)</span>module, and finite generation as a module provides finite generation as an algebra. The result follows from transitivity of finite generation of algebras.</p>
<p>On (c): This is just a property of integral extensions.</p>
<p>On (d): Use the characterization of being Noetherian, integrally closed, and Krull dimension 1. The only thing to check is that <span class="math inline">\(B\)</span> is Noetherian, which follows from <span class="math inline">\(B\)</span> being finitely generated as a <span class="math inline">\(k{\hbox{-}}\)</span>algebra and applying the Hilbert basis theorem.</p>
</div>
<div class="remark">
<p>Note that we are not assuming that <span class="math inline">\(L/K\)</span> is separable, which is an assumption that would simplify things. By the Krull-Akuzuki theorem, <span class="math inline">\(B\)</span> will always be a Dedekind domain, but it need not be finitely generated over <span class="math inline">\(A\)</span>. So the “stem” to <span class="math inline">\(k\)</span> is grounding the situation: it’s not just a Dedekind domain, but rather an <em>affine</em> domain: a domain that is finitely generated over a field. Note that this is much better than an arbitrary Dedekind domain!</p>
</div>
<h2 id="regularity-lemma">Regularity Lemma</h2>
<div class="proposition" title="Regularity Lemma" data-ref="lemma:regularity">
<p>Suppose that instead of <span class="math inline">\(K = \operatorname{ff}(A)\)</span>, we instead have <span class="math inline">\(A \subset K\)</span> an arbitrary subring, and <span class="math inline">\(L/K\)</span> a finite extension. Taking the integral closure <span class="math inline">\(B\)</span> yields another NTI square:</p>
<p><p style="text-align:center;"> <img class="tikz" src="/home/zack/SparkleShare/github.com/Notes/Class_Notes/2020/Fall/Algebraic Curves/d2cdc84982218fede9c2c4db57ba6d53fca21fc0.svg"></p></p>
<p>Suppose we have an upstairs valuation <span class="math inline">\(v\)</span> on <span class="math inline">\(L\)</span>. Then it makes sense to restrict valuations to subfields, so <span class="math display">\[\begin{align*}   v\in \Sigma(L/B) \iff {\left.{v}\right|_{K}} \in \Sigma(K/A) .\end{align*}\]</span> So the original valuation is <span class="math inline">\(B{\hbox{-}}\)</span>regular iff the restricted valuation is <span class="math inline">\(A{\hbox{-}}\)</span>regular.</p>
</div>
<div class="proof" title="?">
<p><span class="math inline">\(\impliedby\)</span>: Since <span class="math inline">\(A \subseteq B\)</span>, being <span class="math inline">\(B{\hbox{-}}\)</span>regular implies being <span class="math inline">\(A{\hbox{-}}\)</span>regular.<br />
</p>
<p><span class="math inline">\(\implies\)</span>: Suppose <span class="math inline">\(A \subset R_v\)</span> and <span class="math inline">\(x\in B\)</span>, and choose <span class="math inline">\(a_0, \cdots, a_{n-1} \in A\)</span> such that <span class="math display">\[\begin{align*}   p(x) \mathrel{\vcenter{:}}= x^n + a_{n-1}x^{n-1} + \cdots + a_1 x + a_0 = 0 .\end{align*}\]</span> We can do this precisely because <span class="math inline">\(B\)</span> is integral over <span class="math inline">\(A\)</span>. So we have an integral relation for <span class="math inline">\(x\)</span>, and we want to show <span class="math inline">\(v(x) &lt; 0\)</span> and derive some contradiction from the fact that <span class="math inline">\(v(a_i) \geq 0\)</span>. Note that we aren’t grounded to the base field here, so this valuation may not be discrete and is rather some arbitrary Krull valuation.<br />
</p>
<p>If <span class="math inline">\(x\not \in R_v\)</span>, then <span class="math inline">\(v(x) &lt; 0\)</span>, and we can thus write <span class="math display">\[\begin{align*}   v(x^n) &lt; \min \left\{{ v(a_j x^j) ~{\text{s.t.}}~0\leq j \leq n-1 }\right\} \leq v(p(x)) .\end{align*}\]</span> This follows because the first term is <span class="math inline">\(nv(x)\)</span>, and so the next term can only be <em>less</em> negative since <span class="math inline">\(v(a_j) &gt; 0\)</span>. But this is a contradiction, since we know <span class="math inline">\(v(x^n) = v(- \sum_{j=0}^{n-1} a_j x^j)\)</span>, and we’ve exhibited two elements that differ by a unit (<span class="math inline">\(u=-1\)</span>) which have different valuations.</p>
</div>
<p>Next, let <span class="math inline">\(K/k\)</span> be a one variable function, we want to give a nice description of its places. We already described the places of a <em>rational</em> function field, and we know we can write the former function fields as finite degree extensions of the latter. Choosing a transcendental <span class="math inline">\(t\in K\)</span>, to <span class="math inline">\(K/k(t)\)</span> is a finite extension, restricting evaluations gives a map <span class="math display">\[\begin{align*}   r: \Sigma(K/k) \to \Sigma(k(t)/ k) .\end{align*}\]</span></p>
<div class="claim">
<p>This is surjective with finite fibers, so it acts like a branched covering map.</p>
</div>
<p>This follows from NTI or NTII. The NTI method is taking an extension of Dedekind domains, taking a prime ideal downstairs, and pushing it forward to see how it factors upstairs. The NTII method is a field with a valuation and an extension of the field and you try to figure out how many ways the downstairs valuation can be extended. If the valuations are discrete, these are the same problem.</p>
<h2 id="an-inequality-on-degrees">An Inequality on Degrees</h2>
<div class="theorem" title="Degree Inequality (NTII, 1.3)">
<p>Let <span class="math inline">\(K\)</span> be a field with <span class="math inline">\(v\)</span> a rank one valuation with valuation ring <span class="math inline">\(R\)</span>. Let <span class="math inline">\(L/K\)</span> be a finite extension of degree <span class="math inline">\(n\)</span>. Then the set of valuations on <span class="math inline">\(L\)</span> extending <span class="math inline">\(v\)</span> is finite and nonempty, say <span class="math inline">\(\left\{{w_1, \cdots, w_g}\right\}\)</span>.</p>
<p>For <span class="math inline">\(1\leq i \leq g\)</span>, define <span class="math display">\[\begin{align*}   e_i(L/K) &amp;\mathrel{\vcenter{:}}={\left\lvert { w_j (L^{\times}) \over v(K^{\times}) } \right\rvert}  &amp;&amp; \text{ramification index} \\ f_i(L/K) &amp;\mathrel{\vcenter{:}}=[R_{w_i}/\mathfrak{m}_{w_i} : R_v/ \mathfrak{m}_v] &amp;&amp; \text{residual degree} ,\end{align*}\]</span> so <span class="math inline">\(e_i, f_i \in {\mathbb{Z}}{&gt;0}\)</span>. Then</p>
<ol type="a">
<li><p>We have a useful inequality: <span class="math display">\[\begin{align*}       \sum_{i=1}^g e_i(L/K) f_i(L/K) \leq [L: K] = n     .\end{align*}\]</span></p></li>
<li><p>If <span class="math inline">\(v\)</span> is discrete<a href="#fn29" class="footnote-ref" id="fnref29" role="doc-noteref"><sup>29</sup></a> and the integral closure <span class="math inline">\(S\)</span> of <span class="math inline">\(R\)</span> in <span class="math inline">\(L\)</span> is finitely generated as an <span class="math inline">\(R{\hbox{-}}\)</span>module, then this is an equality.</p></li>
</ol>
</div>
<div class="remark">
<p>Note that a valuation can be extended in at least one way over <em>any</em> field extension, finite or not. For finite extensions, there’s a more precise statement involving completing and taking a tensor product, then identifying number of valuations with the size of some <span class="math inline">\(\operatorname{mSpec}\)</span> over a finite-dimensional algebra over the field.</p>
<p>NTII shows that <span class="math inline">\(e_i\)</span> is a finite number by looking at the exponent of the pushforward. Also note that we view <span class="math inline">\(\mathfrak{m}_{w_i}\)</span> as an ideal lying over <span class="math inline">\(\mathfrak{m}_v\)</span>, and there is an inclusion of residue fields <span class="math inline">\(R_v/\mathfrak{m}_v \hookrightarrow R_{w_i} / \mathfrak{m}_{w_i}\)</span> which is in fact a finite degree field extension.</p>
</div>
<div class="remark">
<p>Part (a) already shows that <span class="math inline">\(r\)</span> is surjective with fibers of cardinality at most <span class="math inline">\([L: K]\)</span>, but we want equality. We claim is always holds when <span class="math inline">\(K/k\)</span> is a one variable function field and <span class="math inline">\(v\in \Sigma(K/k)\)</span>. There are examples where the inequality is strict, however. In our situation, it’s not just an arbitrary extension, we have the aforementioned affine “grounding” phenomenon, and all of these DVRs are going to be localizations of affine Dedekind domains. This is the key fact: arbitrary extensions of Dedekind domains are nowhere near as nice as those where the bottom one is finitely generated over a field.</p>
</div>
<div class="proof" title="First step">
<p>We have a discrete valuation <span class="math inline">\(v\)</span> on <span class="math inline">\(K\)</span>, so let <span class="math inline">\(t\)</span> be a uniformizing element<a href="#fn30" class="footnote-ref" id="fnref30" role="doc-noteref"><sup>30</sup></a> for <span class="math inline">\(v\)</span>. Then the argument is that any such uniformizer <span class="math inline">\(t\)</span> is transcendental over <span class="math inline">\(k\)</span>. We’ll do this by arguing <span class="math inline">\(t\not\in k\)</span> and then that <span class="math inline">\(t\)</span> is not algebraic over <span class="math inline">\(k\)</span> either.</p>
<p>Since we’re assuming <span class="math inline">\(v\)</span> is <span class="math inline">\(k{\hbox{-}}\)</span>regular, <span class="math inline">\(t\in k \implies 1/t\in k\)</span> and so <span class="math inline">\(v(1/t) \geq 0\)</span>, since every element in <span class="math inline">\(k\)</span> should have nonnegative valuation. But we’re supposed to have <span class="math inline">\(v(t) = 1\)</span> by definition of being a uniformizer, so <span class="math inline">\(t\)</span> can not be in <span class="math inline">\(k\)</span>.</p>
<p>Suppose that <span class="math inline">\(t\)</span> is algebraic over <span class="math inline">\(k\)</span>, then <span class="math inline">\(k(t)/k\)</span> is an integral extension, since we’re adjoining one algebraic element. By the previous proposition we have that <span class="math inline">\(v\)</span> is <span class="math inline">\(k(t){\hbox{-}}\)</span>regular, since being regular is preserved by integral extensions. But now rerunning the argument in the previous paragraph shows that this is a contradiction: being <span class="math inline">\(k(t){\hbox{-}}\)</span>regular would force <span class="math inline">\(v(1/t) \geq 0\)</span>, but we’d still need <span class="math inline">\(v(1/t) = -1\)</span>.</p>
<p>So <span class="math inline">\(t\)</span> is transcendental over <span class="math inline">\(k\)</span>, and <span class="math inline">\(k[t]\)</span> is a polynomial ring.</p>
</div>
<div class="proof" title="Second step">
<p>Let</p>
<ul>
<li><span class="math inline">\(A\)</span> be the integral closure of <span class="math inline">\(k[t]\)</span> in <span class="math inline">\(K\)</span>, and</li>
<li><span class="math inline">\(B\)</span> be the integral closure of <span class="math inline">\(k[t]\)</span> in <span class="math inline">\(L\)</span>.</li>
</ul>
<p>Instead of a NTI square, we’ll have the following 3-step diagram:</p>
<p><p style="text-align:center;"> <img class="tikz" src="/home/zack/SparkleShare/github.com/Notes/Class_Notes/2020/Fall/Algebraic Curves/eb7640e44e3614de92e5d7cbfec290d2145b78d4.svg"></p></p>
<p>So <span class="math inline">\(A\)</span> is a Dedekind domain with <span class="math inline">\(\operatorname{ff}(A) = K\)</span>, as is <span class="math inline">\(B\)</span> with <span class="math inline">\(\operatorname{ff}(B) = L\)</span>, making both <span class="math inline">\(A\)</span> and <span class="math inline">\(B\)</span> finitely generated <span class="math inline">\(k[t]{\hbox{-}}\)</span>modules. Why? This comes from the theorem of finiteness of integral closure when the downstairs domain is grounded to a field. Since <span class="math inline">\(k[t]\)</span> is finitely generated as a <span class="math inline">\(k{\hbox{-}}\)</span>algebra, this finiteness applies, which tells us that <span class="math inline">\(A\)</span> finitely generated as a <span class="math inline">\(k[t]{\hbox{-}}\)</span>module, as is <span class="math inline">\(B\)</span>. But if <span class="math inline">\(B\)</span> is finitely generated as a <span class="math inline">\(k[t]{\hbox{-}}\)</span>module and <span class="math inline">\(A\supseteq k[t]\)</span> is an even larger ring, then <span class="math inline">\(B\)</span> is finitely generated as an <span class="math inline">\(A{\hbox{-}}\)</span>module (potentially with fewer generators).</p>
<p>Thus <span class="math inline">\(B\)</span> is a finitely generated <span class="math inline">\(A{\hbox{-}}\)</span>module, and <span class="math inline">\(v\)</span> is <span class="math inline">\(k[t]{\hbox{-}}\)</span>regular since <span class="math inline">\(t\)</span> was a uniformizing element, making <span class="math inline">\(v\)</span> regular on both <span class="math inline">\(k\)</span> and <span class="math inline">\(t\)</span> and thus <span class="math inline">\(k[t]\)</span>. Then <span class="math inline">\(v\)</span> is also <span class="math inline">\(A{\hbox{-}}\)</span>regular by the proposition, and thus <span class="math inline">\(v = v_{\mathfrak{p}}\)</span> for some <span class="math inline">\(\mathfrak{p}\in \operatorname{mSpec}(A)\)</span> coming from our classification of <span class="math inline">\(A{\hbox{-}}\)</span>regular valuations on a Dedekind domain.</p>
<p>So the valuation on <span class="math inline">\(K\)</span> is just the <span class="math inline">\(\mathfrak{p}{\hbox{-}}\)</span>adic valuation on this Dedekind domain. This means there is an equality of valuation rings <span class="math inline">\(R = A_{\mathfrak{p}}\)</span><a href="#fn31" class="footnote-ref" id="fnref31" role="doc-noteref"><sup>31</sup></a>, the valuation ring of the Dedekind domain. So we now consider <span class="math inline">\(S\)</span>, the integral closure of <span class="math inline">\(R\)</span> in <span class="math inline">\(L\)</span>. This is a NTI situation, but the downstairs Dedekind domain is a DVR, so it’s local downstairs. We thus have compatibility between integral closure and localization in the form of <span class="math inline">\(S = B_{\mathfrak{p}} = B \otimes_A A_{\mathfrak{p}}\)</span>. This comes from taking the whole integral closure <span class="math inline">\(B\)</span>, and only looking at the primes lying over <span class="math inline">\(\mathfrak{p}\)</span>. Base change preserves finite generation, and we know that <span class="math inline">\(B\)</span> was finitely generated as an <span class="math inline">\(A{\hbox{-}}\)</span>module, so <span class="math inline">\(S\)</span> is finitely generated as an <span class="math inline">\(A_{\mathfrak{p}}{\hbox{-}}\)</span>module and equality holds.</p>
</div>
<div class="remark">
<p>If <span class="math inline">\(A_{\mathfrak{p}}\)</span> was a <em>complete</em> DVR, as opposed to just some localization of an affine domain, <span class="math inline">\(B\)</span> will be a semilocal Dedekind domain and thus a PID, and again the number of primes it has will be the number of primes in the original Dedekind domain lying over the fixed prime <span class="math inline">\(\mathfrak{p}\)</span>.</p>
</div>
<div class="remark">
<p>We’re not really using valuation theory here, and this could have been phrased purely in NTI language. But even then, the degree inequality for extensions of Dedekind domains needs finite generated of the Dedekind domain as a module over the bottom Dedekind domain to ensure equality. You’d need a suitably algebraic text that considers not necessarily separable <span class="math inline">\(L/K\)</span>, and you really do want finite generation of <span class="math inline">\(B\)</span> over <span class="math inline">\(A\)</span> to make this work. See Dino Lorenzini’s textbook!</p>
</div>
<div class="exercise" title="?">
<p>Let <span class="math inline">\(K/k\)</span> be a one variable function field, and show that the cardinality of the set of points is given by <span class="math display">\[\begin{align*}   {\left\lvert {\Sigma (K/k)} \right\rvert} = {\left\lvert {\left\{{ \text{monic irreducible polynomials } p \in k[t] }\right\}} \right\rvert}  = \max( {\left\lvert {k} \right\rvert}, \aleph_0 ) .\end{align*}\]</span></p>
</div>
<div class="remark">
<p>If you know that <span class="math inline">\(r\)</span> is surjective with finite fibers, where the image is infinite (which it is here), the domain should be infinite of the same cardinality by an easy set-theoretic exercise. Note that using Möbius inversion, over a finite field there is at least one irreducible polynomial of every degree, and finitely many of a fixed degree. So the cardinality is <span class="math inline">\(\aleph_0\)</span> when <span class="math inline">\(k\)</span> is a finite field. If we took a one variable function field over <span class="math inline">\({\mathbb{C}}\)</span>, we would get the cardinality of the continuum. In this case, <span class="math inline">\(\Sigma(K/k)\)</span> really is the set of points on some compact Riemann surface, although the Zariski topology will be too coarse to coincide with the induced Euclidean topology.</p>
</div>
<div class="remark">
<p>Note that affine Dedekind domains are important for us because every finitely generated field extension of <span class="math inline">\(k\)</span> are precisely the fraction fields of affine domains over <span class="math inline">\(k\)</span>, where the transcendence degree of the function field equals the Krull dimension of the affine domain. We’re especially interested in affine domains of dimension 1 over <span class="math inline">\(k\)</span>. We established something particularly important in this proof:</p>
</div>
<h2 id="affine-grounding-and-residue-fields">Affine Grounding and Residue Fields</h2>
<div class="lemma" title="Affine Grounding">
<p>Let <span class="math inline">\(K/k\)</span> be a one variable function field and <span class="math inline">\(v\in \Sigma(K/k)\)</span> be a place on that function field. Then there exists an affine Dedekind domain <span class="math inline">\(A\)</span> with <span class="math inline">\(\operatorname{ff}(A) = K\)</span> and a maximal ideal <span class="math inline">\(\mathfrak{p}\in \operatorname{mSpec}(A)\)</span> such that <span class="math inline">\(R_v = A_{\mathfrak{p}}\)</span>.</p>
</div>
<p>Thus we should think of the set of places as the <span class="math inline">\(\operatorname{mSpec}\)</span> of finitely many affine Dedekind domains glued together. For each point (place), the basic open set around that point is the affine Dedekind domain.</p>
<div class="corollary" title="?">
<p>For <span class="math inline">\(v \in \Sigma(K/k)\)</span>, define the <strong>residue field</strong> of the local ring <span class="math inline">\(R_v\)</span> as <span class="math inline">\(k(v) \mathrel{\vcenter{:}}= R_v / \mathfrak{m}_v\)</span>. Then <span class="math inline">\(k(v)/ k\)</span> is a finite degree extension.</p>
</div>
<div class="proof" title="of corollary">
<p>If <span class="math inline">\(R\)</span> is a domain with maximal ideal <span class="math inline">\(\mathfrak{p}\)</span>, then the quotient map factors through the localization, giving <span class="math inline">\(R/\mathfrak{p} = R_{\mathfrak{p}} / \mathfrak{p} R_{\mathfrak{p}}\)</span>:<a href="#fn32" class="footnote-ref" id="fnref32" role="doc-noteref"><sup>32</sup></a></p>
<p><p style="text-align:center;"> <img class="tikz" src="/home/zack/SparkleShare/github.com/Notes/Class_Notes/2020/Fall/Algebraic Curves/1132b26b79ce72bbc471246fa5272d91e800247a.svg"></p></p>
<p>So by affine grounding, <span class="math inline">\(k(v)\)</span> is also <span class="math inline">\(A/\mathfrak{p}\)</span> where <span class="math inline">\(A\)</span> is an affine Dedekind domain and <span class="math inline">\(\mathfrak{p}\in \operatorname{mSpec}(A)\)</span>. This is Zariski’s lemma<a href="#fn33" class="footnote-ref" id="fnref33" role="doc-noteref"><sup>33</sup></a> : we showed that <span class="math inline">\(k(v) \cong A/\mathfrak{p}\)</span>, where <span class="math inline">\(A\)</span> is a finitely generated algebra and thus so are its quotients. Thus <span class="math inline">\(k(v)\)</span> is not just finitely generated as a field extension, but also as a <span class="math inline">\(k{\hbox{-}}\)</span>algebra, making <span class="math inline">\(k(v)/k\)</span> a finite extension.</p>
</div>
<div class="definition" title="Degree of a Place">
<p>The <strong>degree</strong> of <span class="math inline">\(v\in \Sigma(K/k)\)</span> is <span class="math inline">\([k(v) : k] \in {\mathbb{Z}}^{\geq 0}\)</span>.</p>
</div>
<p>We are especially interested in degree 1 places, i.e. those for which the residue field is equal to <span class="math inline">\(k\)</span> itself, so we denote these by <span class="math inline">\(\Sigma_1(K/k)\)</span>. In any other course, we’d call this <span class="math inline">\(C(k)\)</span>, the rational points on the associated curve.</p>
<div class="exercise" title="Some motivation">
<p>Let <span class="math inline">\(f\in k[x, y]\)</span> be irreducible, so that <span class="math inline">\(A \mathrel{\vcenter{:}}= k[x, y] / \left\langle{f}\right\rangle\)</span> is a 1-dimensional affine domain<a href="#fn34" class="footnote-ref" id="fnref34" role="doc-noteref"><sup>34</sup></a>. As above, the resude fields of maximal ideals are finite extensions of <span class="math inline">\(k\)</span>. Show that there is a correspondence <span class="math display">\[\begin{align*}   \left\{{\substack{\text{ Maximal ideals } \\ \mathfrak{p} \in \operatorname{mSpec}(A)}}\right\} &amp;\iff \left\{{\substack{(x, y) \in k\times k ~{\text{s.t.}}~f(x, y) = 0}}\right\} .\end{align*}\]</span></p>
</div>
<div class="remark">
<p>Note that the polynomial above may not define a smooth geometry, there may instead be singular points:</p>
<figure>
<img src="figures/image_2020-11-27-21-49-40.png" alt="Image" /><figcaption aria-hidden="true">Image</figcaption>
</figure>
<p>These singular points are what stops <span class="math inline">\(A\)</span> from being integrally closed, which is literally true when <span class="math inline">\(k\)</span> is a perfect field.</p>
</div>
<p>Whereas <span class="math inline">\(\Sigma(K/k)\)</span> is always infinite, <span class="math inline">\(\Sigma_1(K/k)\)</span> may be finite or even empty. When <span class="math inline">\(k = {\mathbb{Q}}\)</span>, it may in fact be empty “most of the time” When <span class="math inline">\(k = {\mathbb{Q}}\)</span>, it may in fact be empty “most of the time”.</p>
<div class="exercise" title="?">
<p>For all <span class="math inline">\(v\in \Sigma(K/k)\)</span>, the degree of the point <span class="math inline">\(\deg(v)\)</span> will be divisible by <span class="math inline">\([\kappa(K) : k]\)</span>. Thus if <span class="math inline">\(\kappa(L) \supsetneq k\)</span>, then <span class="math inline">\(\Sigma_1(K/k) = \emptyset\)</span>.<a href="#fn35" class="footnote-ref" id="fnref35" role="doc-noteref"><sup>35</sup></a></p>
</div>
<p>Note that before we were writing the residue field as an extension of <span class="math inline">\(k\)</span>, and it’s worth checking that the constant subfield embeds as a subfield of the residue field as well.</p>
<div class="remark">
<p>There is a tie to CM points on modular curves: if you have a function field over <span class="math inline">\({\mathbb{Q}}\)</span> which is not regular due to some proper algebraic subextension, the residue fields of all of the points on the curve will contain the algebraic closure of the field of definition. Pete had some <span class="math inline">\({\mathbb{Q}}(X_n)\)</span> function field, whose constant subfield was <span class="math inline">\({\mathbb{Q}}(\zeta_n)\)</span> (adjoining the <span class="math inline">\(n\)</span>th roots of unity), and none of these modular curves over <span class="math inline">\({\mathbb{Q}}\)</span> have closed points except when the residue fields contain <span class="math inline">\({\mathbb{Q}}(\zeta_n)\)</span>.</p>
</div>
<div class="remark">
<p>This is a way for there to not be points on the curve, so <span class="math inline">\(\Sigma_1(K/k)\)</span> is empty, but it’s not the deepest reason – this is a cheap trick to produce “pointless” function fields. It can fail to have degree 1 places in many different ways!</p>
</div>
<div class="exercise" title="?">
<p>Show that for for a one variable function field <span class="math inline">\(K/k\)</span> TFAE:</p>
<ol type="1">
<li><p>Every <span class="math inline">\(v\in \Sigma(K/k)\)</span> has degree 1,</p></li>
<li><p><span class="math inline">\(k\)</span> is algebraically closed.</p></li>
</ol>
</div>
<div class="remark">
<p>One half is easy, since by definition the degree of the residue field is the degree of some finite extension of the base field, but if <span class="math inline">\(k\)</span> is algebraically closed, the degree of any finite extension is one.</p>
</div>
<div class="exercise" title="?">
<p>For a field <span class="math inline">\(k\)</span>, set <span class="math inline">\({\mathbb{P}}^1(k) \mathrel{\vcenter{:}}={\mathbb{P}}(k^2)\)</span>, the projectivization of <span class="math inline">\(k\times k\)</span>, i.e. the lines through the origin in <span class="math inline">\({\mathbb{A}}^2/k\)</span>. By taking slopes of lines, <span class="math inline">\({\mathbb{P}}^1(k) = k {\coprod}\left\{{\infty}\right\}\)</span>.</p>
<figure>
<img src="figures/image_2020-11-27-23-57-12.png" width="350" alt="Image" /><figcaption aria-hidden="true">Image</figcaption>
</figure>
<p>Show that <span class="math inline">\(\Sigma_1(k(t)/k) = {\mathbb{P}}^1(k)\)</span>, and deduce that <span class="math display">\[\begin{align*}   \Sigma(k(t)/k) = {\mathbb{P}}^1(k) \iff k = \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu .\end{align*}\]</span></p>
</div>
<p>Next up we’ll talk about how the set of places is built from affine Dedekind domains. After this, we’ll be ready for chapter 2: divisors and Riemann-Roch.</p>
<h1 id="lecture-6-affine-domains-and-places-sigmakk">Lecture 6: Affine Domains and Places <span class="math inline">\(\Sigma(K/k)\)</span></h1>
<p>The aim of this lecture is to explain the difference (including some technicalities) between <span class="math inline">\(\Sigma(K/k)\)</span> and affine Dedekind domains <span class="math inline">\(R\)</span> such that <span class="math inline">\(K = \operatorname{ff}(R)\)</span>.</p>
<p>Recall that</p>
<ul>
<li><p>An <strong>affine domain</strong> over a field <span class="math inline">\(k\)</span> is a domain that is finitely generated as a <span class="math inline">\(k{\hbox{-}}\)</span>algebra,<a href="#fn36" class="footnote-ref" id="fnref36" role="doc-noteref"><sup>36</sup></a></p></li>
<li><p>An <strong>affine Dedekind domain</strong> is an affine domain that is also a Dedekind domain, so it is integrally closed and of Krull dimension 1,</p></li>
<li><p>An <strong>affine <span class="math inline">\(k{\hbox{-}}\)</span>order</strong> is a one-dimensional affine domain.<a href="#fn37" class="footnote-ref" id="fnref37" role="doc-noteref"><sup>37</sup></a></p></li>
</ul>
<div class="example" title="?">
<p>If <span class="math inline">\(f \in k[x, y]\)</span> is irreducible, then <span class="math inline">\(k[x, y]/\left\langle{f}\right\rangle\)</span> is an affine <span class="math inline">\(k{\hbox{-}}\)</span>order. It is an affine Dedekind domain if <span class="math inline">\(f\)</span> is <em>nonsingular</em> over <span class="math inline">\(k\)</span>, i.e. for all <span class="math inline">\(a, b\in \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span> such that <span class="math inline">\(f(a, b) = 0\)</span>, the usual partial derivatives in the sense of Calculus <span class="math inline">\({\frac{\partial f}{\partial x}\,}\)</span> and <span class="math inline">\({\frac{\partial f}{\partial y}\,}\)</span> do not simultaneously vanish at <span class="math inline">\((a, b)\)</span>. This is a sufficient condition, although it’s not far from being necessary as well.</p>
</div>
<div class="remark">
<p>Let <span class="math inline">\(A/k\)</span> be an affine Dedekind domain such that <span class="math inline">\(\operatorname{ff}(A) = K\)</span>. Then <span class="math inline">\(\operatorname{mSpec}(A) = \Sigma(K/A) \hookrightarrow\Sigma(K/k)\)</span>. This follows because <span class="math inline">\(\Sigma(K/A)\)</span> are the valuations that are not just regular on <span class="math inline">\(k\)</span>, but also on <span class="math inline">\(A\)</span>, (i.e. <span class="math inline">\(A{\hbox{-}}\)</span>regular valuations) so the valuation ring contains the entirety of <span class="math inline">\(A\)</span>. It’s thus natural to ask what its complement is, i.e. those valuations which are not regular on <span class="math inline">\(A\)</span> and give its elements negative valuation. So define <span class="math display">\[\begin{align*}   \Sigma(A, \infty) \mathrel{\vcenter{:}}=\Sigma(K/k) \setminus\Sigma(K/A) ,\end{align*}\]</span> the set of places at infinity with respect to <span class="math inline">\(A\)</span>.</p>
</div>
<div class="example" title="?">
<p><span class="math inline">\(\Sigma(k[t], \infty) = \left\{{v_ \infty}\right\}\)</span>, which is the infinite place, so the terminology at least matches up!</p>
</div>
<div class="proposition" title="Key">
<p>For any affine Dedekind domain <span class="math inline">\(A\)</span>, <span class="math inline">\(\Sigma(A, \infty)\)</span> is finite and nonempty.</p>
</div>
<div class="remark">
<p>This is striking! This says that one affine Dedekind domain is giving almost all of this infinite set of places, but never all of it.</p>
</div>
<div class="proof" title="?">
<p>By Noether Normalization<a href="#fn38" class="footnote-ref" id="fnref38" role="doc-noteref"><sup>38</sup></a></p>
<p>there exists a <span class="math inline">\(t\in A\)</span> that that <span class="math inline">\(A\)</span> is a finitely generated (and thus integral) <span class="math inline">\(k[t]{\hbox{-}}\)</span>module, and <span class="math inline">\(A\)</span> is the integral closure of <span class="math inline">\(k[t]\)</span> in <span class="math inline">\(K\)</span>. Why must this be the integral closure? Any ring finitely generated over a subring will be an integral extension, and <span class="math inline">\(A\)</span> is a Dedekind domain and thus integrally closed. So let <span class="math display">\[\begin{align*}   r: \Sigma(K/k) \to \Sigma(k(t)/k) \end{align*}\]</span> denote the restriction map; then by the regularity property we established in , we have <span class="math display">\[\begin{align*}   \Sigma(K/A) = r^{-1}\qty{\Sigma(k(t)/k[t])} .\end{align*}\]</span> Why? A valuation upstairs in the NTI square is regular with respect to the integral extension upstairs iff it’s regular with respect to the ring it is the integral extension <em>of</em>. So regularity is preserved both ways by integral extensions. This means you can check regularity either upstairs or downstairs, allowing us to identify the above preimage.</p>
<p>This means that the places where are <em>not</em> <span class="math inline">\(A{\hbox{-}}\)</span>regular upstairs are precisely those which are not <span class="math inline">\(k[t]{\hbox{-}}\)</span>regular downstairs, and so we have <span class="math display">\[\begin{align*}   \Sigma(A, \infty) = r^{-1}\qty{\Sigma(k[t], \infty)} = r^{-1}(v_ \infty) ,\end{align*}\]</span> since we now there is exactly one such non-regular valuation. But we showed that <span class="math inline">\(r\)</span> was surjective with finite nonempty fibers, so we’re done since our set is one of the fibers.</p>
</div>
<div class="remark">
<p>Thus is <span class="math inline">\(K/k\)</span> is a one variable function field and <span class="math inline">\(A\)</span> is an affine Dedekind domain with fraction field <span class="math inline">\(K\)</span>, then <span class="math inline">\(\Sigma(K/k) = \operatorname{mSpec}(A) {\coprod}S\)</span> where <span class="math inline">\(S\)</span> is finite and nonempty. Earlier we saw by affine grounding that for each <span class="math inline">\(v\in \Sigma(K/k)\)</span> there exists an affine Dedekind domain <span class="math inline">\(A\)</span> with <span class="math inline">\(v\in \Sigma(K/A)\)</span>, and thus <span class="math inline">\(\Sigma(K/k)\)</span> admits a <em>finite</em> covering by <span class="math inline">\(\operatorname{mSpec}\)</span> of affine Dedekind domains. The picture of what’s happening is that we have <span class="math inline">\(\Sigma(K/k)\)</span> which is quasicompact with respect to the Zariski topology, which contains many <span class="math inline">\(\operatorname{mSpec}\)</span>, at least one of which contains <span class="math inline">\(v\)</span>. Note that these <span class="math inline">\(\operatorname{mSpec}(A_j)\)</span> for affine Dedekind domains <span class="math inline">\(A_j\)</span> is literally an open cover in this topology. But the open sets are so large that they all have finite complement. However, this means that instead of just an arbitrary open covering, one can choose a finite open covering: one <span class="math inline">\(\operatorname{mSpec}(A_j)\)</span> will cover all but finitely many, and we can always find at least one <span class="math inline">\(\operatorname{mSpec}(A_{j&#39;})\)</span> covering all of the remaining points.</p>
<figure>
<img src="figures/image_2020-12-01-01-43-43.png" alt="Image" /><figcaption aria-hidden="true">Image</figcaption>
</figure>
<p>It will in fact turn out that we only need <strong>two</strong> domains to cover everything.</p>
</div>
<div class="definition" title="Holomorphy Rings">
<p>For a set <span class="math inline">\(S \subseteq \Sigma(K/k)\)</span>, define the <strong>holomorphy</strong> ring as <span class="math display">\[\begin{align*}   R^s \mathrel{\vcenter{:}}=\bigcap_{v\in \Sigma(K/k)\setminus S} R_v .\end{align*}\]</span></p>
</div>
<div class="remark">
<p>This is the intersection of a bunch of valuation rings, so this contains elements that are simultaneously regular for this subset of valuations. If <span class="math inline">\(S \subseteq S&#39;\)</span>, then <span class="math inline">\(R^S \subseteq R^{S&#39;}\)</span>, due to the fact that we’re taking complements and <span class="math inline">\(\Sigma(K/k) \setminus S \supset \Sigma(K/k)\setminus S&#39;\)</span>, so we’re removing bigger sets and thus intersecting over fewer things. This can be thought of as relaxing some regularity conditions.</p>
</div>
<div class="remark">
<p>How to think about holomorphy rings: if you take <span class="math inline">\(S = \emptyset\)</span>, you intersect over all <span class="math inline">\(R_v\)</span> and obtain <span class="math inline">\(R^\emptyset = \kappa(k)\)</span>. You get a field that is algebraic over <span class="math inline">\(k\)</span>, so it’s very small compared to the other types of field extensions that arise. We’ll see that this is “unrepresentably” small.</p>
</div>
<div class="exercise" title="Every affine Dedekind domain is a unique holomorphy ring">
<p>If <span class="math inline">\(A\)</span> is an affine Dedekind domain with fraction field <span class="math inline">\(k\)</span>, then <span class="math display">\[\begin{align*}   A = R^S  = \bigcap_{v\in \operatorname{mSpec}(A)} R_v &amp;&amp; S = \Sigma(K/k) \setminus\operatorname{mSpec}(A) .\end{align*}\]</span></p>
</div>
<div class="remark">
<p>This is a fact for any Dedekind domain, which is the intersection over all of its DVRs. You obtain the integral closure for a Dedekind domain by intersecting all of the valuation rings, but here it is already integrally closed. Its tautological that <span class="math inline">\(A \subset R^S\)</span> here, so <span class="math inline">\(R^S\)</span> is an <em>overring</em> of a Dedekind domain: for <span class="math inline">\(R\)</span> a domain, an <strong>overring</strong> is any ring <span class="math inline">\(T\)</span> such that <span class="math inline">\(R \subseteq T \subseteq \operatorname{ff}(R)\)</span>. When <span class="math inline">\(R\)</span> is a PID, the overrings are in bijective correspondence with subsets of prime ideals (prime elements mod associates), so you get all overrings by inverting such subsets. For Dedekind domains it’s more complicated. Can we classify all overrings of <span class="math inline">\(R\)</span> when it is a Dedekind domain? The answer will eventually be yes. Under what condition is every overring a localization? When the class group is torsion. What are the relationships between the class groups of the ring <span class="math inline">\(R\)</span> and its overrings <span class="math inline">\(\widehat{R}\)</span>? It turns out that <span class="math inline">\(\operatorname{cl}(\widehat{R})\)</span> is a quotient of <span class="math inline">\(\operatorname{cl}(R)\)</span>. We will show that all such overrings are of the form <span class="math inline">\(R^W\)</span> for some <span class="math inline">\(W\)</span>, i.e. they’re obtained by intersecting some subset of the localizations of <span class="math inline">\(R\)</span> at its maximal ideals.</p>
<p>Note that the holomorphy ring in the exercise is obtained from a finite set of places. Conversely, given any finite nonempty set of places, then the holomorphy of ring of all of the elements of <span class="math inline">\(K\)</span> that are regular with respect to all but this finite number of valuations will always be an affine Dedekind domain with fraction field <span class="math inline">\(K\)</span>.</p>
</div>
<h2 id="holomorphy-rings-are-affine-dedekind-domains-with-fraction-field-k">Holomorphy Rings are Affine Dedekind Domains with Fraction Field <span class="math inline">\(K\)</span></h2>
<p>Next up is the main theorem of this lecture.</p>
<div class="theorem" title="Holomorphy rings on subsets are synonymous with affine Dedekind domains with fraction field $K$" data-ref="thm:main_lec_6">
<p>Let <span class="math inline">\(K/k\)</span> be a one variable function field and <span class="math inline">\(S \subset \Sigma(K/k)\)</span> finite and nonempty. Then <span class="math inline">\(R^S\)</span> is an affine Dedekind domain with <span class="math inline">\(\operatorname{ff}(R^S) = K\)</span> and <span class="math inline">\(\operatorname{mSpec}(R^S) = \Sigma(K/k)\setminus S\)</span>.</p>
</div>
<div class="exercise" title="?">
<p>If <span class="math inline">\(S \subset \Sigma(K/k)\)</span> is infinite, then <span class="math inline">\(R^S\)</span> is Dedekind with fraction field <span class="math inline">\(K\)</span> but is <em>not</em> finitely generated as a <span class="math inline">\(k{\hbox{-}}\)</span>algebra.</p>
</div>
<div class="remark">
<p>So what happens when you allow elements to fail regularity at an infinite set of places instead of just a finite set? From the theory of Dedekind domains, this will again be a Dedekind domain, but will be more exotic than an affine Dedekind domain. What if it were finitely generated as a <span class="math inline">\(k{\hbox{-}}\)</span>algebra? Then it would be an affine Dedekind domain, and we have a good understanding of <span class="math inline">\(\operatorname{mSpec}\)</span> of these types of rings, and it would have to be a holomorphy ring with respect to some finite set. Note that holomorphy rings for different subsets are distinct.</p>
</div>
<div class="remark">
<p>We have an interesting class of rings: Dedekind domain which are holomorphy rings with respect to an infinite set of places. What are they good for? They’re used in Pete’s paper “Elliptic Dedekind domains revisited” to give a new proof of a theorem of Clayborne (60s, at least the third proof) that every commutative group is the ideal class group of some <span class="math inline">\(R^S\)</span>.  The Dedekind domain used was a holomorphy ring <span class="math inline">\(R^S\)</span> with respect to some infinite set <span class="math inline">\(S\)</span>. He starts out with an elliptic function field <span class="math inline">\(K\)</span> (so of genus 1 with a degree 1 place), and taking the standard affine coordinate ring of the curve is <span class="math inline">\(R^S\)</span> for <span class="math inline">\(S\)</span> the single degree 1 place. This is particularly nice, since its class group is canonically isomorphic to <span class="math inline">\(C(k)\)</span>, the <span class="math inline">\(k{\hbox{-}}\)</span>rational points of the elliptic curve. When you pass from a Dedekind domain to an overring you get some quotient of the class group. Note that there are three degrees of freedom here: you get to pick <span class="math inline">\(k\)</span> to be any field, then <span class="math inline">\(K/k\)</span> some function field, and then <span class="math inline">\(S\)</span>. For this paper, <span class="math inline">\(k\)</span> was already some weird transfinitely iterated field. The upshot here is that not only is every commutative group isomorphic to <span class="math inline">\(\operatorname{cl}(T)\)</span> for <span class="math inline">\(T\)</span> <em>some</em> Dedekind domain, <span class="math inline">\(T\)</span> is in particular a holomorphy ring of the form <span class="math inline">\(R^S\)</span>. This is pretty useful, but not nearly as much as <span class="math inline">\(R^S\)</span> for <span class="math inline">\(S\)</span> a finite set of places.</p>
</div>
<div class="definition" title="Poles and Zeros">
<p>Let <span class="math inline">\(f\in K^{\times}\)</span>, then a place <span class="math inline">\(v\in \Sigma(K/k)\)</span> is a <strong>pole</strong> of <span class="math inline">\(f\)</span> iff <span class="math inline">\(f\not\in R_v\)</span>, and <span class="math inline">\(v\)</span> is a <strong>zero</strong> of <span class="math inline">\(f\)</span> iff <span class="math inline">\(f\in \mathfrak{m}_v\)</span>.</p>
</div>
<div class="lemma" title="The divisor of a rational function is well-defined." data-ref="lem:poles_and_zeros">
<p>Let <span class="math inline">\(f\in K^{\times}\)</span> be nonzero, then <span class="math display">\[\begin{align*}   {\left\lvert {\left\{{v\in \Sigma(K/k) ~{\text{s.t.}}~f\not\in R_vS}\right\}} \right\rvert} &amp;&lt; \infty  &amp;&amp; \text{(finite poles)}\\ {\left\lvert {\left\{{v\in \Sigma(K/k) ~{\text{s.t.}}~f\in \mathfrak{m}_v S}\right\}} \right\rvert} &amp;&lt; \infty &amp;&amp; \text{(finite zeros)} .\end{align*}\]</span></p>
<p>So <span class="math inline">\(f\)</span> is not regular at only a finite set of places, as as the set of points such that “<span class="math inline">\(f(p) = 0\)</span>”, i.e. <span class="math inline">\(f\)</span> is in the maximal ideal which makes it zero in the residue field.</p>
</div>
<div class="remark">
<p>Thinking of <span class="math inline">\(f\)</span> as a rational function, this says that the sets of points which are poles or zeros are both finite.</p>
</div>
<div class="proof" title="of first statement">
<p>If <span class="math inline">\(f \in \kappa(K)\)</span>, then both sets are empty, so assume otherwise that <span class="math inline">\(f\)</span> is transcendental. This is because if <span class="math inline">\(f\)</span> is a nonzero constant function, i.e. it is algebraic over <span class="math inline">\(k\)</span>, and both <span class="math inline">\(f, f^{-1}\)</span> lie in all of the valuation rings and none of the maximal ideals. Then the integral closure <span class="math inline">\(A\)</span> of <span class="math inline">\(k[f]\)</span> in <span class="math inline">\(K\)</span> is an affine Dedekind domain containing <span class="math inline">\(f\)</span>.<a href="#fn39" class="footnote-ref" id="fnref39" role="doc-noteref"><sup>39</sup></a> But we’re done: for all <span class="math inline">\(v\in \Sigma(K/A)\)</span>, we have <span class="math inline">\(f\in R_v\)</span> and thus <span class="math display">\[\begin{align*}   \Sigma(A, \infty) = \Sigma(K/k) \setminus\Sigma(K/A) ,\end{align*}\]</span> which is finite by affine grounding. This is because <span class="math inline">\(\Sigma(K/A)\)</span> already has finite complement, so all but finitely many valuations are <span class="math inline">\(A{\hbox{-}}\)</span>regular, and <span class="math inline">\(f\in A\)</span>. Conversely, if <span class="math inline">\(f\)</span> is nonconstant it can not be regular at all places since it would then lie <span class="math inline">\(\kappa(K)\)</span>.</p>
</div>
<div class="proof" title="of second statement">
<p>Note that <span class="math inline">\(f\in \mathfrak{m}_v \iff v_p(f) &gt; 0 \iff v_p(1/f) &lt; 0 \iff 1/f\not\in R_v\)</span>, so we can just apply the first statement to <span class="math inline">\(1/f\)</span>.</p>
</div>
<div class="exercise" title="Function fields are always covered by $\mspec$ of two affine Dedekind domains (too easy!)">
<p>Show that there exist <span class="math inline">\(A_1, A_2\)</span> affine Dedekind domain such that <span class="math display">\[\begin{align*}   \Sigma(K/k) = \Sigma(K/A_1) \cup\Sigma(K/A_2) .\end{align*}\]</span></p>
</div>
<div class="remark">
<p>This will follow from a theorem we haven’t proved yet. If we think of <span class="math inline">\(\Sigma(K/k)\)</span> as a compact Riemann surface, the theorem is saying that pulling out a single point (or any finite number) then what’s left is <span class="math inline">\(\operatorname{mSpec}(A)\)</span> for <span class="math inline">\(A\)</span> an affine Dedekind domain. So just pull out two different points.</p>
</div>
<div class="remark">
<p>The lemma is allowing us to define the divisor of a rational function. We’ll define <span class="math inline">\(\operatorname{Div}K\)</span> as the free <span class="math inline">\({\mathbb{Z}}{\hbox{-}}\)</span>module with bases <span class="math inline">\(\Sigma(K/k)\)</span>. Any divisor will be of the form <span class="math display">\[\begin{align*}   D = \sum_{p\in \Sigma(K/k)} n_p [p] ,\end{align*}\]</span> where all but finitely many of the <span class="math inline">\(n_p\)</span> are zero. If we have a rational function <span class="math inline">\(f\in K^{\times}\)</span>, we’ll define <span class="math display">\[\begin{align*}   \operatorname{Div}f = \sum_{p\in \Sigma(K/k)} v_p(f) [p] .\end{align*}\]</span> How do we know this is well-defined? We need <span class="math inline">\(v_p(f) = 0\)</span> for all but finitely many places <span class="math inline">\(p\)</span>. But <span class="math inline">\(v_p(f) &gt; 0 \implies f \not \in \mathfrak{m}_p\)</span>, and one part of the lemma said <span class="math inline">\(f\)</span> can only lie in finitely many <span class="math inline">\(\mathfrak{m}_p\)</span>. On the other hand, <span class="math inline">\(v_p(f)\)</span> can’t be negative, since this would imply <span class="math inline">\(f\not\in R_v\)</span>.</p>
<p>This is extremely important: the map that sends a rational function to its divisor is multiplicative and additive, so this yields a subgroup of <span class="math inline">\(\operatorname{Div}K\)</span> called the <strong>principal divisors</strong>. The quotient is the <strong>class group</strong> of <span class="math inline">\(K\)</span>, and now we are cooking with gas (as Pete’s undergraduate instructor used to say).</p>
</div>
<div class="theorem" title="Strong Approximation">
<p>Let <span class="math inline">\(X \subsetneq \Sigma(K/k)\)</span> be proper and let <span class="math inline">\(p_1, \cdots, p_r\in X\)</span>. Let <span class="math inline">\(\left\{{x_j}\right\}_{j=1}^r \subset K\)</span> and <span class="math inline">\(\left\{{n_j}\right\}_{j=1}^r \subset {\mathbb{Z}}\)</span>. Then there exists a single <span class="math inline">\(x\in K\)</span> such that <span class="math display">\[\begin{align*}   \forall 1\leq j \leq r,\, v_{p_j} (x-x_j) &amp;= n_j \\ \forall p\in X\setminus\left\{{p_j}\right\}_{j=1}^r,\, v_p(x) &amp;\geq 0 .\end{align*}\]</span></p>
</div>
<div class="remark">
<p>Note that <span class="math inline">\(X\)</span> is allowed to be infinite, so the statement only gets stronger if we allow a maximal proper subset where its complement is just a point. If we only had the first statement, this would be <em>weak approximation</em>. The conclusion is weaker, but it applies much more generally. One first learns this in NTII, and it applies to any finite set of inequivalent norms on a field. The second statement is a requirement that <span class="math inline">\(x\)</span> is regular. If <span class="math inline">\(X\)</span> were <em>not</em> all but one place, we should replace it by that since it’d still satisfy the hypotheses. Enlarging <span class="math inline">\(X\)</span> only makes the conclusion of the second statement stronger, since this is enforcing more integrality conditions.</p>
</div>
<div class="proof" title="?">
<p>Without loss of generality, assume that the complement <span class="math inline">\(\Sigma(K/k) \setminus X = \left\{{p_0}\right\} \mathrel{\vcenter{:}}= S\)</span> is a single place. We know that <span class="math inline">\(R^S\)</span> is an affine Dedekind domain (by a theorem stated but not proved yet), so apply the <em>Dedekind Approximation Theorem</em><a href="#fn40" class="footnote-ref" id="fnref40" role="doc-noteref"><sup>40</sup></a>.</p>
</div>
<div class="remark">
<p>Note that Stichtenoth uses Weil’s proof of Riemann-Roch to prove this. Too bad he doesn’t have several hundred pages of lecture notes to draw on! The difference between weak and strong approximation: weak applies to a finite set of places, and strong applies to all but one place. Later in NTII there’s an adelic statement of strong approximation, which works in the more general setting of a linear algebraic group over a global field. You can take the adelic points of that group, remove one place, and ask if strong approximation holds. It turns out to depend on what kind of algebraic group you have.</p>
</div>
<h2 id="proof-of-main-theorem">Proof of Main Theorem</h2>
<p>We return now to the proof of .</p>
<p>We’re trying to show that <span class="math inline">\(R^S\)</span> for <span class="math inline">\(S\)</span> a finite and nonempty set of places is an affine Dedekind domain. So we need to show that it’s Dedekind, and that it’s finitely generated over a field.</p>
<p>If <span class="math inline">\(\emptyset \subsetneq S_1 \subsetneq S_2\)</span> are finite subsets of <span class="math inline">\(\Sigma(K/k)\)</span>, then <span class="math inline">\(R^{S_1} \subseteq R^{S_2} \subset K\)</span>. By the structure theory of Dedekind domains,<a href="#fn41" class="footnote-ref" id="fnref41" role="doc-noteref"><sup>41</sup></a> every overring of a Dedekind domain is again a Dedekind domain. This allows us to restrict to the case where <span class="math inline">\({\left\lvert {S} \right\rvert} = 1\)</span>.</p>
<h3 id="case-1">Case 1</h3>
<p>We start with the case where <span class="math inline">\(K\)</span> is a one variable function field, since it should certainly be true there. So assume <span class="math inline">\(K = k(t)\)</span>. If <span class="math inline">\(S = \left\{{v_\infty}\right\}\)</span> is just the infinite place, then <span class="math inline">\(R^S = k[t]\)</span> from a previous discussion. This is definitely a Dedekind domain, since it’s an affine PID.</p>
<h3 id="case-2">Case 2</h3>
<p>The next case is one place of degree 1, so <span class="math inline">\(S= \left\{{v_{t-a}}\right\}\)</span> corresponds to a monic irreducible polynomial, where we use the fact that the degree of the residue field is the degree of the polynomial. Then <span class="math inline">\(R^S = k\left[{1\over t-a}\right]\)</span>. This is holomorphic at <span class="math inline">\(\infty\)</span>, since the degree in the denominator is bigger than that of the numerator. So it lies in <span class="math inline">\(R_{v_\infty}\)</span> as well as <span class="math inline">\(R_{v_q}\)</span> for every monic irreducible polynomial <span class="math inline">\(q\)</span> except for <span class="math inline">\(t-a\)</span>. This is a PID since it’s isomorphic to a polynomial ring, and has fraction field <span class="math inline">\(K\)</span>. (?) We certainly have a containment <span class="math inline">\(\supseteq\)</span>, but the RHS is already an affine Dedekind domain whose <span class="math inline">\(\operatorname{mSpec}\)</span> is everything but this single place. By the theory of overrings, the only other possibility is that the RHS is bigger, but going from a Dedekind domain to a larger Dedekind domain removes elements from <span class="math inline">\(\operatorname{mSpec}\)</span>.</p>
<h3 id="case-3">Case 3</h3>
<p>Now consider the case <span class="math inline">\(S = \left\{{v_p}\right\}\)</span> with <span class="math inline">\(\deg p \mathrel{\vcenter{:}}= d &gt; 1\)</span>. This corresponds to a monic irreducible polynomial of degree bigger than 1. Note that <span class="math inline">\(k[t] \cong k[\alpha]\)</span> for any transcendental <span class="math inline">\(\alpha\)</span>, so we can take <span class="math inline">\(k[1/p] \subset R^S\)</span>. This is an affine PID, and the containment follows from the fact that <span class="math inline">\(1/p\)</span> is holomorphic at <span class="math inline">\(\infty\)</span> (for the same reason as above). The only way it could <em>not</em> be regular with respect to some polynomial <span class="math inline">\(q\)</span> would be that after cancelling the numerator and denominator, <span class="math inline">\(q\)</span> appears in the denominator, and that happens precisely at <span class="math inline">\(p\)</span>. Now taking fraction fields, we have <span class="math inline">\(\operatorname{ff}{k[t]} = k(t)\)</span> and <span class="math inline">\([k(t) : k(1/p)] = d\)</span>, the degree of the denominator, which follows from this exercise:</p>
<div class="exercise" title="Basic but important">
<p>If <span class="math inline">\(p(t)/q(t) \in k(t)\)</span> is a nonconstant rational function, then what is the degree <span class="math inline">\(d \mathrel{\vcenter{:}}=[k(t) : k(p/q)]\)</span>? Show that <span class="math inline">\(d = \max\left\{{\deg p, \deg q}\right\}\)</span>.</p>
</div>
<p>So <span class="math inline">\(k[1/p] \subset R^S\)</span> must be proper, since <span class="math inline">\(\operatorname{ff}(R^S) = K\)</span> but <span class="math inline">\(\operatorname{ff}(k[1/p])\)</span> is a proper extension. We can’t have equality, so instead let <span class="math inline">\(A\)</span> be the integral closure of <span class="math inline">\(k[1/p]\)</span> in <span class="math inline">\(k(t)\)</span>. Then <span class="math inline">\(A\)</span> is a Dedekind domain with <span class="math inline">\(\operatorname{ff}(A) = k(t)\)</span> and <span class="math inline">\(\operatorname{mSpec}(A) = \Sigma(k(t)/k) \setminus\left\{{v_p}\right\}\)</span> from the following NTI square:</p>
<p><p style="text-align:center;"> <img class="tikz" src="/home/zack/SparkleShare/github.com/Notes/Class_Notes/2020/Fall/Algebraic Curves/a045bdbb39912a3fe40c3a7110c5ce4c63005b3a.svg"></p></p>
<p><a href="https://q.uiver.app/?q=WzAsNSxbMCwyLCJrWzEvcF0iXSxbMiwyLCJrKDEvcCkiXSxbMCwwLCJBIl0sWzIsMCwiayh0KSJdLFswLDQsImsiXSxbNCwwLCIiLDAseyJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzAsMiwiIiwwLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbMSwzLCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsyLDMsIlxcc3Vic2V0ZXEiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFswLDEsIlxcc3Vic2V0ZXEiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dXQ==">Link to diagram</a></p>
<p>By affine grounding, we know <span class="math inline">\(k[1/p]\)</span> is an affine Dedekind domain, and by the second normalization theorem we know that <span class="math inline">\(A\)</span> is finitely generated as a module over <span class="math inline">\(k[1/p]\)</span>, which is in turn finitely generated as an algebra over <span class="math inline">\(k\)</span>, making <span class="math inline">\(A\)</span> a finitely generated <span class="math inline">\(k{\hbox{-}}\)</span>algebra. The key ingredient in identifying <span class="math inline">\(\operatorname{mSpec}(A)\)</span> is that <span class="math inline">\(1/p\in A\)</span>. By a previous exercise, we can conclude that <span class="math inline">\(A\)</span> is a holomorphy ring, and since we know the exact excluded set is <span class="math inline">\(S\)</span>, we can conclude <span class="math inline">\(A = R^S\)</span>. This makes <span class="math inline">\(A\)</span> an affine Dedekind domain.<br />
</p>
<p>For the final case, suppose <span class="math inline">\(S\)</span> is finite and nonempty. Choose <span class="math inline">\(v\in S\)</span> and define <span class="math inline">\(S_1 \mathrel{\vcenter{:}}=\left\{{v}\right\}\)</span>. Then <span class="math inline">\(R^{S_1} \subseteq R^S \subset K\)</span>, so <span class="math inline">\(R^S\)</span> is a Dedekind domain since it’s an overring of a Dedekind domain. A surprising fact is that <span class="math inline">\(A \mathrel{\vcenter{:}}= R^S\)</span> is not a PID when the degree is greater than 1, and instead <span class="math inline">\(\operatorname{cl}(A) \cong {\mathbb{Z}}/d{\mathbb{Z}}\)</span> and is thus torsion. It’ll be enough to show that <span class="math inline">\(R^S\)</span> is finitely generated as an algebra (but not a module?) over <span class="math inline">\(R^{S_1}\)</span>, which will make it a finitely generated <span class="math inline">\(k{\hbox{-}}\)</span>algebra, and we’d really like it to be a localization. We examined this before: is every overring of a Dedekind domain a localization? A theorem of Clayborne shows that this is true when the class group is torsion.</p>
<p>Let <span class="math inline">\(v_2 \in S\setminus S_1\)</span>, so that every such <span class="math inline">\(v_2\)</span> yields an ideal <span class="math inline">\(\mathfrak{p}_{v_2} \in \operatorname{mSpec}R^{S_1}\)</span>. Since <span class="math inline">\(\operatorname{cl}(R^S) = {\mathbb{Z}}/d{\mathbb{Z}}\)</span>, we don’t know that <span class="math inline">\(\mathfrak{p}_{v_2}\)</span> is principal, but we do know that <span class="math inline">\(\mathfrak{p}_{v_2}^\alpha\)</span> is for some power <span class="math inline">\(\alpha\)</span> Note that localization is forgiving in the sense that inverting an element <span class="math inline">\(x\)</span> is equivalent to inverting any power <span class="math inline">\(x^k\)</span> (e.g. using that <span class="math inline">\(1/x = x^{k}/x^{k+1})\)</span>. So we can write <span class="math inline">\(\mathfrak{p}_{v_2}^\alpha = \left\langle{f}\right\rangle\)</span>, and it follows that <span class="math inline">\(R^{\left\{{v, v_2}\right\}} = R_v[1/f]\)</span> is an affine domain which is obtained by localizing <span class="math inline">\(f\)</span>. Note that we can think of this overring as puncturing or removing one place (a certain maximal ideal) at a time, i.e. intersecting over all of the maximal ideals except one in order to go from <span class="math inline">\(R^{S_1} = R^{\left\{{v_1}\right\}}\)</span> to <span class="math inline">\(R^{\left\{{v_1, v_2}\right\}}\)</span>. You can continue this inductively using the fact that <span class="math inline">\(R_v[1/f]\)</span> is a different Dedekind domain – since it’s an overring, the corresponding class group is a quotient and thus still torsion. You could also continue this inductively by just puncturing one point at a time. You can also do it all at once: for each element in <span class="math inline">\(S\)</span> not equal to <span class="math inline">\(v_1\)</span>, obtain an <span class="math inline">\(f_j\)</span>, and invert the product <span class="math inline">\(\prod_j f_j\)</span>.<a href="#fn42" class="footnote-ref" id="fnref42" role="doc-noteref"><sup>42</sup></a></p>
<p><strong>Key fact</strong>: We’re in a lucky situation where we don’t have a PID, but we have a torsion class group. Anytime you pass to an overring by puncturing finitely many maximal ideals, it will always be a localization and thus monogenic as an algebra over the smaller Dedekind domain.</p>
<h2 id="case-3-fixed-proof">Case 3: Fixed Proof</h2>
<p>The remainder of the proof will go toward reducing to the first step of a function field and exactly one place. We’ll apply the Riemann-Roch theorem, however this does not rely on results on holomorphy rings, so there’s no logical circularity. As usual, we lose no generality by replacing <span class="math inline">\(k\)</span> with <span class="math inline">\(\kappa(K)\)</span> and just assuming that <span class="math inline">\(\kappa(k) = k\)</span>.<br />
</p>
<p>Let <span class="math inline">\(S \subset \Sigma(K/k)\)</span> be finite and nonempty. Then by Riemann-Roch there exists an <span class="math inline">\(f\in K^{\times}\)</span> having poles precisely at the elements of <span class="math inline">\(S\)</span>, i.e. <span class="math inline">\(f\)</span> is regular away from <span class="math inline">\(S\)</span>.</p>
<blockquote>
<p>Recall that poles were defined as elements not in <span class="math inline">\(R_v\)</span>. This is motivated by considering meromorphic functions <span class="math inline">\(f\)</span> on <span class="math inline">\({\mathbb{C}}\)</span>, then the order of vanishing of <span class="math inline">\(f\)</span> at <span class="math inline">\(p\)</span> is a discrete valuation, and if that valuation is negative then <span class="math inline">\(p\)</span> is a pole.</p>
</blockquote>
<p>Note that we’re specifying the poles but not their orders, and allowing poles of arbitrary orders would still allow us such a rational function by a result like the Riemann inequalities, which is easier to prove than the Riemann-Roch theorem. You can also obtain such a function from the Strong Approximation theorem.<br />
</p>
<p>Since <span class="math inline">\(f\)</span> has poles, it’s nonconstant, so we have a nontrivial map <span class="math inline">\(r: \Sigma(K/k) \to \Sigma(k(f)/k)\)</span> to a rational function field and thus <span class="math inline">\(r^{-1}(\infty) = S\)</span> since the poles all like above the place at <span class="math inline">\(\infty\)</span>. The analogy here is a holomorphic function <span class="math inline">\(f\)</span> from a compact Riemann surface to <span class="math inline">\({\mathbb{P}}^1_{/{\mathbb{C}}}\)</span>, in which case <span class="math inline">\(f^{-1}(\infty)\)</span> is the set of poles. Since <span class="math inline">\(k[f]\)</span> is a polynomial ring, we can take the integral closure of <span class="math inline">\(k[f]\)</span> in <span class="math inline">\(K\)</span>, say <span class="math inline">\(B\)</span>, in which case <span class="math inline">\(B\)</span> is an affine Dedekind domain and <span class="math inline">\(\operatorname{mSpec}(B) = \Sigma(K/k)\setminus S\)</span>.</p>
<p>The picture is as follows: think of <span class="math inline">\(k(f)\)</span> as the Riemann sphere with the point <span class="math inline">\(\infty\)</span> and <span class="math inline">\(\Sigma(K/k)\)</span> as a Riemann surface above it, then <span class="math inline">\(S\)</span> is the preimage of <span class="math inline">\(\infty\)</span>.</p>
<figure>
<img src="figures/image_2020-12-01-22-09-07.png" alt="Image" /><figcaption aria-hidden="true">Image</figcaption>
</figure>
<p>If you have an upstairs valuation <span class="math inline">\(v \in \Sigma(K/k)\)</span> in an integral extension, then it is regular upstairs iff its restriction downstairs is regular. Completing the NTI square yields</p>
<p><p style="text-align:center;"> <img class="tikz" src="/home/zack/SparkleShare/github.com/Notes/Class_Notes/2020/Fall/Algebraic Curves/282503b9b3000ee07b801fef17bcf475eda24b6a.svg"></p></p>
<p><a href="https://q.uiver.app/?q=WzAsNCxbMCwyLCJrW2ZdIl0sWzAsMCwiQiJdLFsyLDAsIksiXSxbMiwyLCJrKGYpIl0sWzAsMSwiXFxzdWJzZXRlcSIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzMsMiwiXFxzdWJzZXRlcSIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzEsMiwiXFxzdWJzZXRlcSIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzAsMywiXFxzdWJzZXRlcSIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV1d">Link to diagram</a></p>
<p>Here <span class="math inline">\(B\)</span> is the integral closure. So if we take a valuation in <span class="math inline">\(K\)</span>, it is <span class="math inline">\(B{\hbox{-}}\)</span>regular iff its restriction to <span class="math inline">\(k(f)\)</span> is <span class="math inline">\(A{\hbox{-}}\)</span>regular. But <span class="math inline">\(R_v\)</span> contains <span class="math inline">\(k[f]\)</span> iff it contains <span class="math inline">\(f\)</span>, since it’s already a <span class="math inline">\(k{\hbox{-}}\)</span>valuation, so the non-regular valuations are those that restrict to <span class="math inline">\(\infty\)</span>.</p>
<p>Now if you have an extension of Dedekind domains, then the maximal ideals upstairs are everything which restricts to a finite place downstairs. So those that don’t restrict to a finite place restrict to <span class="math inline">\(\infty\)</span>, which is precisely the preimage of <span class="math inline">\(\infty\)</span>. With the identification of <span class="math inline">\(\operatorname{mSpec}(B) = \Sigma(K/k) \setminus S\)</span>,we have <span class="math inline">\(B \subset R^S\)</span> since every valuation in the complement of <span class="math inline">\(S\)</span> is regular at <span class="math inline">\(B\)</span> by this argument. Since <span class="math inline">\(B \subset R^S \subset K\)</span>, we can use the classification of overrings of Dedekind domains, and the <span class="math inline">\(\operatorname{mSpec}\)</span> corresponds to precisely the maximal ideals that are being intersected. The only way this could be a <em>proper</em> extension would be if the <span class="math inline">\(\operatorname{mSpec}\)</span> shrank, but then <span class="math inline">\(R^S\)</span> would be the holomorphy ring attached to a larger set than <span class="math inline">\(S\)</span>. So we obtain an equality.</p>
<p><span class="math inline">\(\hfill\blacksquare\)</span></p>
<h1 id="lecture-7-riemann-roch">Lecture 7: Riemann-Roch</h1>
<h2 id="divisors-1">Divisors</h2>
<div class="definition" title="Divisor group">
<p>The <strong>divisor group</strong> <span class="math inline">\(\operatorname{Div}K\)</span> is the free <span class="math inline">\({\mathbb{Z}}{\hbox{-}}\)</span>module with basis <span class="math inline">\(\Sigma(K/k)\)</span>, so <span class="math display">\[\begin{align*}   \operatorname{Div}K \mathrel{\vcenter{:}}=\bigoplus_{p\in \Sigma(K/k)} {\mathbb{Z}} .\end{align*}\]</span> Thus every <span class="math inline">\(D\in \operatorname{Div}K\)</span> is of the form <span class="math inline">\(D = \sum_{p\in \Sigma(K/k)} n_p p\)</span> where <span class="math inline">\(n_p\in {\mathbb{Z}}\)</span> and are almost all zero, recalling that a point <span class="math inline">\(p\in \Sigma(K/k)\)</span> is an equivalence class of valuations.</p>
</div>
<div class="definition" title="Effective Divisor">
<p>A divisor <span class="math inline">\(D = \sum n_p p\)</span> is <strong>effective</strong> iff <span class="math inline">\(n_p \geq 0\)</span> for all <span class="math inline">\(p\)</span> and write <span class="math inline">\(D\geq 0\)</span>.</p>
</div>
<div class="definition" title="Support of a divisor">
<p>The <strong>support</strong> of a divisor <span class="math inline">\(D\)</span> is the set of places <span class="math inline">\(p\in \Sigma(K/k)\)</span> such that <span class="math inline">\(n_p(D) \neq 0\)</span>. Note that this is always a finite set, and the zero divisor is the unique divisor supported on <span class="math inline">\(\emptyset\)</span>.</p>
</div>
<div class="definition" title="Partial order on divisor">
<p>We write <span class="math inline">\(D_1 \leq D_2\)</span> iff <span class="math inline">\(D_2 - D_1 \geq 0\)</span> is effective. Note that this holds iff for all places <span class="math inline">\(p\in \Sigma(K/k)\)</span>, if <span class="math inline">\(D_1 = \sum_p m_p p\)</span> and <span class="math inline">\(D_2 = \sum_p n_p p\)</span>, then <span class="math inline">\(m_p\leq n_p\)</span> for all <span class="math inline">\(p\)</span>.</p>
</div>
<p>This is a partially ordered commutative group, which came up when we were talking about groups of divisibility. It’s a reasonable group when studying domains with nice factorization properties: if <span class="math inline">\(R\)</span> is a UFD with a set of principal prime ideals<a href="#fn43" class="footnote-ref" id="fnref43" role="doc-noteref"><sup>43</sup></a> denoted <span class="math inline">\(\Sigma(R)\)</span>, then the group of divisibility <span class="math inline">\(G(R)\)</span> is isomorphic to <span class="math inline">\(\bigoplus_{(p) \in \Sigma(R)} {\mathbb{Z}}\)</span> as a partially ordered commutative group.</p>
<p>There is an analogy: comparing UFDs to Dedekind domains, we trade unique factorization of elements for factorization of ideals, and the group of all fractional ideals in a Dedekind domain is a free commutative group on its set of prime ideals. So <span class="math inline">\(\operatorname{Div}K\)</span> is analogous to the group of divisibility of a UFD and to the group of fractional ideals of a Dedekind domain, the latter of which is the closer analogy. So <span class="math inline">\(\operatorname{Div}K\)</span> is a geometric or projective analog of the group of fractional ideals, and is more than an analogy as we’ll see later.</p>
<div class="definition" title="Degree of a Divisor">
<p>There is a group morphism <span class="math display">\[\begin{align*}   \deg: \operatorname{Div}K &amp;\to {\mathbb{Z}}\\ D = \sum_p n_p p &amp;\mapsto \sum_p n_p \deg p .\end{align*}\]</span> Its kernel is denoted <span class="math inline">\(\operatorname{Div}^0 K\)</span>, the <strong>degree zero divisors</strong>. Note that if <span class="math inline">\(k = \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span>, then <span class="math inline">\(\deg p = 1\)</span> for all <span class="math inline">\(p\)</span>.</p>
</div>
<div class="remark">
<p>Note that this is similar to the augmentation in a group ring. This construction can be done with any free <span class="math inline">\({\mathbb{Z}}{\hbox{-}}\)</span>module, and makes sense because only finitely many terms are nonzero. Recall that to define the degree of a place <span class="math inline">\(v\in \Sigma(K/k)\)</span>, we consider <span class="math inline">\(R_v \mathrel{\vcenter{:}}=\left\{{x\in K ~{\text{s.t.}}~v(x) \geq 0}\right\}\)</span> and <span class="math inline">\(\mathfrak{m}_v \mathrel{\vcenter{:}}=\left\{{x\in K ~{\text{s.t.}}~v(x) &gt;0}\right\}\)</span>, and <span class="math inline">\(k(v) \mathrel{\vcenter{:}}= R_v / \mathfrak{m}_v\)</span> is the residue field. Note that <span class="math inline">\(k(v)\)</span> is a field extension of <span class="math inline">\(k\)</span> by composing <span class="math inline">\(k\hookrightarrow R_v \twoheadrightarrow k(v)\)</span>, and we proved used affine grounding and Zariski’s lemma that this was a finite degree extension. We can then define <span class="math inline">\(\deg v \mathrel{\vcenter{:}}=[k(v) : k]\)</span>. Note that it’s more natural to think of valuations <span class="math inline">\(v\)</span> as points <span class="math inline">\(p\)</span>.</p>
</div>
<div class="definition" title="Index of a divisor">
<p>The <strong>index</strong> of <span class="math inline">\(K\)</span> is defined as <span class="math display">\[\begin{align*}   I(K) \mathrel{\vcenter{:}}={\left\lvert {\operatorname{coker}\deg} \right\rvert} .\end{align*}\]</span><a href="#fn44" class="footnote-ref" id="fnref44" role="doc-noteref"><sup>44</sup></a></p>
</div>
<div class="remark">
<p>Note that <span class="math inline">\(I(K)\)</span> is nonzero, since we can think of <span class="math inline">\(p\in \operatorname{Div}K\)</span> as the divisor with <span class="math inline">\(n_q = \indic{q=p}\)</span>, so the image contains a subset consisting of all degrees of all places, so the image is of the form <span class="math inline">\(d{\mathbb{Z}}\)</span> for some <span class="math inline">\(d\)</span>. Some other characterizations:</p>
<ul>
<li><span class="math inline">\(\deg\qty{\operatorname{Div}K} = I(K){\mathbb{Z}}\)</span>, so <span class="math inline">\(I(K)\)</span> is the generator of the degree ideal.</li>
<li><span class="math inline">\(I(K)\)</span> is the least positive degree of a divisor on <span class="math inline">\(K\)</span>.</li>
<li><span class="math inline">\(I(K) = \gcd\qty{\left\{{\deg p ~{\text{s.t.}}~p\in \Sigma(K/k)}\right\}}\)</span>, i.e. the <span class="math inline">\(\gcd\)</span> of the closed points.</li>
</ul>
<p>The last characterization follows because we have generators of <span class="math inline">\(\operatorname{Div}K\)</span> given by “skyscraper” divisors <span class="math inline">\(p\)</span> where <span class="math inline">\(n_q = 1 \iff p=q\)</span>, so the image is the subgroup of <span class="math inline">\({\mathbb{Z}}\)</span> generated by the degrees of the points, i.e. the <span class="math inline">\(\gcd\)</span> of the degrees.</p>
</div>
<div class="exercise" title="?">
<p>Let <span class="math inline">\(K/k\)</span> be a one variable function field.</p>
<ol type="a">
<li><p>Show that if <span class="math inline">\(\Sigma_1(K/k) \neq \emptyset\)</span> then <span class="math inline">\(I(K) = 1\)</span>.</p></li>
<li><p>Later we will show that if <span class="math inline">\({\left\lvert {k} \right\rvert} &lt; \infty\)</span> then <span class="math inline">\(I(K) = 1\)</span> but <span class="math inline">\(\Sigma_1(K/k)\)</span> may be empty. Try to show this.</p></li>
<li><p>Show that if <span class="math inline">\(k=\mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span> then <span class="math inline">\(I(K) = 1\)</span>.</p></li>
</ol>
</div>
<div class="remark">
<ol type="a">
<li>follows from the Riemann hypothesis for curves over a finite field, although this is not how you should prove it. It was proved by F.K. Schmidt much earlier in the 20th century, and this is the basic way of understanding the zeta function of a curve.</li>
<li>says that over a finite ground field, you may not have any degree 1 places. You can try constructing a hyperelliptic curve over a finite field <span class="math inline">\({\mathbb{F}_{q}}\)</span> with no rational points, which is always possible if the genus is large compared to the size of <span class="math inline">\({\mathbb{F}_{q}}\)</span>.</li>
</ol>
</div>
<div class="lemma" title="?">
<p>For a nonzero rational function <span class="math inline">\(f\in K^{\times}\)</span> we have <span class="math inline">\(v_p(f) = 0\)</span> for almost every place <span class="math inline">\(p\in \Sigma(K/k)\)</span>.</p>
</div>
<div class="proof" title="?">
<p>See previous lecture, in particular .</p>
</div>
<p>This says that the set of places for which the valuation is nonzero is finite, so except for finitely many places the valuation is zero. This allows us to define the divisor of a rational function: <span class="math display">\[\begin{align*}   ({\,\cdot\,}): K^{\times}&amp;\to \operatorname{Div}K \\ f &amp;\mapsto (f) \mathrel{\vcenter{:}}=\sum_p v_p(f) p ,\end{align*}\]</span> which is a group morphism.</p>
<div class="exercise" title="?">
<p>Show that <span class="math inline">\((f) = 0 \iff f \in \kappa(K)\)</span>, which we’re assuming is equal to <span class="math inline">\(k\)</span>. This happens when it has neither zeros nor poles, so it’s an intersection of all of the <span class="math inline">\(R_v\)</span>, which is the integral closure of <span class="math inline">\(k\)</span> in <span class="math inline">\(K\)</span>. In general, this would mean that <span class="math inline">\(f\)</span> is algebraic over <span class="math inline">\(k\)</span>. So <span class="math inline">\(\ker ({\,\cdot\,}) = k^{\times}\)</span>.</p>
</div>
<div class="definition" title="Poles and Zeros of Elements of $K$">
<p>For any <span class="math inline">\(D\in \operatorname{Div}K\)</span> one may uniquely write it as <span class="math inline">\(D = D_+ - D_-\)</span>, which are both effective divisors and so <span class="math inline">\(D_+, D_- \geq 0\)</span>, and the uniqueness follows from requiring <span class="math inline">\({\operatorname{supp}}(D_+) \cap{\operatorname{supp}}(D_-) = \emptyset\)</span>. Note that this is just collecting positive and negative <span class="math inline">\(n_p\)</span> into each term, and leaving out all divisors for which <span class="math inline">\(n_p = 0\)</span>.</p>
<p>For <span class="math inline">\(f\in K^{\times}\)</span>, we define <span class="math display">\[\begin{align*}   (f)_+ &amp;\mathrel{\vcenter{:}}=\text{the divisor of zeros of } f \\ (f)_- &amp;\mathrel{\vcenter{:}}=\text{the divisor of poles of } f  ,\end{align*}\]</span> where we can note that <span class="math inline">\((f) = (f)_+ - (f)-\)</span>.</p>
</div>
<p>The next proposition shows that these geometric divisors can be interpreted in terms of <span class="math inline">\({\mathbb{F}_{q}}\)</span> points.</p>
<div class="proposition" title="?">
<p>Let <span class="math inline">\(f\in K\setminus k\)</span> be transcendental.</p>
<ol type="a">
<li>Let <span class="math inline">\(B_0\)</span> be the integral closure of <span class="math inline">\(k[f]\)</span> in <span class="math inline">\(K\)</span>, which is an affine Dedekind domain of <span class="math inline">\(K\)</span>, i.e. its fraction field is <span class="math inline">\(K\)</span>.<a href="#fn45" class="footnote-ref" id="fnref45" role="doc-noteref"><sup>45</sup></a></li>
</ol>
<p>Then <span class="math display">\[\begin{align*}     fB_0 = \prod_{j=1}^r p_j^{a_j} \implies (f)_+ = \sum_{j=1}^r a_j p_j   .\end{align*}\]</span></p>
<ol start="2" type="a">
<li>Let <span class="math inline">\(B_ \infty\)</span> be the integral closure of <span class="math inline">\(k[1/f]\)</span> in <span class="math inline">\(K\)</span>, which is an affine Dedekind domain of <span class="math inline">\(K\)</span>. Then <span class="math display">\[\begin{align*}         \qty{1\over f} B_ \infty = \prod_{j=1}^s q_j^{b_j} \implies (f)_+ = \sum_{j=1}^s b_j q_j       .\end{align*}\]</span></li>
</ol>
</div>
<div class="exercise" title="?">
<p>Prove this proposition.</p>
</div>
<div class="remark">
<p>This says that pushing forward an ideal and looking at the factorization is precisely what’s needed to determine the divisor of zeros. There aren’t many new ideas for this proof, the point is that the set of places upstairs is being controlled by <span class="math inline">\(\operatorname{mSpec}\)</span> of Dedekind domains.</p>
</div>
<div class="slogan">
<p>In any affine coordinate chart, the divisor of a function is a principal fractional ideal.</p>
</div>
<h2 id="the-degree-of-the-divisor-of-a-rational-function-is-zero">The Degree of the Divisor of a Rational Function is Zero</h2>
<div class="corollary" title="Excruciatingly Important: the degree of the divisor of any rational function is zero.">
<p>Let <span class="math inline">\(f\in K\setminus k\)</span> be transcendental, then</p>
<ol type="a">
<li><p><span class="math inline">\(\deg(f)_+ = [K : k(f) ] = \deg (f)_-\)</span></p></li>
<li><p><span class="math inline">\(\deg (f) = 0\)</span>.</p></li>
</ol>
</div>
<div class="remark">
<p>Here think of <span class="math inline">\(f\)</span> as a holomorphic map from a curve to <span class="math inline">\({\mathbb{P}}^1_{/{\mathbb{C}}}\)</span>, and the degree of this extension is the degree of the corresponding branched cover. For <span class="math inline">\({\mathbb{C}}\)</span>, this is literally the cardinality of any finite fibers. Note that (a) follows by symmetry sense <span class="math inline">\(k(f) \cong k(1/f)\)</span>.</p>
</div>
<div class="proof" title="?">
<p>This comes down to NTI. We know <span class="math inline">\(\deg(f)_+ = \sum{j=1}^r a_j \deg p_j\)</span>. In <span class="math inline">\(K/k(f)\)</span>, the places <span class="math inline">\(p_1, \cdots, p_r\)</span> all lie over the degree 1 place <span class="math inline">\(v_f\)</span> of <span class="math inline">\(k(f)\)</span>. The places where upstairs you have a zero are the places where to coordinate downstairs is equal to zero, which corresponds to the irreducible polynomial in <span class="math inline">\(f\)</span> given by <span class="math inline">\(f\)</span> itself. Since the residue field at <span class="math inline">\(v_f\)</span> downstairs is <span class="math inline">\(k\)</span> itself, since it is <span class="math inline">\(k[f]/\left\langle{f}\right\rangle\)</span>. So the downstairs places has degree 1, and so the degree of the upstairs places, whatever the residue field is, its degree over <span class="math inline">\(k\)</span> is equal to its degree over the downstairs residue field. Thus the geometric <span class="math inline">\(\deg p_j\)</span> coincides with the residual degree <span class="math inline">\(f_i\)</span>, and <span class="math inline">\(a_i\)</span> is the ramification index in the extension of Dedekind domains <span class="math inline">\(B_0 / k[f]\)</span>.<br />
</p>
<p>So we have a degree equality, <span class="math display">\[\begin{align*}   \sum_{j=1}^r a_j \deg p_j = \sum e_j f_j = [K: k(f)] ,\end{align*}\]</span> where the second equality follows from having an extension of Dedekind domains with this nice finite generation hypothesis. We similarly get <span class="math inline">\([k: k(f)] = \deg(f)_-\)</span>.<br />
</p>
<p>Note that part (b) follows immediately, since <span class="math inline">\((f) = (f)_+ - (f)_-\)</span> implies that<br />
<span class="math display">\[\begin{align*} \deg(f) = \deg(f)_+ - \deg(f)_- = [k: k(f)] - [k: k(f)] = 0 .\end{align*}\]</span></p>
</div>
<div class="remark">
<p>We have two different things that sound like the degree of a rational function. We define the degree of a rational function <span class="math inline">\(f\in K\setminus k\)</span> as <span class="math inline">\([K: k(f)]\)</span>, otherwise it is the degree (number of sheets) of the corresponding branched covering of <span class="math inline">\({\mathbb{P}}^1\)</span>. But note that we also attached a divisor to <span class="math inline">\(f\)</span>, which may be confusing, be hard to confuse in practice because we found that <span class="math inline">\(\deg(f) = 0\)</span> always.</p>
</div>
<div class="definition" title="Principal Divisors">
<p>The divisor of a rational function is called <strong>principal</strong>, we define <span class="math inline">\(\operatorname{Prin}K\)</span> to be the group of principal divisors.</p>
</div>
<div class="exercise" title="$\Prin K$ is a group">
<p>For <span class="math inline">\(f, g\in K^{\times}\)</span>, show that</p>
<ol type="a">
<li><p><span class="math inline">\((1/f) = -(f)\)</span>,</p></li>
<li><p><span class="math inline">\((fg) = (f) + (g)\)</span>,</p></li>
<li><p><span class="math inline">\(\operatorname{Prin}K \leq \operatorname{Div}^0 K\)</span> is a subgroup (since we know they’re degree zero).</p></li>
</ol>
</div>
<div class="definition" title="Linear Equivalence">
<p>For <span class="math inline">\(D_i \in \operatorname{Div}K\)</span>, we set <span class="math inline">\(D_1 \sim D_2 \iff D_1 - D_2 \in \operatorname{Prin}K\)</span>, in which case we say these divisors are <strong>linearly equivalent</strong>.</p>
</div>
<div class="remark">
<p>Near the end of the course we’ll see why this is good terminology: it’s related to morphisms of projective space attached to linear systems.</p>
</div>
<div class="definition" title="Divisor Class Group">
<p>We define the <strong>divisor class group</strong> as <span class="math display">\[\begin{align*}   \operatorname{cl}K \mathrel{\vcenter{:}}=\operatorname{Div}K/\sim = \operatorname{Div}K / \operatorname{Prin}K .\end{align*}\]</span></p>
</div>
<p>But note that there’s something between <span class="math inline">\(\operatorname{Prin}K\)</span> and <span class="math inline">\(\operatorname{Div}K\)</span>, namely <span class="math inline">\(\operatorname{Div}^0 K\)</span>:</p>
<div class="definition" title="Degree 0 Divisor Class Group (Important! Fundamental!)">
<p>We define the <strong>degree 0 divisor class group</strong> as <span class="math display">\[\begin{align*}   \operatorname{Cl}^0 K  \mathrel{\vcenter{:}}=\operatorname{Div}^0 K / \sim = \operatorname{Div}^0 K / \operatorname{Prin}K .\end{align*}\]</span></p>
</div>
<div class="remark">
<p>This is extremely important! Attached to a curve is a Jacobian abelian variety, a nice group variety whose dimension is equal to the genus of the curve, and the <span class="math inline">\(k{\hbox{-}}\)</span>rational point of the Jacobian will become a commutative group that is isomorphic to <span class="math inline">\(\operatorname{Div}^0 K\)</span>.</p>
</div>
<div class="exercise" title="?">
<p>Show that we have the following exact sequences:</p>
<ol type="a">
<li><p><span class="math display">\[\begin{align*}       1 \to k^{\times}\to K^{\times}\xrightarrow{({\,\cdot\,})} \operatorname{Prin}K \to 0     .\end{align*}\]</span></p></li>
<li><p><span class="math display">\[\begin{align*}       0 \to \operatorname{Cl}^0 K \to \operatorname{Cl}K \xrightarrow{\deg} I(K) {\mathbb{Z}}\to 0     .\end{align*}\]</span></p></li>
</ol>
<p>Deduce that <span class="math inline">\(\operatorname{Cl}K \cong \operatorname{Cl}^0 K \oplus {\mathbb{Z}}\)</span>.</p>
</div>
<div class="remark">
<p>For (a), we saw that rational functions that have zero divisors are constants, assuming that <span class="math inline">\(\kappa(K) = k\)</span>. For (b), because principal divisors have degree zero, the degree map factors through the quotient. The deduction comes from that fact that we have a free and hence project <span class="math inline">\({\mathbb{Z}}{\hbox{-}}\)</span>module, yielding a splitting.</p>
</div>
<div class="exercise" title="Very important, Pete insists that someone solves it!">
<ol type="a">
<li><p>Show that <span class="math inline">\(\operatorname{Div}^0 k(t) = \operatorname{Prin}k(t)\)</span>.</p></li>
<li><p>Deduce that <span class="math inline">\(\deg: \operatorname{Cl}k(t) \xrightarrow{\sim} {\mathbb{Z}}\)</span> and <span class="math inline">\(\operatorname{cl}^0 k(t) = 0\)</span>.</p></li>
</ol>
</div>
<div class="remark">
<p>Note that <span class="math inline">\(I(K) = 1\)</span> in this case since both the <span class="math inline">\(t{\hbox{-}}\)</span>adic or <span class="math inline">\(\infty{\hbox{-}}\)</span>adic valuation have degree one. Moral: the class groups are not interesting on rational function fields. You have to take a degree zero divisor on a rational function field and build a rational function whose divisor is any given degree. This is extremely useful!</p>
</div>
<div class="remark">
<p>More general if <span class="math inline">\(K/k\)</span> has genus zero (e.g. a rational function field), then working over <span class="math inline">\({\mathbb{C}}\)</span> we would have <span class="math inline">\(\operatorname{Cl}^0 K\)</span> equal to the points of some compact complex Lie group of <span class="math inline">\({\mathbb{C}}{\hbox{-}}\)</span>dimension <span class="math inline">\(g\)</span>, so a large complex torus, unless <span class="math inline">\(g=0\)</span>. So if <span class="math inline">\(k= \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span>, <span class="math inline">\(\operatorname{Cl}^0 K\)</span> will be uncountably infinite when <span class="math inline">\(g&gt;0\)</span>. If not, it might trivial, or it might be anything in between.</p>
</div>
<p>The following result appears in a 1973 paper of Rosen, where he attributes it to F. K. Schmidt. It gives a close relationship between <span class="math inline">\(\operatorname{Cl}^0 K\)</span> and the class groups <span class="math inline">\(\operatorname{Cl}R^S\)</span> of the affine Dedekind domains of <span class="math inline">\(K\)</span>. This shows that instead of <span class="math inline">\(\operatorname{Cl}^0 K\)</span> just being an analogue of the class group of a Dedekind domain, there’s almost the same. If you fix <span class="math inline">\(K\)</span>, <span class="math inline">\(\operatorname{Cl}^0 K\)</span> is just one group attached to it, but there are infinitely many <span class="math inline">\(R^S\)</span> since there are infinitely many places. So these groups can not be equal, since we could change the size of <span class="math inline">\(S\)</span> to obtain overrings of Dedekind domains, where the resulting class groups are quotients. So you could kill finitely many elements in the class group of the Dedekind domain by just passing to an overring by adding finitely more places.</p>
<div class="theorem" title="Rosen">
<p>Let <span class="math inline">\(S \subset \Sigma(K/k)\)</span> be nonempty and finite, and recall that the holomorphy ring was defined as <span class="math display">\[\begin{align*}   R^S = \cap_{v\in \Sigma(K/k)} R_v .\end{align*}\]</span></p>
<p>Define the following:</p>
<ul>
<li><span class="math inline">\(D^0(S)\)</span>: the degree 0 divisors with support in <span class="math inline">\(S\)</span>.</li>
<li><span class="math inline">\(P(S) \mathrel{\vcenter{:}}=\operatorname{Prin}K \cap D^0(S)\)</span>, the principal divisors supported in <span class="math inline">\(S\)</span>.
<ul>
<li>Divisors of rational functions all of whose zeros and poles lie in <span class="math inline">\(S\)</span>.</li>
</ul></li>
<li><span class="math inline">\(d_S\)</span>: The least positive degree of a divisor supported on <span class="math inline">\(S\)</span>.
<ul>
<li>Note that this is different to the index in that we restrict to <span class="math inline">\(S\)</span>, and is thus a multiple of <span class="math inline">\(I(K)\)</span>.</li>
</ul></li>
</ul>
<p>Then there is an exact sequence <span class="math display">\[\begin{align*}   0 \to D^0(S) / P(S) \xrightarrow{\iota} \operatorname{Cl}^0 K \xrightarrow{\alpha} \operatorname{Cl}R^S \xrightarrow{\beta} C(d/ I(K)) \to 0 .\end{align*}\]</span></p>
</div>
<div class="proof" title="?">
<p>See NTII, Theorem 3.27.</p>
</div>
<div class="remark">
<p>Note that the kernel <span class="math inline">\(D(S)/P(S)\)</span> could be infinite but is always finitely generated. The map <span class="math inline">\(\alpha\)</span> is induced by <span class="math display">\[\begin{align*}   \alpha&#39;: \operatorname{Div}K &amp;\to \operatorname{Frac}R^S \\ \sum n_p p  &amp;\mapsto \prod_{p\in \operatorname{mSpec}R^S} p^{n_p} ,\end{align*}\]</span> where we note that <span class="math inline">\(\operatorname{mSpec}R^S \subset \Sigma(K/k)\)</span>, and in fact <span class="math inline">\(\Sigma(K/k) = \operatorname{mSpec}R^S {\coprod}S\)</span>. We can do this because if <span class="math inline">\(p\)</span> is already in <span class="math inline">\({\operatorname{maxSpec}}R^S\)</span>, we raise it to an appropriate power, and otherwise, for the finitely many <span class="math inline">\(p\in S\)</span> we just get rid of them. But this kills of some elements, namely those things supported in <span class="math inline">\(S\)</span>, hence the kernel in the exact sequence.<br />
</p>
<p>Note that the last group appearing is finite cyclic of order <span class="math inline">\(d/I(K)\)</span>. If you just looked at <span class="math inline">\(D^0(S)\)</span> before modding out by principal divisors, if you didn’t impose degree zero, the subgroup would be isomorphic to <span class="math inline">\({\mathbb{Z}}^{{\left\lvert {S} \right\rvert}}\)</span>. But there’s a linear condition that the degree is equal to zero, which cuts down the dimension by 1, yielding <span class="math inline">\({\mathbb{Z}}^{{\left\lvert {S} \right\rvert} - 1}\)</span>. It’s hard to say how much <span class="math inline">\(P(S)\)</span> is cutting down the size.</p>
</div>
<div class="remark">
<p>The moral is that there is a map, but the kernel and cokernel both depend on <span class="math inline">\(S\)</span>. If you understand <span class="math inline">\(\operatorname{Cl}^0 K\)</span>, however, you have a good handle on all <span class="math inline">\(\operatorname{Cl}R^S\)</span>.</p>
</div>
<div class="exercise" title="?">
<ol type="a">
<li><p>Show that <span class="math inline">\(D^0(S) \cong {\mathbb{Z}}^{{\left\lvert {S} \right\rvert} - 1}\)</span>.</p></li>
<li><p>Suppose <span class="math inline">\(S\)</span> consists of a single place whose degree is the quantity <span class="math inline">\(d_S\)</span> appearing in the previous theorem, the least positive degree of a divisor supported on <span class="math inline">\(S\)</span>. Show that there is an exact sequence <span class="math display">\[\begin{align*}         0 \to \operatorname{Cl}^0 K \xrightarrow{\alpha} \operatorname{Cl}R^S \xrightarrow{\beta} C(d_S/I(K)) \to 0       .\end{align*}\]</span></p></li>
<li><p>Deduce that <span class="math inline">\(\alpha\)</span> is an isomorphism iff <span class="math inline">\(I(K) = d\)</span>.</p></li>
<li><p>Deduce that if <span class="math inline">\(p\in \Sigma(k(t)/k)\)</span> has degree <span class="math inline">\(d\)</span>, then <span class="math inline">\(\operatorname{Cl}R^{\left\{{p}\right\}} \cong {\mathbb{Z}}/d{\mathbb{Z}}\)</span>.</p></li>
<li><p>Deduce that if <span class="math inline">\(S = \left\{{p}\right\}\)</span> and <span class="math inline">\(\deg p = 1\)</span>, then <span class="math inline">\(\alpha: \operatorname{Cl}^0 K \to \operatorname{Cl}R^S\)</span> is an isomorphism.</p></li>
</ol>
</div>
<div class="remark">
<p>Note that if you’re given a finite set of places and ask for all of the rational functions that have zeros and poles only at those places, it is difficult to determine how close that is to filling out the entire degree zero divisor class group? If you have two degree 1 points <span class="math inline">\(p_i\)</span>, so <span class="math inline">\({\left\lvert {S} \right\rvert} = 2\)</span>, do you have a rational function whose divisor is <span class="math inline">\(p_1 - p_2\)</span>? Probably not, because then the divisor of such a function would have degree 1. You can continue this line of thought, but already using elliptic function fields you can see that all of these algebraic possibilities can occur.</p>
</div>
<div class="remark">
<p>Note that in the case where <span class="math inline">\(S\)</span> is a single point of degree <span class="math inline">\(d\)</span>, then <span class="math inline">\(d_S\)</span> is equal to the degree of the point <span class="math inline">\(d\)</span>. On the other extreme, consider what happens when <span class="math inline">\(I(K) = 1\)</span>. Then <span class="math inline">\(C(d_S)\)</span> is cyclic of order <span class="math inline">\(d\)</span>, so in (c) if we have a rational function field, we know it has degree 1 places (like <span class="math inline">\(0, \infty\)</span>), and the class group is zero. So if you take one place on <span class="math inline">\({\mathbb{P}}^1\)</span> of degree <span class="math inline">\(d\)</span> and look at the correspond affine Dedekind domain of functions that are regular away from that one place <span class="math inline">\(R^{\left\{{p}\right\}}\)</span>, then the class group is nontrivial and it’s thus not a PID. Note that <span class="math inline">\(\operatorname{Cl}^0 {\mathbb{P}}^1\)</span> is trivial, and puncturing it has an effect on the divisor class.</p>
</div>
<div class="exercise" title="?">
<ol type="a">
<li><p>Suppose <span class="math inline">\(\operatorname{Cl}^0 K\)</span> is finite, and show that every <span class="math inline">\(\operatorname{Cl}R^S\)</span> is finite.<a href="#fn46" class="footnote-ref" id="fnref46" role="doc-noteref"><sup>46</sup></a></p></li>
<li><p>Suppose <span class="math inline">\(\operatorname{Cl}^0 K\)</span> is finitely generated, and show that for all finite nonempty <span class="math inline">\(S \subset \Sigma(K/k)\)</span>, there exists a finite <span class="math inline">\(S&#39; \supset S\)</span> such that <span class="math inline">\(\operatorname{Cl}R^{S&#39;}\)</span> is trivial.</p></li>
</ol>
</div>
<div class="remark">
<p>This is the positive characteristic version of one of the basic finiteness theorems from NTI: the ring of integers of any number field has finite class group. But the <span class="math inline">\(S{\hbox{-}}\)</span>class group is always finite, since it’s a quotient of the class group, and that’s what’s happening here. It’s enough to show that the <span class="math inline">\(\operatorname{Cl}^0 K\)</span> and <span class="math inline">\(C(d_S/ I(K))\)</span> appearing in the SES in the previous theorem are finite, since the first term can only cut down the size. The groups <span class="math inline">\(\operatorname{Cl}R^S\)</span> when <span class="math inline">\(k\)</span> is finite are analogues of the <span class="math inline">\(S{\hbox{-}}\)</span>class groups of number fields. In the function field case, you can’t get away from the <span class="math inline">\(S{\hbox{-}}\)</span>class group, since if <span class="math inline">\(S= \emptyset\)</span> then <span class="math inline">\(R^S\)</span> is not an interesting Dedekind domain: it’s just <span class="math inline">\(\kappa(K)\)</span>. So you have to put something at <span class="math inline">\(\infty\)</span> to even get a 1-dimensional domain, whereas in the number field case, you always have a finite nonempty set of nonarchimedean places.</p>
<p>This allows us to deduce from the finiteness of this one geometric group the finiteness of <span class="math inline">\(S{\hbox{-}}\)</span>class groups in the characteristic <span class="math inline">\(p\)</span> case. If done correctly, this can be used to prove the finiteness of class groups of all number fields, e.g. if you do things in an adelic way in NTII.</p>
</div>
<div class="theorem" title="Trotter, 1988">
<p>The ring <span class="math inline">\(R[\cos \theta, \sin \theta]\)</span> of real trigonometric polynomials is not a UFD, while <span class="math inline">\({\mathbb{C}}[\cos \theta, \sin \theta]\)</span> is a PID.</p>
</div>
<div class="remark">
<p>Trotter shows that using <span class="math inline">\(\sin(\theta)\sin(\theta) = (1+\cos(\theta))(1-\cos(\theta))\)</span> exhibits non-unique factorization, since the terms appearing are non-associate irreducible elements in an integral domain. See Pete’s list of exercises. Note that given an affine Dedekind domain how one figures out what the infinite places are concretely, but this will come up when discussing hyperelliptic curves.</p>
</div>
<div class="remark">
<p>One exercise applies Rosen’s theorem to show that <span class="math inline">\(\operatorname{Cl}{\mathbb{R}}[\cos(\theta), \sin(\theta)] = {\mathbb{Z}}/2{\mathbb{Z}}\)</span> while <span class="math inline">\(\operatorname{Cl}{\mathbb{C}}[\cos(\theta), \sin(\theta)] = 1\)</span>. What’s happening is that over <span class="math inline">\({\mathbb{R}}\)</span>, there is perhaps one degree 2 place at <span class="math inline">\(\infty\)</span>, but after extending scalars to <span class="math inline">\({\mathbb{C}}\)</span> it breaks up into two degree 1 places.</p>
</div>
<h1 id="lecture-8-riemann-roch-spaces-part-1">Lecture 8: Riemann-Roch Spaces (Part 1)</h1>
<h2 id="setup-for-the-riemann-roch-theorem">Setup for the Riemann-Roch Theorem</h2>
<p>Setting up for the single most important theorem in the course: the Riemann-Roch theorem. We start by motivating this by considering the following property of <span class="math inline">\(K\mathrel{\vcenter{:}}= k(t)\)</span>: for any degree 1<a href="#fn47" class="footnote-ref" id="fnref47" role="doc-noteref"><sup>47</sup></a> place <span class="math inline">\(p \in \Sigma(K/k)\)</span>, there exists an <span class="math inline">\(f\in K^{\times}\)</span> such that <span class="math inline">\((f)_- = p\)</span>. In other words, <span class="math inline">\(f\)</span> is a rational function with a simple pole at the given place, and no other poles. Why? We just know precisely what all of the places are for this function field.</p>
<p>If <span class="math inline">\(p= \infty\)</span>, we can just take <span class="math inline">\(f(t) = t\)</span>, since any polynomial is regular away from <span class="math inline">\(\infty\)</span> and the valuation is <span class="math inline">\(-\deg(f) = -1\)</span> The other places <span class="math inline">\(p\)</span> correspond to <span class="math inline">\(t-\alpha\)</span> (the uniformizing element) for <span class="math inline">\(\alpha\in k\)</span>, since they correspond to other points on <span class="math inline">\({\mathbb{A}}^1_{/k}\)</span>, and so we can take <span class="math inline">\(f(t) = 1/(t-\alpha)\)</span>. This <span class="math inline">\(f\)</span> is regular at infinity since the degree of the numerator is larger than the degree of the denominator, and the denominator doesn’t vanish at any other place.</p>
<div class="remark">
<p>With some thought, it can be found that this is a <em>characteristic</em> property of rational function fields: if <span class="math inline">\(f\in K\)</span>, a one variable function field, and <span class="math inline">\(\deg(d)_- = 1\)</span><a href="#fn48" class="footnote-ref" id="fnref48" role="doc-noteref"><sup>48</sup></a> then the degree of the function is equal to the degree of the divisor of the zeros and the divisor of the poles, and thus the degree of the extension <span class="math inline">\([K: k(t)] = 1\)</span> and thus <span class="math inline">\(K = k(t)\)</span> is rational. So having a rational with a simple pole at only one point <em>only</em> happens in you’re in a rational function field.</p>
<p>On the other hand, we both wanted and used in our discussion of holomorphy rings the fact that given a nonempty finite subset <span class="math inline">\(S \subset \Sigma(K/k)\)</span>, we want to find a rational function <span class="math inline">\(f\in K^{\times}\)</span> has poles at all of the points in <span class="math inline">\(S\)</span>, so <span class="math inline">\({\operatorname{supp}}(f)_- = S\)</span>. Better yet, we’d like a bound on the degree of any such <span class="math inline">\(f\)</span>, i.e. the orders of all of these poles. If <span class="math inline">\(S\)</span> is a single place, unless the function field is rational, we can’t require the function to have a pole of degree 1 at that point. But can it admit a pole of degree at most 10, for example? This is what motivates the Riemann-Roch spaces and the Riemann-Roch theorem. If you’re trying to give a quantitative bound on how high of an order of a pole you have to allow in order to have a rational function, this comes from a key invariant called the <em>genus</em> of the function field. The theorem that will tell us about the existence of rational functions with poles of prescribed degrees in terms of the genus is precisely the Riemann-Roch theorem, so that’s where we are headed.</p>
</div>
<h2 id="the-riemann-roch-space">The Riemann-Roch Space</h2>
<div class="definition" title="Riemann-Roch Space of $D$ (Key Definition)">
<p>For <span class="math inline">\(D\in \operatorname{Div}K\)</span>, the <strong>Riemann-Roch space</strong> of <span class="math inline">\(D\)</span> is defined as <span class="math display">\[\begin{align*}   \mathcal{L}(D) \mathrel{\vcenter{:}}=\left\{{ f\in K^{\times}~{\text{s.t.}}~(t) \geq - D}\right\} \cup\left\{{0}\right\} .\end{align*}\]</span></p>
</div>
<div class="remark">
<p>This will turn out to be a <span class="math inline">\(k{\hbox{-}}\)</span>vector space, and is a sub <span class="math inline">\(k{\hbox{-}}\)</span>vector space of <span class="math inline">\(K\)</span>. One of the first things we’ll prove is that it’s always finite dimensional. This is only interesting when <span class="math inline">\(D\)</span> is linearly equivalent to an effective divisor, so we should think of <span class="math inline">\(D\)</span> as having a nonnegative degree, and in fact itself being an effective divisor. So this is the space of rational functions that have prescribes poles of a prescribed order.</p>
</div>
<div class="question">
<p>Does <span class="math inline">\(\mathcal{L}(D)\)</span> contain any rational functions other than zero?</p>
</div>
<div class="answer">
<p>For any nonzero <span class="math inline">\(f\in \mathcal{L}(D)^{\bullet}\)</span>, the divisor <span class="math inline">\(D + (f)\)</span> is effective, since <span class="math inline">\((f) \geq -D\)</span>, and also linearly equivalent to <span class="math inline">\(D\)</span>. If <span class="math inline">\(D\)</span> is not linearly equivalent to an effective divisor, this is just the zero vector space.</p>
</div>
<div class="exercise" title="?">
<p>Let <span class="math inline">\(K = k(t)\)</span> and <span class="math inline">\(n\in {\mathbb{Z}}^{\geq 0}\)</span>. Show that <span class="math display">\[\begin{align*} L(n\infty) = \left\{{f\in k[t] ~{\text{s.t.}}~\deg f \leq n}\right\} \end{align*}\]</span> and in particular is a <span class="math inline">\(k{\hbox{-}}\)</span>vector space of dimension <span class="math inline">\(n+1\)</span>.<a href="#fn49" class="footnote-ref" id="fnref49" role="doc-noteref"><sup>49</sup></a></p>
</div>
<div class="remark">
<p>Note that <span class="math inline">\(\infty\)</span> is a degree 1 place, and multiplying it by <span class="math inline">\(n\)</span> yields an effective divisor. The Riemann-Roch space here is comprised of rational functions that regular away from <span class="math inline">\(\infty\)</span>, which are polynomials, whose pole at <span class="math inline">\(\infty\)</span> has order at worst <span class="math inline">\(n\)</span>. But the order of a pole at infinity is its degree as a polynomial, since the <span class="math inline">\(\infty{\hbox{-}}\)</span>adic valuation is the negative degree, so this yields polynomials of degree at most <span class="math inline">\(n\)</span>.</p>
</div>
<h2 id="working-with-divisors">Working with Divisors</h2>
<div class="lemma" title="?">
<p>For <span class="math inline">\(D\in \operatorname{Div}K\)</span>, <span class="math display">\[\begin{align*}   \mathcal{L}(D) \neq \left\{{0}\right\} \iff 0 \text{ is equivalent to an effective divisor} .\end{align*}\]</span></p>
</div>
<div class="proof" title="?">
<p><span class="math inline">\(\implies\)</span>: If <span class="math inline">\(f\in \mathcal{L}(D)^{\bullet}\)</span>, then <span class="math inline">\(D + (f)\)</span> is effective and linearly equivalent to zero.</p>
<p><span class="math inline">\(\impliedby\)</span>: If <span class="math inline">\(D&#39; \geq 0\)</span> and <span class="math inline">\(D&#39; \sim D\)</span>, then <span class="math inline">\(D&#39; = D + (f) \geq 0\)</span>. So <span class="math inline">\((f) \geq -D\)</span> and thus <span class="math inline">\(f\in \mathcal{L}(D)\)</span>.</p>
</div>
<div class="example" title="?">
<p><span class="math inline">\(\mathcal{L}(0) = \left\{{f ~{\text{s.t.}}~(f) \geq 0}\right\} \cup\left\{{0}\right\}\)</span>, which consists of rational functions with no poles (so their divisor is the zero divisor), and thus <span class="math inline">\(\mathcal{L}(0) = \kappa(K)\)</span>. I.e., these are the constants: they are regular everywhere and have no zeros or poles. We would like this space to have <span class="math inline">\(k{\hbox{-}}\)</span>dimension 1, so we impose <span class="math inline">\(\kappa(K) = k\)</span>.</p>
</div>
<div class="exercise" title="?">
<ol type="a">
<li>Show that for all <span class="math inline">\(D\)</span>, <span class="math inline">\(\mathcal{L}(D) \in {\text{Vect}}_k\)</span>.</li>
<li><span class="math display">\[\begin{align*}       D\sim D&#39; \implies \mathcal{L}(D) \cong_{{\text{Vect}}_k} \mathcal{L}(D&#39;)     .\end{align*}\]</span></li>
</ol>
</div>
<div class="remark">
<p>You can frame the above as taking rational functions with poles of certain orders, and analyzing the orders of poles of their sums. If you take <span class="math inline">\(D&#39;\)</span> and write it as <span class="math inline">\(D + (f)\)</span> for <span class="math inline">\(f\)</span> a rational function, then <span class="math inline">\(f\)</span> should produce this isomorphism. The moral: <span class="math inline">\(\mathcal{L}(D)\)</span> only depends on the linear equivalence class of <span class="math inline">\(D\)</span>.</p>
</div>
<div class="exercise" title="?">
<p>Let <span class="math inline">\(D\in \operatorname{Div}^0 K\)</span> be a degree zero divisor, then TFAE:</p>
<ol type="a">
<li><span class="math inline">\(\dim \mathcal{L}(D) \geq 1\)</span></li>
<li><span class="math inline">\(\dim \mathcal{L}(D) = 1\)</span>,</li>
<li><span class="math inline">\(D\)</span> is principal, i.e. the divisor of a rational function or linearly equivalent to zero.</li>
</ol>
</div>
<div class="slogan">
<p>The only way a degree zero divisor can have a nontrivial Riemann-Roch space is if it’s linearly equivalent to zero.</p>
</div>
<h2 id="subspaces-and-dimension-of-riemann-roch-spaces">Subspaces and Dimension of Riemann-Roch Spaces</h2>
<div class="lemma" title="?" data-ref="lemma:divisor_order_to_subspaces">
<p>Let <span class="math inline">\(A \leq B\)</span><a href="#fn50" class="footnote-ref" id="fnref50" role="doc-noteref"><sup>50</sup></a> in <span class="math inline">\(\operatorname{Div}K\)</span>, then</p>
<ol type="a">
<li><span class="math inline">\(\mathcal{L}(A) \leq_{{\text{Vect}}_k} \mathcal{L}(B)\)</span> is a subspace,</li>
<li><span class="math inline">\(\dim \mathcal{L}(B) / \mathcal{L}(A) \leq \deg B - \deg A = \deg(B - A)\)</span>.</li>
</ol>
</div>
<div class="remark">
<p>Since <span class="math inline">\(B \geq A\)</span>, you can think of this as starting with <span class="math inline">\(A\)</span> and adding an effective divisor to get <span class="math inline">\(B\)</span>, namely <span class="math inline">\(A + (B-A) = B\)</span>. How much does that decrease the dimension of the Riemann-Roch space? At most, by the degree of <span class="math inline">\(B-A\)</span> as a divisor.</p>
</div>
<div class="corollary" title="?">
<p>For <span class="math inline">\(D\in \operatorname{Div}K\)</span>,</p>
<ol type="a">
<li>If <span class="math inline">\(\deg D &lt; 0\)</span> then <span class="math inline">\(\mathcal{L}(D) = 0\)</span>.</li>
<li>If <span class="math inline">\(\deg (D) \geq 0\)</span> then <span class="math inline">\(\dim_k \mathcal{L}(D) \leq \deg(D) + 1 &lt; \infty\)</span>.</li>
</ol>
</div>
<div class="remark">
<p>This shows that Riemann-Roch spaces are always finite dimensional, and also gives a simple upper bound on that dimension.</p>
</div>
<div class="proof" title="of corollary">
<p>For (a), a divisor of negative degree is not linearly equivalent to an effective divisor, so we might as well assume it’s effective.</p>
<p>For (b), the dimension of <span class="math inline">\(\mathcal{L}(D)\)</span> doesn’t change if <span class="math inline">\(D\)</span> is replaced by a linearly equivalent divisor, so wlog assume <span class="math inline">\(D\)</span> is effective. Now write <span class="math inline">\(D = \sum_{i=1}^r p_i\)</span> as a sum of not necessarily distinct places, and use the lemma: each time you add an effective divisor, the dimension either stays the same or increases by at most the degree of the added divisor. So start with the zero divisor, use the fact that <span class="math inline">\(\dim_k \mathcal{L}(0) = 1\)</span>, and apply the lemma <span class="math inline">\(r\)</span> times. This yields a space of dimension at most <span class="math inline">\(1 + \sum \deg p_i = \deg D\)</span>.</p>
</div>
<div class="proof" title="of lemma, part (a)">
<p>If <span class="math inline">\(A\leq B\)</span> and <span class="math inline">\(f\in \mathcal{L}(A)\)</span>, then <span class="math inline">\((f) \geq - A\)</span>. Since <span class="math inline">\(-A \geq -B\)</span>, we have <span class="math inline">\((f) \geq -A \geq -B\)</span>, so <span class="math inline">\(f\in \mathcal{L}(B)\)</span>.</p>
</div>
<p>For the next part, it’s perhaps easiest to consider the case <span class="math inline">\(k = \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span> so everything has degree 1. If you go from a divisor to adding a single degree 1 place, this lemma says that if you increase your Riemann-Roch space by either allowing a pole at a point you didn’t allow before or allowing a pole of order 1 greater, then the dimension increases by at most 1.</p>
<div class="proof" title="of lemma, part (b)">
<p>From the previous argument, we see that it’s enough to do this one place at a time. So we can easily reduce to the case <span class="math inline">\(B = A + P\)</span> for <span class="math inline">\(P\)</span> some place of degree not necessarily equal to 1 (since we’re not assuming <span class="math inline">\(k=\mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span>), using that fact that <span class="math inline">\(B \geq A\)</span>. So choose an element <span class="math inline">\(t\in K\)</span> such that <span class="math display">\[\begin{align*}   v_p(t) = v_p(B) = v_p(A) + 1 ,\end{align*}\]</span> since <span class="math inline">\(B\)</span> is built from <span class="math inline">\(A\)</span> by adding a single copy of <span class="math inline">\(P\)</span>. For <span class="math inline">\(f\in \mathcal{L}(B)\)</span>, we have by definition<a href="#fn51" class="footnote-ref" id="fnref51" role="doc-noteref"><sup>51</sup></a> <span class="math display">\[\begin{align*}   v_p(f) \geq -v_p(B) = -v_p(t) ,\end{align*}\]</span> and so by bringing <span class="math inline">\(t\)</span> to the other side we get <span class="math inline">\(v_p(ft) \geq 0\)</span> and thus <span class="math inline">\(ft\in R_p\)</span> (the corresponding local ring). This allows us to define a <span class="math inline">\(k{\hbox{-}}\)</span>linear map <span class="math display">\[\begin{align*}   \psi: \mathcal{L}(B) &amp;\to k(P) = R_p/\mathfrak{m}_p \\ f &amp; \mapsto ft \mod \mathfrak{m}_p .\end{align*}\]</span> In words, we multiply <span class="math inline">\(f\)</span> by <span class="math inline">\(t\)</span> to make it <span class="math inline">\(p{\hbox{-}}\)</span>adically regular, then look at its image in the residue field. The kernel is precisely those elements <span class="math inline">\(x\)</span> such that multiplying by <span class="math inline">\(t\)</span> lands in the maximal ideal <span class="math inline">\(\mathfrak{m}_p\)</span>, which means that <span class="math inline">\(v(x)\)</span> as 1 more than it could have been. So the kernel is all elements such that multiplying by <span class="math inline">\(t\)</span> and taking the valuation gives at least one, thus <span class="math display">\[\begin{align*}   \ker \psi = \left\{{f\in \mathcal{L}(B) ~{\text{s.t.}}~v_p(f) \geq -v_p(t) + 1 = -v_p(A)}\right\} = \mathcal{L}(A) ,\end{align*}\]</span> which follows since <span class="math inline">\(B\)</span> and <span class="math inline">\(A\)</span> only differ at <span class="math inline">\(P\)</span>, since <span class="math inline">\(B = A+P\)</span>, so the divisors <span class="math inline">\(A, B\)</span> have the same coefficient at every other place. We thus have the following diagram:</p>
<p><p style="text-align:center;"> <img class="tikz" src="/home/zack/SparkleShare/github.com/Notes/Class_Notes/2020/Fall/Algebraic Curves/4f4f355b139738f19ed6cee6a6f2f92d89b0daab.svg"></p></p>
<p><a href="https://q.uiver.app/?q=WzAsMTAsWzAsMCwiMCJdLFsxLDAsIlxcbWF0aGNhbHtMfShBKSJdLFsyLDAsIlxcbWF0aGNhbHtMfShCKSJdLFszLDAsIlxcbWF0aGNhbHtMfShCKS9cXG1hdGhjYWx7TH0oQSkiXSxbNCwwLCIwIl0sWzAsMiwiMCJdLFsxLDIsIlxcbWF0aGNhbHtMfShBKSJdLFsyLDIsIlxcbWF0aGNhbHtMfShCKSJdLFszLDIsIlJfcCAvIFxcbWF0aGZyYWt7bX1fcCJdLFs0LDIsIlxcY2RvdHMiXSxbMCwxLCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFsxLDIsIiIsMCx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzIsMywiIiwwLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoiZXBpIn19fV0sWzMsNCwiIiwwLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoiZXBpIn19fV0sWzEsNiwiIiwwLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsyLDcsIiIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMyw4LCIiLDAseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9LCJib2R5Ijp7Im5hbWUiOiJkb3R0ZWQifX19XSxbMCw1LCIiLDIseyJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzYsNywiIiwxLHsic3R5bGUiOnsidGFpbCI6eyJuYW1lIjoiaG9vayIsInNpZGUiOiJ0b3AifX19XSxbNyw4XSxbNSw2LCIiLDIseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFs4LDldXQ==">Link to diagram</a></p>
<p>where we can conclude that the indicated injection exists, and thus <span class="math display">\[\begin{align*}   \dim \mathcal{L}(B) / \mathcal{L}(A) \leq [k(p) : k] = \deg P .\end{align*}\]</span></p>
</div>
<div class="fact">
<p>For <span class="math inline">\(p\in \Sigma(K/k)\)</span> with residue field <span class="math inline">\(k_p\)</span> and <span class="math inline">\([k_p: k] = d\)</span>, defining <span class="math inline">\(K_p\)</span> as the completion of <span class="math inline">\(K\)</span> with respect to <span class="math inline">\({\left\lvert {{\,\cdot\,}} \right\rvert}_p\)</span>, there is an isomorphism <span class="math inline">\(K_p \cong k_p((t))\)</span>, a formal Laurent series field. One issue is that if <span class="math inline">\(d =1\)</span> then <span class="math inline">\(k \subset k_p\)</span>, but not for general <span class="math inline">\(d\geq 2\)</span>. However, taking the completion results in <span class="math inline">\(k \subset K_p\)</span> again. This shouldn’t be too surprising from the perspective of local fields in NTII. There is a structure theory of complete discretely valued fields. This is an <em>equicharacteristic</em> such field, i.e. the characteristic of the field agrees with that of the residue field, and all equicharacteristic discretely valued fields will be isomorphic to a ring of formal Laurent series. This isn’t a fact of the geometry of curves.</p>
</div>
<h2 id="bounds-on-dimensions">Bounds on Dimensions</h2>
<div class="definition" title="$\ell(D)$: The dimension of a Riemann-Roch space">
<p>For <span class="math inline">\(D\in \operatorname{Div}K\)</span>, define <span class="math display">\[\begin{align*}   \ell(D) \mathrel{\vcenter{:}}=\dim_k \mathcal{L}(D) .\end{align*}\]</span></p>
</div>
<div class="exercise" title="?">
<p>If <span class="math inline">\(D\in \operatorname{Div}k(t)\)</span>, show that <span class="math display">\[\begin{align*}   \ell(D) =  \begin{cases} \deg(D) + 1 &amp; \deg D \geq 0 \\ 0 &amp; \text{else}. \end{cases} \end{align*}\]</span></p>
</div>
<div class="remark">
<p>Recall that in a rational function field, every degree zero divisor is principal, and if you adjust by a principal divisor, you don’t change <span class="math inline">\(\ell(D)\)</span>. This means that in any rational function field, any two divisors of the same degree are going to be linearly equivalent, and thus <span class="math inline">\(\ell(D)\)</span> will only depend on <span class="math inline">\(\deg D\)</span>. So rational function fields are much simpler than the fully general case.</p>
</div>
<div class="problem" title="The Riemann-Roch Problem">
<p>Give good upper and lower bounds on <span class="math inline">\(\ell(D)\)</span> and especially <span class="math inline">\(\ell(nD)\)</span> as a function of <span class="math inline">\(n\)</span>.</p>
</div>
<div class="remark">
<p>The stronger version of knowing <span class="math inline">\(\ell(D)\)</span> in all cases is unsolvable. If we knew the dimension of every Riemann-Roch space, then we would know too much! E.g. about Weierstrass points on elliptic curves. (?) Looking at positive multiples <span class="math inline">\(nD\)</span> of a single divisor is common. If <span class="math inline">\(D\)</span> is a single point, then the support of the divisor is the collection of places that appear with nonzero coefficients, <span class="math inline">\(nD\)</span> has the same support. This is analogous to not allowing poles at new points, but rather allowing poles at the same points of higher order. So it’s reasonable to ask about asymptotic behavior of <span class="math inline">\(\ell(nD)\)</span> in <span class="math inline">\(n\)</span>. Secretly this is a kind of Hilbert function computation: if you have a graded algebra and you look at dimensions of its graded pieces, then there is a theorem that the Hilbert function is a polynomial for <span class="math inline">\(n\gg 1\)</span>. Here, <span class="math inline">\(\ell(nD)\)</span> will be a linear polynomial for <span class="math inline">\(n\gg 1\)</span> by the Riemann-Roch theorem, so there are some stabilization phenomena, but given a random divisor of low degree it is difficult to determine <span class="math inline">\(\ell(D)\)</span>.</p>
</div>
<div class="remark">
<p>The last corollary gave us a lower bound: <span class="math display">\[\begin{align*}   \deg(D) \geq 0 \implies \deg(D) - \ell(D) \geq -1 .\end{align*}\]</span> This can also be thought of as an lower bound on <span class="math inline">\(\ell(D)\)</span> in terms of <span class="math inline">\(\deg(D)\)</span>, and next up we’ll try to find an upper bound:</p>
</div>
<div class="proposition" title="?">
<p>There exists a <span class="math inline">\(\delta = \delta(K/k) \in {\mathbb{Z}}\)</span> such that for all <span class="math inline">\(A\in \operatorname{Div}K\)</span>, we have <span class="math display">\[\begin{align*}   \deg A - \ell(A) \leq \delta .\end{align*}\]</span></p>
</div>
<h1 id="lecture-8-riemann-roch-spaces-part-2">Lecture 8: Riemann-Roch Spaces (Part 2)</h1>
<p>Recall the proposition we ended with last time:</p>
<div class="proposition" title="?" data-ref="prop:deg_bounded_above">
<p>There exists a <span class="math inline">\(\delta = \delta(K/k) \in {\mathbb{Z}}\)</span> such that for all <span class="math inline">\(A\in \operatorname{Div}K\)</span>, we have <span class="math display">\[\begin{align*}   \deg A - \ell(A) \leq \delta .\end{align*}\]</span></p>
</div>
<div class="exercise" title="?">
<p>This proposition is enough to show the existence of rational functions whose polar divisor has as its support any finite subset <span class="math inline">\(S \subset \Sigma(K/k)\)</span>.</p>
</div>
<p>Most of the lecture will be the proof of this statement.</p>
<h2 id="proof-of-upper-bound">Proof of Upper Bound</h2>
<p>Rewriting  yields <span class="math display">\[\begin{align*}   A_2, A_2 \in \operatorname{Div}K,\, A_1 \leq A_2 \implies \deg A_1 - \ell(A_1) \leq \deg A_2 - \ell(A_2) .\end{align*}\]</span></p>
<p>We now proceed to prove  in several steps.</p>
<h3 id="step-1">Step 1</h3>
<p>Choose an <span class="math inline">\(x\in K\setminus k\)</span> and set <span class="math inline">\(B\mathrel{\vcenter{:}}=(x)_-\)</span>.</p>
<div class="claim">
<p>There exists a <span class="math inline">\(C\geq 0\)</span> such that for all <span class="math inline">\(n\geq 0\)</span>, <span class="math display">\[\begin{align*}   \ell(nB + C) \geq (n+1) \deg B .\end{align*}\]</span></p>
</div>
<p>So we give ourselves a certain effective divisor: the divisor of poles of an arbitrary nonconstant element. We can then get a preliminary asymptotic lower bound, not on the same Riemann-Roch space, but on a new one after augmenting the space by some fixed effective divisor <span class="math inline">\(C\)</span>.</p>
<div class="proof" title="?">
<p>Since <span class="math inline">\(K/k(x)\)</span> has finite degree, let <span class="math inline">\(u_1,\cdots, u_d\)</span> be a basis for <span class="math inline">\(K\)</span> consisting of finitely many rational functions. Note that <span class="math inline">\(d = [K: k(x)]\)</span>, and is also equal to <span class="math inline">\(\deg B\)</span> since <span class="math inline">\(B\)</span> was a divisor of poles. Noting that the divisor groups are free commutative groups, so taking any finite number of elements in <span class="math inline">\(\bigoplus {\mathbb{Z}}\)</span>, we can find an element that is less than or equal to all of them. Thus we can choose a <span class="math inline">\(C\geq 0\)</span> such that <span class="math display">\[\begin{align*}   (u_i) \geq -C &amp;&amp; \forall 1\leq i \leq d .\end{align*}\]</span></p>
<p>Since the <span class="math inline">\(u_i\)</span> are <span class="math inline">\(k(x){\hbox{-}}\)</span>linearly independent in <span class="math inline">\(K\)</span>, the functions <span class="math inline">\(\left\{{x^i u_j ~{\text{s.t.}}~\, 0\leq i \leq n,\,\, 1\leq j \leq d}\right\}\)</span> are <span class="math inline">\(k{\hbox{-}}\)</span>linearly independent, since any <span class="math inline">\(k{\hbox{-}}\)</span>linear relation would immediately yield a <span class="math inline">\(k(x){\hbox{-}}\)</span>linear relation among the <span class="math inline">\(u_i\)</span>.</p>
<div class="exercise" title="?">
<p>If <span class="math inline">\(f_i\in \mathcal{L}(D_i)\)</span>, so the poles of <span class="math inline">\(f\)</span> are no worse than <span class="math inline">\(D_i\)</span>, then the poles of <span class="math inline">\(f_1 f_2\)</span> are bounded by <span class="math inline">\(D_1 + D_2\)</span> and thus <span class="math inline">\(f_1 f_2 \in \mathcal{L}(D_1 + D_2)\)</span>.</p>
</div>
<p>Now we can note that there are <span class="math inline">\((n+1)d = \deg B\)</span> many elements here, and moreover, these all lie in <span class="math inline">\(\mathcal{L}(nB + C)\)</span> since each <span class="math inline">\((u_j) \geq -C\)</span> and <span class="math inline">\((x) \geq - B\)</span> and <span class="math inline">\(i\leq n\)</span>. From this we can conclude <span class="math display">\[\begin{align*}   \ell(nB+c) \geq (n+1) d = (n+1) \deg B .\end{align*}\]</span></p>
</div>
<h3 id="step-2">Step 2</h3>
<p>We’ll now show that throwing in the fixed divisor <span class="math inline">\(C\)</span> can’t increase the Riemann-Roch space that much, and in fact <span class="math display">\[\begin{align*}   \ell(nB + C) \leq \ell(nB) + \deg C ,\end{align*}\]</span> and so we get a bound <span class="math display">\[\begin{align*}   \ell(nB)  &amp;\geq \ell(nB + C) - \deg C \\ &amp;\geq (n+1) \deg B - \deg C \\ &amp;= \deg(nB) + \qty{ [K:k(x)] - \deg C} \\ &amp;\mathrel{\vcenter{:}}=\deg(nB) \pm \gamma ,\end{align*}\]</span></p>
<p>which shows that <span class="math display">\[\begin{align}   \forall n\geq 0,\, \, \deg(nB) - \ell(nB) \leq \gamma \label{eq:step_2_bound} .\end{align}\]</span></p>
<p>A problem here is that <span class="math inline">\(\gamma\)</span> depends upon everything that we’ve done so far, and this inequality only holds for multiples of a fixed divisor (an infinite ray emanating from <span class="math inline">\(B\)</span>).</p>
<h3 id="step-3">Step 3</h3>
<div class="claim">
<p>For all <span class="math inline">\(A\in \operatorname{Div}K\)</span>, there exist <span class="math inline">\(A_1, D \in \operatorname{Div}K\)</span> and <span class="math inline">\(n\geq 0\)</span> such that <span class="math inline">\(A \leq A_1\)</span>, <span class="math inline">\(A_1 \sim D\)</span>, and <span class="math inline">\(D\leq nB\)</span>. I.e. although it can’t literally be true that <span class="math inline">\(A \leq nB\)</span>, it will be up to linear equivalence.</p>
</div>
<p>To see this, set <span class="math inline">\(A_1 \mathrel{\vcenter{:}}=\max(A, 0)\)</span>. Using the bound from , for <span class="math inline">\(n\gg 0\)</span> we have <span class="math display">\[\begin{align*}   \ell(nB - A_1)  &amp;\geq \ell(nB) - \deg A_1 \\ &amp;\geq \deg(n B) - \gamma - \deg A_1 \\ &amp;&gt; 0 ,\end{align*}\]</span> and so there exists a <span class="math inline">\(z\in \mathcal{L}(nB - A_1)^{\bullet}\)</span>, a nontrivial element in the linear system.</p>
<div class="remark">
<p>The first inequality is an application of our lemma because <span class="math inline">\(A_1\)</span> is effective, which was the point of this maneuver. I.e., in order to get from <span class="math inline">\(nB - A_1\)</span> to <span class="math inline">\(nB\)</span>, we added <span class="math inline">\(A_1\)</span>, which can only increase the dimension of the space by at most <span class="math inline">\(\deg A_1\)</span>. Finally, in the last inequality, we use the fact that <span class="math inline">\(B\)</span> has positive degree since it’s a divisor of poles of a nonconstant rational function, and the remaining terms don’t depend on <span class="math inline">\(n\)</span>, so we can make <span class="math inline">\(\deg(nB)\)</span> arbitrarily large.</p>
</div>
<p>So now set <span class="math inline">\(D \mathrel{\vcenter{:}}= A_1 - (z)\)</span>, then <span class="math inline">\(A_1 \sim D\)</span> and since it’s in the linear system, <span class="math display">\[\begin{align*} (z) \geq - (nB - A_1) = A_1 - nB \end{align*}\]</span> so <span class="math inline">\(-(z) \leq nB - A_1\)</span> and by adding <span class="math inline">\(A_1\)</span> to both sides, we obtain <span class="math display">\[\begin{align*}   0 = A_1 - (z) \leq nB .\end{align*}\]</span></p>
<p>What have we shown? For any divisor <span class="math inline">\(D\)</span>, we can make it less than <span class="math inline">\(nB\)</span> for some <span class="math inline">\(n\)</span>, up to linear equivalence.</p>
<h3 id="step-4">Step 4</h3>
<p>Finally, for <span class="math inline">\(A\in \operatorname{Div}K\)</span>, choose <span class="math inline">\(A_1, D\)</span> as in the previous step, so <span class="math inline">\(A\leq A_1 \sim D \leq nB\)</span>. Then <span class="math display">\[\begin{align*}   \deg A - \ell(A)  &amp;\leq \deg(A_1) - \ell(A) &amp;&amp; \text{using } A\leq A_1\\ &amp;= \deg(D) - \ell(D) &amp;&amp; \text{changing within linear equivalence class}\\\ &amp;\leq \deg(nB) - \ell(nB) \\ &amp;\leq \gamma .\end{align*}\]</span></p>
<p><span class="math inline">\(\hfill\blacksquare\)</span></p>
<h2 id="genus">Genus</h2>
<div class="definition" title="Genus (Important!)">
<p>The <strong>genus</strong> of <span class="math inline">\(K/k\)</span> is defined as <span class="math display">\[\begin{align*}   g \mathrel{\vcenter{:}}=\max_{A\in \operatorname{Div}K}(\deg(A) - \ell(A) + 1) .\end{align*}\]</span> This exists by the , since this set is bounded above.</p>
</div>
<div class="exercise" title="?">
<p>Show that <span class="math inline">\(g\geq 0\)</span> always and <span class="math display">\[\begin{align*}   g(k(t)/k) = 0 .\end{align*}\]</span></p>
</div>
<div class="remark">
<p>Note that if the <span class="math inline">\(+1\)</span> is mostly a correction factor to match up with the topological genus of <span class="math inline">\({\mathbb{P}}^1_{/{\mathbb{C}}}\)</span>. That the genus is non-negative should come from the lower bound we had from before. It turns out that over <span class="math inline">\(k={\mathbb{C}}\)</span>, this genus will agree on the nose with the topological genus of the corresponding compact Riemann surface.</p>
</div>
<div class="theorem" title="Riemann&#39;s Inequality">
<p>If <span class="math inline">\(K/k\)</span> is a function field of genus <span class="math inline">\(g\)</span>,</p>
<ol type="a">
<li><p>For all <span class="math inline">\(A\in \operatorname{Div}K\)</span>, <span class="math display">\[\begin{align*}       \ell(A) \geq \deg(A) + 1 - g     .\end{align*}\]</span></p></li>
<li><p>There exists a <span class="math inline">\(c = c(K) \in {\mathbb{Z}}\)</span> such that for all <span class="math inline">\(A \in \operatorname{Div}K\)</span>, <span class="math display">\[\begin{align*}       \deg(A) \geq c \implies \ell(A) = \deg(A) - g + 1     .\end{align*}\]</span></p></li>
</ol>
</div>
<div class="remark">
<p>This says that the dimension of the linear system is very close to the degree of the corresponding divisor, and is only off by a constant factor <span class="math inline">\(g\)</span>. Part (a) is literally just a rearrangement of the definition of the genus. Part (b) says that if you assume <span class="math inline">\(A\)</span> has sufficiently large degree, this upper bound becomes an equality.</p>
</div>
<div class="proof" title="of b">
<p>By the definition of <span class="math inline">\(g\)</span>, since it is a maximum there exists an <span class="math inline">\(A_0\)</span> such that <span class="math display">\[\begin{align*}   g = \deg(A_0) - \ell(A_0) + 1 .\end{align*}\]</span> Set <span class="math inline">\(c\mathrel{\vcenter{:}}=\deg(A_0) + g\)</span>. Then if <span class="math inline">\(\deg(A) \geq c\)</span>, we have <span class="math display">\[\begin{align*}   \ell(A - A_0)  &amp;\geq \deg(A-A_0) - g + 1 \\ &amp;\geq c - \deg(A_0) - g + 1 \\ &amp;= 1 ,\end{align*}\]</span> so there exists a <span class="math inline">\(z\in \mathcal{L}(A- A_0)^{\bullet}\)</span> since the dimension is at least 1.</p>
<p>Now set <span class="math inline">\(A&#39; \mathrel{\vcenter{:}}= A + (z)\)</span>, and note that <span class="math inline">\(A&#39; \geq A_0\)</span>. Thus <span class="math display">\[\begin{align*}   \deg(A) - \ell(A)  &amp;= \deg(A&#39;) - \ell(A&#39;) \\ &amp;\geq \deg(A_0) - \ell(A_0) &amp;&amp; \text{by the lemma}\\ &amp;=g-1 .\end{align*}\]</span></p>
<p>By maximality of the genus, we have <span class="math inline">\(\deg(A) - \ell(A) \leq g-1\)</span>, which forces equality</p>
</div>
<p>Next up: how to we make this inequality into an equality? It turns out that there is some different divisor <span class="math inline">\(D&#39;\)</span> and we can subtract off <span class="math inline">\(\ell(D&#39;)\)</span>, and that will be the Riemann-Roch theorem.</p>
<h1 id="lecture-9-todo">Lecture 9 (Todo)</h1>
<h1 id="lecture-10a-todo">Lecture 10A (Todo)</h1>
<h1 id="lecture-10b-todo">Lecture 10B (Todo)</h1>
<h1 id="lecture-10c-todo">Lecture 10C (Todo)</h1>
<h1 id="lecture-11a-weils-proof-of-riemann-roch">Lecture 11A: Weil’s Proof of Riemann-Roch</h1>
<p>Let <span class="math inline">\(K_{/k}\)</span> be a one variable function field, finitely generated of transcendence degree one, with <span class="math inline">\(\kappa(K) = k\)</span>, so <span class="math inline">\(k\)</span> is algebraically closed in <span class="math inline">\(K\)</span>. Define the <em>small Adele ring</em> associated to <span class="math inline">\(K\)</span>, as the restricted direction product with respect to <span class="math inline">\(\left\{{R_v ~{\text{s.t.}}~v\in \Sigma(K/k)}\right\}\)</span>:</p>
<p><span class="math display">\[\begin{align*} A_k \mathrel{\vcenter{:}}=\prod^{\text{res}}_{v\in \Sigma(K/k)} K = \left\{{(x_v) \in K^{\Sigma(K/k)} ~{\text{s.t.}}~x_v \in R_v \text{ for a.e. } v }\right\} ,\end{align*}\]</span> where each factor is a copy of <span class="math inline">\(K\)</span>. Note that a <em>restricted</em> direct product is when you have a family of sets, and for each set you also attach a subset. Then if you have a tuple in the entire direct product, it’s in the restricted direct product iff for all but finitely many coordinates lie in a given subset. Here the subset is the valuation ring <span class="math inline">\(R_v\)</span>. So these are tuples of elements of <span class="math inline">\(K\)</span>, indexed by places, where each element has a <span class="math inline">\(p{\hbox{-}}\)</span>adic valuation and the only restriction is that (except for finitely many cases) we want this valuation to be nonnegative.</p>
<div class="remark">
<p>To get the <em>big</em> Adele ring, you’d replace <span class="math inline">\(K\)</span> with its completion with respect to the <span class="math inline">\(p{\hbox{-}}\)</span>adic valuation. If <span class="math inline">\(k\)</span> is finite, then this is equal to the positive characteristic Adele ring from NTII. If you complete, then you get a complete discretely valued field whose residue field equals the residue field at the place <span class="math inline">\(v\)</span>. So for finite extensions of <span class="math inline">\(k\)</span>, the residue will be finite iff <span class="math inline">\(k\)</span> is finite, and from the structure theory of discretely valued fields, this field has a natural topology: the adic topology, coming from the inverse limit. This will be locally compact iff the residue field is finite. Here, since the ground field is infinite, even passing to the completion wouldn’t yield anything locally compact. So there’s no advantage to passing to the completion, although there’s no harm either.</p>
</div>
<p>Note that <span class="math inline">\(A_k\)</span> is a ring, and in fact a <span class="math inline">\(K{\hbox{-}}\)</span>algebra, but we will only need its structure as a <span class="math inline">\(K{\hbox{-}}\)</span>vector space. This structure comes from embedding <span class="math inline">\(K\hookrightarrow A_k\)</span> diagonally, so <span class="math inline">\(x \mapsto [x, x, \cdots]\)</span>, and pull back <span class="math inline">\(v\in \Sigma(K/k)\)</span>, remembering that every element of <span class="math inline">\(K\)</span> (a rational function) is regular except for finitely many <span class="math inline">\(v\)</span>.</p>
<p>If we have a valuation on <span class="math inline">\(K\)</span>, we can consider a place <span class="math inline">\(p\)</span> and projecting onto the <span class="math inline">\(k\)</span>th factor: <span class="math display">\[\begin{align*}   A_j %   \xrightarrow[]{\pi_p}\mathrel{\mkern-14mu}\rightarrow  K \xrightarrow{v_p} {\mathbb{Z}}\cup\left\{{\infty}\right\} .\end{align*}\]</span></p>
<p>So we now attach an adelic version of the Riemann-Roch space: for <span class="math inline">\(D\in \operatorname{Div}K\)</span>, we set <span class="math display">\[\begin{align*}   \mathcal{A}_k(D) \mathrel{\vcenter{:}}=\left\{{ \alpha \in \mathcal{A}_K ~{\text{s.t.}}~v_p(\alpha) \geq -v_p(D) \, \forall p \in \Sigma(K/k)}\right\} .\end{align*}\]</span> The only difference here is that the usual space is over <span class="math inline">\(K\)</span>, and here we’re over <span class="math inline">\(\mathcal{A}_K\)</span>, which is a much larger space. This makes things easier, however, in the same sense that studying a large collection of local fields is easier than studying the corresponding global field. Note that the <span class="math inline">\(p{\hbox{-}}\)</span>adic valuation <span class="math inline">\(v_p\)</span> is just the coefficient of <span class="math inline">\(p\)</span> in the divisor, and <span class="math inline">\(\mathcal{A}_K \cap K\)</span> yields the usual Riemann-Roch space.</p>
<div class="exercise" title="?">
<ol type="a">
<li><p>Show that <span class="math inline">\(\mathcal{A}_K(D)\)</span> is an <span class="math inline">\(k{\hbox{-}}\)</span>subspace of <span class="math inline">\(\mathcal{A}_K\)</span>.<a href="#fn52" class="footnote-ref" id="fnref52" role="doc-noteref"><sup>52</sup></a></p></li>
<li><p>Show that (just as for the Riemann-Roch space) <span class="math inline">\(D_1 \leq D_2 \implies \mathcal{A}_K(D_1) \subseteq \mathcal{A}_K(D_2)\)</span>.</p></li>
</ol>
</div>
<div class="lemma" title="?">
<p><span class="math display">\[\begin{align*}   D_1 \leq D_2 \implies \dim_k \mathcal{A}_K(D_2) / \mathcal{A}_K(D_1) = \deg D_2 - \deg D_1 .\end{align*}\]</span></p>
</div>
<p>Note that this is the adelic analogue of our first lemma on Riemann-Roch spaces, now with an equality instead of being bounded above.</p>
<div class="proof" title="?">
<p>As we did before, by induction we can assume <span class="math inline">\(D_2 = D_1 + p\)</span> for some <span class="math inline">\(p\in \Sigma(K/k)\)</span>, i.e. we can go from the smaller divisor to the bigger one by repeatedly adding closed points. Then choose an element <span class="math inline">\(t\in k^{\times}\)</span> such that <span class="math inline">\(v_p(t) = v_p(D_2)\)</span>, and define a similar map <span class="math display">\[\begin{align*}   \phi \mathcal{A}_K(D_2) &amp;\to k_p \\ \alpha &amp;\mapsto (t\alpha p) \mod {\mathfrak{m}}_p .\end{align*}\]</span> Why? Once you multiply by <span class="math inline">\(t\)</span>, note that we’re looking in the <span class="math inline">\(p\)</span>th component. The condition before was that the valuation at the <span class="math inline">\(p\)</span>th component was at least <span class="math inline">\(-v_p(D_2)\)</span>, but now we’re adding <span class="math inline">\(v_p(D_2)\)</span>. This yields a nonnegative valuation, making the image lie inside the corresponding local ring, so it makes sense to consider it modulo the maximal ideal to get an element of the residue field. As before, it should be clear that this is <span class="math inline">\(k{\hbox{-}}\)</span>linear, <span class="math inline">\(\ker \phi = \mathcal{A}_K(D_1)\)</span>, and is surjective. The kernel are exactly those elements such that multiplying by <span class="math inline">\(t\)</span> makes the <span class="math inline">\(p{\hbox{-}}\)</span>adic valuation at least 1, since that’s what the maximal ideal is. This is indeed <span class="math inline">\(\mathcal{A}_K(D_1)\)</span>, since <span class="math inline">\(D_1\)</span> and <span class="math inline">\(D_2\)</span> are the same except for the added condition <span class="math inline">\(D_2 = D_1 + p\)</span> at <span class="math inline">\(p\)</span>.<br />
</p>
<p>So the main difference is that the map is now <em>surjective</em>, which was not true for the original Riemann-Roch space. Why? This is a purely local situation. Take an element which is zero away from the <span class="math inline">\(p\)</span> component, which is easy to do since zero is in <span class="math inline">\(R_v\)</span> for any <span class="math inline">\(v\)</span>. So can you find an element of <span class="math inline">\(k\)</span> such that multiplying by <span class="math inline">\(t\)</span> and reducing modulo the maximal ideal yields every element of the residue field?</p>
</div>
<div class="theorem" title="2.13">
<p>For all <span class="math inline">\(D\)</span>, <span class="math display">\[\begin{align*}   \dim_k \mathcal{A}_K / \qty{\mathcal{A}_K(D) + K } = \iota(D) \mathrel{\vcenter{:}}=\ell(D) - \deg(D) + g - 1 ,\end{align*}\]</span> where <span class="math inline">\(\iota(D)\)</span> is the index of speciality of the divisor, which measures the discrepancy between the degree and the dimension.</p>
</div>
<div class="remark">
<p>This says that adding <span class="math inline">\(K\)</span> into the adelic Riemann-Roch space results in a big <span class="math inline">\(k{\hbox{-}}\)</span>vector space, having high dimension in the infinite dimensional <span class="math inline">\(k{\hbox{-}}\)</span>vector space <span class="math inline">\(\mathcal{A}_K\)</span>.</p>
</div>
<div class="proof" title="Step 1">
<p>For divisors <span class="math inline">\(A_1 \leq A_2\)</span>, we have a short exact sequence of <span class="math inline">\(k{\hbox{-}}\)</span>vector spaces <span class="math display">\[\begin{align*}   0 \to \mathcal{L}(A_2) / \mathcal{L}(A_1) \xrightarrow{\sigma_1} \mathcal{A}_K(A_2) / \mathcal{A}_K(A_1) \xrightarrow{\sigma_2} \qty{\mathcal{A}_K(A_2) + K} / \qty{\mathcal{A}_K(A_1) + K } \to 0 .\end{align*}\]</span> The first thing we did was compute the dimension of the middle quotient space, which was <span class="math inline">\(\deg D_2 - \deg D_1\)</span>. Note that <span class="math inline">\(\sigma_2\)</span> is a quotient map, but <span class="math inline">\(\sigma_1\)</span> just comes from embedding <span class="math inline">\(K\hookrightarrow\mathcal{A}_K\)</span>. To show exactness, the only nontrivial part is that <span class="math inline">\(\ker(\sigma_2) \subset \operatorname{im}(\sigma_1)\)</span>. So take an element <span class="math inline">\(\alpha\in \mathcal{A}_K(A_1) \mod \mathcal{A}_K(A_1)\)</span> such that <span class="math inline">\(\sigma_2(\alpha) = 0\)</span>, so there exists an <span class="math inline">\(x\in K\)</span> such that <span class="math inline">\(\alpha-x \in \mathcal{A}_K(A_1)\)</span> by definition of being zero in the last quotient. Since <span class="math inline">\(\mathcal{A}_K(A_1) \subseteq \mathcal{A}_K(A_2)\)</span>, we have that <span class="math inline">\(x\in \mathcal{A}_K(A_2) \cap K \mathrel{\vcenter{:}}=\mathcal{L}(A_2)\)</span>. This follows because <span class="math inline">\(\alpha, \alpha-x\)</span> are both in <span class="math inline">\(\mathcal{A}_K(A_2)\)</span>. Thus we have <span class="math display">\[\begin{align*}   \alpha + \mathcal{A}_K(A_1) = x + \mathcal{A}_K(A_1) = \sigma\qty{x + \alpha(A_1)} .\end{align*}\]</span></p>
</div>
<div class="proof" title="Step 2">
<p>We can now compute the dimension of this quotient. Using step 1 and Lemma 2.12, we get <span class="math display">\[\begin{align*}   \dim_k\qty{ \mathcal{A}_K(A_2) + K } / \qty{ \mathcal{A}_K(A_1) + K } &amp;= \dim_k \mathcal{A}_K(A_2) / \mathcal{A}_K(A_1) - \dim_k \mathcal{L}(A_2) / \mathcal{L}(A_1) \\ &amp;= \qty{\deg A_1 - \ell(A_2) } - \qty{\deg A_1 - \ell(A_1) } \\ &amp;= \iota(A_1) - \iota(A_2) ,\end{align*}\]</span> where the last step follows from adding and subtracting <span class="math inline">\(g-1\)</span>.</p>
</div>
<div class="proof" title="Step 3">
<p>By step 2, it is enough to show that for all <span class="math inline">\(A_1 \in \operatorname{Div}K\)</span>, there exists a bigger divisor <span class="math inline">\(A_2 \geq A_1\)</span> such that <span class="math inline">\(\iota(A_2) = 0\)</span> (by just adding closed points) and <span class="math inline">\(\mathcal{A}_K(A_2) + K = \mathcal{A}_K\)</span>. By Riemann’s inequality, we have <span class="math inline">\(\iota(A_2) =0\)</span> if <span class="math inline">\(\deg A_2 \gg 0\)</span>, so choose such an <span class="math inline">\(A_2 \geq A_1\)</span>. Thus we’re reduced to showing that if <span class="math inline">\(\iota(B) = 0\)</span> for all <span class="math inline">\(B\in \operatorname{Div}K\)</span>, then <span class="math inline">\(\mathcal{A}_K = \mathcal{A}_K(B) + K\)</span>. We’ll do this by choosing another large effective divisor.<a href="#fn53" class="footnote-ref" id="fnref53" role="doc-noteref"><sup>53</sup></a></p>
<p>Let <span class="math inline">\(B_1 \geq B\)</span>, then we have <span class="math display">\[\begin{align*}   \ell(B_1)  &amp;\leq \deg(B_1) + \ell(B) - \deg(B) \\ &amp;= \deg(B_1) - g + 1 .\end{align*}\]</span> Also, Riemann’s inequality gives <span class="math inline">\(\ell(B_1) \geq \deg(B_1) - g + 1\)</span>, so we have equality. Thus any divisor greater than or equal to a non-special divisor is again non-special.<br />
</p>
<p>We want to take an arbitrary element of the Adele ring and show that it differs from an element of the adelic Riemann-Roch space associated to <span class="math inline">\(B\)</span> by an element of <span class="math inline">\(K\)</span>, so we’ll cleverly choose a divisor in order to do this. So take an arbitrary element <span class="math inline">\(\alpha\in \mathcal{A}_K\)</span> of the Adele ring, then we may choose <span class="math inline">\(B_1 \geq B\)</span> such that <span class="math inline">\(\alpha\in \mathcal{A}_K(B_1)\)</span>. I.e., choosing <span class="math inline">\(B_1\)</span> large enough is allowing the poles to be however bad you want them to be, and <span class="math inline">\(\alpha\)</span> is a fixed element, all but finitely many elements have valuation <span class="math inline">\(\geq 0\)</span>.</p>
<p>We understand the relative situation well, based on what we proved. By step 2, since <span class="math inline">\(B, B_1\)</span> are non-special, the dimension of the quotient is zero: <span class="math display">\[\begin{align*}   \dim_k(\mathcal{A}_K(B_1) + K) / (\mathcal{A}_K(B) + K)  &amp;= \deg \qty{B_1 - \ell(B_1)} - \qty{\deg B - \ell(B) } \\ &amp;= (g-1) - (g-1) \\ &amp;= 0 .\end{align*}\]</span> But then these spaces are equal to each other, so <span class="math inline">\(\mathcal{A}_K(B_1) + K = \mathcal{A}_K + K\)</span>. But we chose <span class="math inline">\(B_1\)</span> arbitrarily large so it contained <span class="math inline">\(\alpha\)</span>, and we found that the resulting space is no bigger than the original. Note that <span class="math inline">\(B_1\)</span> was chosen so that <span class="math inline">\(\alpha\in \mathcal{A}_K(B_1)\)</span> before adding <span class="math inline">\(K\)</span>, which remains true when adding <span class="math inline">\(K\)</span>. But this says <span class="math inline">\(\alpha\)</span> is in the LHS, which equals the RHS. Then <span class="math inline">\(\alpha \in \mathcal{A}_K(B)\)</span>, where <span class="math inline">\(\alpha\)</span> was arbitrary, so <span class="math inline">\(\alpha\in \mathcal{A}_K(B) + K\)</span>.</p>
</div>
<div class="corollary" title="2.14">
<p>This can be applied to the zero divisor: <span class="math display">\[\begin{align*}   \dim_k \mathcal{A}_K( \mathcal{A}_K(0) + K ) \iota(0) = g .\end{align*}\]</span></p>
</div>
<div class="exercise" title="?">
<p>Corollary 2.14 shows that if <span class="math inline">\(K = k(t)\)</span> is the rational function field, then we have <span class="math inline">\(\mathcal{A}_K(0) + K = \mathcal{A}_K\)</span>.<a href="#fn54" class="footnote-ref" id="fnref54" role="doc-noteref"><sup>54</sup></a> Show this directly.</p>
</div>
<div class="remark">
<p>Note that analogy to consider <span class="math inline">\(\mathcal{A}({\mathbb{Q}})\)</span>, where you get <span class="math inline">\(\mathcal{A}_{\mathbb{Q}}= \widehat{{\mathbb{Z}}}+ {\mathbb{Q}}\)</span>, where <span class="math inline">\(\widehat{{\mathbb{Z}}}\)</span> denotes the profinite completion. Recall that <span class="math inline">\({\mathbb{A}}_{\mathbb{Q}}= \prod_p&#39; {\mathbb{Q}}_p \times{\mathbb{R}}\)</span>, and inside of this we have <span class="math inline">\({\mathbb{A}}(0) \mathrel{\vcenter{:}}=\prod_p {\mathbb{Z}}_p \times{\mathbb{R}}\)</span>. Not too crazy of a fact: given an Adele, it has finitely many places where its <span class="math inline">\(p{\hbox{-}}\)</span>adic valuation is negative, so it shouldn’t be hard to find a rational number as a correction term which doesn’t change the valuation. The fact that this works for <span class="math inline">\({\mathbb{Q}}\)</span> is related to <span class="math inline">\({\mathbb{Z}}\)</span> being a PID.</p>
</div>
<h1 id="lecture-11b-weils-proof-of-riemann-roch-todo">Lecture 11B: Weil’s Proof of Riemann-Roch (TODO)</h1>
<h1 id="lecture-11c-weils-proof-of-riemann-roch-todo">Lecture 11C: Weil’s Proof of Riemann-Roch (TODO)</h1>
<h1 id="lecture-12-chapter-3-curves-over-a-finite-field">Lecture 12: Chapter 3, Curves Over a Finite Field</h1>
<h2 id="finiteness-of-class-groups">Finiteness of Class Groups</h2>
<p>We consider <span class="math inline">\(k= {\mathbb{F}}_q\)</span> a finite field, which by definition is a one variable global function field. Idea: we’ve defined some affine dedekind domains (the holomorphy rings) had a finite nonempty set of places of the function field. These are analogous to the ring of integers of a number field, or more generally <span class="math inline">\(S{\hbox{-}}\)</span>integer rings. Recall some basic results from NT1: the finiteness of the class group, and the finite generation of the unit group. Here we have a class groups of affine Dedekind domain, and by Rosen’s theorem, there are infinitely many as you vary over nonempty subsets of places of the function field, and they’re all closely connected to a geometric class group: the degree zero divisor class group. Thus by this analogy, when the field is finite, we’d expect that <span class="math inline">\(\operatorname{Cl}^0(K)\)</span> is finite as well, which is the main result we’ll prove today.</p>
<h2 id="base-extension-1">Base Extension</h2>
<p>Let <span class="math inline">\(K_{/{\mathbb{F}}_q}\)</span> be a one variable function field with constant field <span class="math inline">\({\mathbb{F}}_q\)</span>, so that the only elements of <span class="math inline">\(K\)</span> that are algebraic over <span class="math inline">\({\mathbb{F}}_q\)</span> are already in <span class="math inline">\({\mathbb{F}}_q\)</span>. Since <span class="math inline">\({\mathbb{F}}_q\)</span> is a perfect field (<span class="math inline">\(x\mapsto x^p\)</span> is a surjection), every such function field is regular.</p>
<p>Let <span class="math inline">\(\mkern 1.5mu\overline{\mkern-1.5mu{\mathbb{F}}\mkern-1.5mu}\mkern 1.5mu_q\)</span> be an algebraic closure, then for all <span class="math inline">\(r\in {\mathbb{Z}}^+\)</span> there exists a unique degree <span class="math inline">\(r\)</span> extension, which we’ll denote <span class="math inline">\({\mathbb{F}}_{q^r}\)</span>. The extension <span class="math inline">\({\mathbb{F}}_{q^r}/{\mathbb{F}}_q\)</span> is a cyclic galois extension (i.e. it’s galois group is cyclic) with a canonical generator: the Frobenius map.</p>
<p>The galois theory of the constant field comes in when trying to study constant extensions of the function field. There is a general theory of constant extensions, but in our case, every such extension will be cyclic or procyclic, so we don’t need the entire theory.</p>
<p>For any positive integer <span class="math inline">\(r\)</span>, define the extension <span class="math inline">\(K_r \mathrel{\vcenter{:}}= K {\mathbb{F}}_{q^r}\)</span> given by extending scalars, which is a regular function field over <span class="math inline">\({\mathbb{F}_{q^r}}\)</span>. There are two ways to obtain this: either take an algebraic closure of <span class="math inline">\(K\)</span> and take the compositum, or take <span class="math inline">\(K\otimes_{{\mathbb{F}_{q}}}{\mathbb{F}_{q^r}}\)</span>, which we proved was again a field. This <span class="math inline">\(K_r\)</span> is what we get by extending constants, and the way regular function fields work is that if you make an arbitrary extension of the ground field, then you retain a regular function field over this new extension. On the other hand, note that <span class="math inline">\(K_R/K\)</span> is a degree <span class="math inline">\(r\)</span> arithmetic extension of function field, whose galois group is also generated by Frobenius. If we take any regular function field over <span class="math inline">\(k\)</span> and then take a finite galois extension <span class="math inline">\(l/k\)</span>, then extending scalars in this way would give an extension of the upstairs fields which is galois and has the same galois group as the constant extension. This is <em>arithmetic</em> because the only thing that changes going from <span class="math inline">\(K\)</span> to <span class="math inline">\(K_r\)</span> is the field of constants.</p>
<p>In the analogy of function fields as the meromorphic functions on a Riemann surface, this type of extension has no analog: since <span class="math inline">\({\mathbb{C}}\)</span> is algebraically closed, there are no constant extensions. So arithmetic extensions are just extending scalars, and <em>geometric</em> extensions don’t change the constant field at all and instead have the property that if you extended scalars to the algebraic closure, you’d have an extension of the same degree. Note that the étale fundamental group also has a similar decomposition into an arithmetic part and a geometric part (see Daniel Litt’s course).</p>
<h3 id="splitting-of-places">Splitting of Places</h3>
<div class="question">
<p>Given a place in <span class="math inline">\(K\)</span>, how does it split (or not) in <span class="math inline">\(K_r\)</span>?</p>
</div>
<div class="remark">
<p>We can ask this question in whenever we have an extension of function fields. This reduces to the usual ATI type of question: for <span class="math inline">\(v\in \Sigma(K/{\mathbb{F}_{q}})\)</span>, choose an affine Dedekind domain <span class="math inline">\(R\)</span> such that <span class="math inline">\(v\in \Sigma(K/R)\)</span>, i.e. the place is regular. Let <span class="math inline">\(S\)</span> be the integral closure of <span class="math inline">\(K\)</span> in <span class="math inline">\(K_r\)</span>; this place corresponds to a maximal ideal <span class="math inline">\(\mathfrak{p}\)</span>, we then want to factor its pushforward <span class="math inline">\(\mathfrak{p}_v S\)</span>. So this question is a special case of how a prime ideal factors in an extension of Dedekind domains.</p>
</div>
<p>We’ll temporarily black-box the following lemma:</p>
<div class="lemma" title="?">
<p>Suppose <span class="math inline">\(v\)</span> is the downstairs place, <span class="math inline">\(r\)</span> is the degree of the extension, and <span class="math inline">\(d\mathrel{\vcenter{:}}=\deg(v)\)</span>. Then</p>
<ul>
<li><p><span class="math inline">\(K_r/K\)</span> is galois and we have <span class="math inline">\(efg = r\)</span>.<a href="#fn55" class="footnote-ref" id="fnref55" role="doc-noteref"><sup>55</sup></a></p></li>
<li><p>This extension will be unramified: we in fact have <span class="math inline">\(e=1\)</span>, so <span class="math inline">\(g = \gcd(d, r)\)</span> and <span class="math inline">\(f = r/\gcd(d, r)\)</span>, and</p></li>
<li><p>Each place <span class="math inline">\(w\in \Sigma(K_r/{\mathbb{F}_{q^r}})\)</span> lying over <span class="math inline">\(v\)</span> has degree <span class="math inline">\(d/\gcd(d, r)\)</span>.</p></li>
</ul>
</div>
<div class="remark">
<p>Note that having an extension of Dedekind domains coming from a galois extension of fields simplifies things: this makes the inertial degree and ramification indices coincide.</p>
</div>
<div class="example" title="?">
<ul>
<li><p>The extension is inert <span class="math inline">\(\iff\)</span> <span class="math inline">\(\gcd(d, r) = 1\)</span></p>
<ul>
<li>I.e. <span class="math inline">\(d, r\)</span> are coprime and <span class="math inline">\(g=e=1, f=r\)</span>.</li>
</ul></li>
<li><p>The extension splits completely <span class="math inline">\(\iff\)</span> <span class="math inline">\(r {~\Bigm|~}d\)</span>.</p>
<ul>
<li>If <span class="math inline">\(r=d\)</span>, i.e. we take a degree <span class="math inline">\(d\)</span> place and extend scalars to <span class="math inline">\(K_d\)</span>, it splits completely into <span class="math inline">\(d\)</span> degree 1 places.</li>
</ul></li>
<li><p>All <span class="math inline">\(w{~\Bigm|~}v\)</span> have degree 1 <span class="math inline">\(\iff\)</span> <span class="math inline">\(d{~\Bigm|~}r\)</span>.</p></li>
</ul>
</div>
<div class="remark">
<p>Suppose we have <span class="math inline">\(w\)</span> over <span class="math inline">\(v\)</span> with <span class="math inline">\(w\in \Sigma({\mathbb{F}_{q^r}})\)</span> and <span class="math inline">\(v\in \Sigma(K/{\mathbb{F}_{q}})\)</span>. If <span class="math inline">\(v\)</span> has degree <span class="math inline">\(d\)</span>, this means that the residue field satisfies <span class="math inline">\(k(v) \cong {\mathbb{F}}_{q^{d}}\)</span>, since we have unique extensions in each degree. If <span class="math inline">\(f\)</span> is the <span class="math inline">\(f\)</span> from ANTI, it is also the degree of the residual extension, so we know <span class="math inline">\([k(w): k(v)] = f\)</span> and thus <span class="math inline">\(k(w) \cong {\mathbb{F}}_q^{f d}\)</span>.</p>
<p>On the other hand, <span class="math inline">\(k(w)\)</span> is an extension of <span class="math inline">\({\mathbb{F}_{q^r}}\)</span> of degree <span class="math inline">\(\deg(w)\)</span>, so <span class="math inline">\(k(w) \cong {\mathbb{F}}_{ \qty{q^r}^{\deg(w)} } = {\mathbb{F}}_{q^{r\deg(w)}}\)</span>. Thus <span class="math inline">\(r=fg\)</span> and <span class="math display">\[\begin{align*}   q^{f\deg(v)} = q^{r\deg(w)} \implies \deg(w) = \qty{f\over r}\deg(v) = { \deg(v) \over g} .\end{align*}\]</span></p>
<p>The residue field, if it changes at all, can only increase in size, since any extension of Dedekind domains induces an extension of residue fields. So the size of the residue field of <span class="math inline">\(w\)</span> is at least as big as the size of the residue field of <span class="math inline">\(v\)</span>. But the degree of <span class="math inline">\(w\)</span> is measured relative to the extended field <span class="math inline">\({\mathbb{F}_{q^r}}\)</span>, since it’s the degree of the residue field as an extension of <span class="math inline">\({\mathbb{F}_{q^r}}\)</span>. So consider <span class="math inline">\(\deg(w) = \deg(v)/g\)</span>, we see that even as the residue field is increasing by a factor of <span class="math inline">\(f\)</span>, the degree of the point is decreasing by a factor of <span class="math inline">\(g\)</span>.</p>
<p><strong>Upshot</strong>: The residue field grows, but its degree can only shrink. Thus making an extension forces the degrees of the upstairs places to <em>decrease</em>.</p>
</div>
<p>We’re trying to find out in how many ways a discrete valuation extends to a finite degree field extension. From ANTII, we have a result that describes this: if <span class="math inline">\(v\)</span> is a rank 1 valuation on <span class="math inline">\(k\)</span> and <span class="math inline">\(L/K\)</span> is a finite degree extension, then the extensions of <span class="math inline">\(v\)</span> to <span class="math inline">\(L\)</span> correspond with <span class="math inline">\(\operatorname{mSpec}(\widehat{K}_v \otimes_K L)\)</span>, where the hat denotes completing <span class="math inline">\(K\)</span> with respect to the valuation. The <span class="math inline">\(e,f,g\)</span> can all be computed as well.<a href="#fn56" class="footnote-ref" id="fnref56" role="doc-noteref"><sup>56</sup></a></p>
<p>This is some finite degree <span class="math inline">\(\widehat{K}_v\)</span> algebra, and if <span class="math inline">\(L/K\)</span> is separable then this decomposes as a finite product of finite degree field extensions of <span class="math inline">\(K\)</span> and <span class="math inline">\(\widehat{K}_v\)</span>, the number of which will be <span class="math inline">\(g\)</span>. The <span class="math inline">\(e\)</span> and <span class="math inline">\(f\)</span> can be read off because each extension will have a ramified and unramified part.</p>
<div class="exercise" title="?">
<ol type="a">
<li><p>Show that <span class="math inline">\({\mathbb{F}}_{q^d} \otimes_{{\mathbb{F}}_q} {\mathbb{F}}_{q^r} \cong {\mathbb{F}}_{q^l}^{d&#39;}\)</span> where <span class="math inline">\(l = \operatorname{lcm}(d, r)\)</span> and <span class="math inline">\(d&#39; = \gcd(d, r)\)</span>.</p></li>
<li><p>Generalize this to the case when <span class="math inline">\(k_p / k\)</span> and <span class="math inline">\(\ell / k\)</span> are both cyclic galois extensions.</p></li>
</ol>
</div>
<h2 id="degree-1-places-and-rational-points-on-a-curve">Degree 1 Places and Rational Points on a Curve</h2>
<p>Taking the lemma as a black box, for <span class="math inline">\(r\in {\mathbb{Z}}^+\)</span> let <span class="math inline">\(N_r \mathrel{\vcenter{:}}={\left\lvert {\Sigma_1(K_r/ {\mathbb{F}_{q^r}}) } \right\rvert}\)</span>, i.e. the number of degree 1 places of the function field after making a degree <span class="math inline">\(r\)</span> extension. Equivalently, <span class="math inline">\(N_r = {\left\lvert {C({\mathbb{F}_{q^r}})} \right\rvert}\)</span> where <span class="math inline">\(C\)</span> is a unique complete nonsingular curve over <span class="math inline">\({\mathbb{F}_{q}}\)</span> corresponding to <span class="math inline">\(K\)</span>, and this denotes the number of <span class="math inline">\({\mathbb{F}_{q^r}}\)</span> rational points. We’ll eventually see these are finite.</p>
<div class="remark">
<p>Important way of thinking about these: degree one places of a function field over <span class="math inline">\(k\)</span> correspond to <span class="math inline">\(k{\hbox{-}}\)</span>rational points of a curve.</p>
</div>
<div class="corollary" title="Equivalence of data: places and rational points">
<p><span class="math display">\[\begin{align*}   N_r = \sum_{d{~\Bigm|~}r} d\cdot {\left\lvert {\Sigma_d(K/ {\mathbb{F}_{q}})} \right\rvert} ,\end{align*}\]</span> so knowing the number of closed points of each degree is equivalent to knowing the <span class="math inline">\({\mathbb{F}_{q^r}}{\hbox{-}}\)</span>points for all <span class="math inline">\(r\)</span>.</p>
</div>
<div class="proof" title="?">
<p>Let <span class="math inline">\(w\in \Sigma_1(K_r/{\mathbb{F}_{q^r}})\)</span> be a degree 1 point and set <span class="math inline">\(v \mathrel{\vcenter{:}}= w\cap K\)</span> so <span class="math inline">\(w\)</span> lies over <span class="math inline">\(v\)</span>. What is the degree of <span class="math inline">\(v\)</span>? Setting <span class="math inline">\(d \mathrel{\vcenter{:}}=\deg(v)\)</span>, the lemma gives <span class="math display">\[\begin{align*}   1 = \deg(w) = {d\over \gcd(d, r)} ,\end{align*}\]</span> which implies that <span class="math inline">\(\gcd(d, r) = d\)</span> and thus <span class="math inline">\(d{~\Bigm|~}r\)</span>. So for each <span class="math inline">\(d\)</span> dividing <span class="math inline">\(r\)</span>, every degree of <span class="math inline">\(v\in \Sigma(K/{\mathbb{F}_{q}})\)</span> contributes <span class="math inline">\(\gcd(d, r) = d\)</span> degree 1 points on <span class="math inline">\(K_r\)</span>, i.e. every downstairs degree <span class="math inline">\(d\)</span> place splits into <span class="math inline">\(d\)</span> degree one places. So for every such <span class="math inline">\(d\)</span>, every degree <span class="math inline">\(d\)</span> closed point contributes <span class="math inline">\(d\)</span> degree 1 closed points lying above it, and conversely if <span class="math inline">\(d\)</span> does not divide <span class="math inline">\(r\)</span> then the upstairs point would not have degree 1, so this accounts for all of the degree 1 points.</p>
</div>
<div class="remark">
<p>We saw that the degree 1 places and the rational points are the same information, and there is a third equivalently quantity: <span class="math inline">\(A_n\)</span>, defined to be the number of effective divisors of degree <span class="math inline">\(n\)</span>.</p>
</div>
<h2 id="finiteness-of-places-and-rational-points">Finiteness of Places and Rational Points</h2>
<div class="lemma" title="?">
<ol type="a">
<li><p>For all <span class="math inline">\(d\)</span>, the number of degree <span class="math inline">\(d\)</span> closed points <span class="math inline">\(\Sigma_d(K/{\mathbb{F}_{q}})\)</span> is finite (and therefore <span class="math inline">\(N_r\)</span> is finite), and</p></li>
<li><p>For all <span class="math inline">\(n\)</span>, <span class="math inline">\(A_n\)</span> is finite.</p></li>
</ol>
</div>
<div class="proof" title="of a">
<p>Let <span class="math inline">\(L/K\)</span> be a degree <span class="math inline">\(n\)</span> extension of regular function fields over <span class="math inline">\({\mathbb{F}_{q}}\)</span>. We then have a restriction map <span class="math display">\[\begin{align*}   r: \Sigma(L/{\mathbb{F}_{q}}) \twoheadrightarrow\Sigma(K/{\mathbb{F}_{q}}) \end{align*}\]</span> which we showed is surjective with finite fibers. We can say a little bit more: for all places <span class="math inline">\(w \in \Sigma(L/{\mathbb{F}_{q}})\)</span>, we have an inequality <span class="math display">\[\begin{align*}   \qty{1\over n}\deg(w) \leq \deg(r(w)) \leq \deg(w) ,\end{align*}\]</span> noting that we’re now measuring all degrees over a common ground field <span class="math inline">\({\mathbb{F}_{q}}\)</span>. So things are now what you’d expect: the degree of the upstairs point is a multiple of the degree of the downstairs point. The upper bound comes from the fact that the residue of the upstairs point is a finite extension of the residue field of the downstairs points. The opposite inequality comes from ANTI: the degree of the residual extension is at most the degree of the entire extension.</p>
<p>So <span class="math inline">\(r\)</span> doesn’t preserve degrees exactly, but preserves them up to a bounded factor, and thus <span class="math inline">\(\Sigma_{\leq d}(L/{\mathbb{F}_{q}})\)</span> is finite for all <span class="math inline">\(d\)</span> <span class="math inline">\(\iff\)</span> <span class="math inline">\(\Sigma_{\leq d}(K/{\mathbb{F}_{q}})\)</span> is finite for all <span class="math inline">\(d\)</span>. Because of this, we can reduce the situation by exchanging the function field <span class="math inline">\(L/{\mathbb{F}_{q}}\)</span> with any other function field for which <span class="math inline">\(L\)</span> is a finite extension, and in particular we can take the rational function field <span class="math inline">\(K = {\mathbb{F}}_q(t)\)</span>. What are the degree <span class="math inline">\(d\)</span> places of a rational function field? There is exactly one place at infinity, and the remaining ones correspond to monic irreducible polynomials. Since <span class="math inline">\({\mathbb{F}_{q}}\)</span> is finite, there are only finitely many such polynomials of any fixed degree.<a href="#fn57" class="footnote-ref" id="fnref57" role="doc-noteref"><sup>57</sup></a></p>
</div>
<div class="proof" title="of b">
<p>Left as an exercise.</p>
<p>Some remarks: how do you build an effective divisor of degree <span class="math inline">\(n\)</span>? Take closed points (places) and start adding them up with positive coefficients, then the degree of the divisor is the sum of the degrees of the places. But if you only have finitely many places, each of which can only be used a bounded number of times (certainly no more than <span class="math inline">\(n\)</span> times!), thus one can only build finitely many effective divisors of each degree.</p>
</div>
<h2 id="finiteness-of-class-group">Finiteness of Class Group</h2>
<div class="proposition" title="Finiteness of class group">
<p>The degree 0 divisor class group <span class="math inline">\(\operatorname{Cl}^0(K)\)</span> is finite.</p>
</div>
<p>This is a geometric analog of the finiteness of the class group of the ring of integers of a number field. By Rosen’s theorem, as an immediate corollary, the class group of any affine dedekind domain over a finite ground field is finite. This follows from looking at the exact sequence: a finite index subgroup of the class group of any dedekind domain is a quotient of <span class="math inline">\(\operatorname{Cl}^0(K)\)</span>, and a finite index subgroup of a finite group is finite.</p>
<div class="proof" title="?">
<p>Set <span class="math inline">\(\delta \mathrel{\vcenter{:}}= I(K)\)</span> to be the index, i.e. the least possible degree of a divisor.<a href="#fn58" class="footnote-ref" id="fnref58" role="doc-noteref"><sup>58</sup></a></p>
<p>In any case, for all <span class="math inline">\(n\in {\mathbb{Z}}\)</span>, we have <span class="math display">\[\begin{align*}   \operatorname{Cl}^n K =  \begin{cases} 0 &amp; \delta\nmid n \\ {\left\lvert {\operatorname{Cl}^0 K} \right\rvert} &amp; \delta{~\Bigm|~}n \end{cases} .\end{align*}\]</span> If you have any degree <span class="math inline">\(n\)</span> divisors, then <span class="math inline">\(\operatorname{Cl}^n K\)</span> will be a coset of <span class="math inline">\(\operatorname{Cl}^0 K\)</span>. Here we just look at the degree map, which is a group morphism onto its image, of which all nonempty fibers have the same size. Thus we may work with <span class="math inline">\(\operatorname{Cl}^n K\)</span> for <span class="math inline">\(n\gg 0\)</span>.<br />
</p>
<p>In particular, choose <span class="math inline">\(n\geq g\)</span> the genus such that <span class="math inline">\(\delta {~\Bigm|~}n\)</span>, and let <span class="math inline">\(D \in \operatorname{Div}^n K\)</span>. A Riemann-Roch computation shows that <span class="math inline">\(\ell(D)\)</span>, the dimension of the linear system, is at least <span class="math inline">\(n-g+1\)</span>, and so we have <span class="math inline">\(\ell(D) \geq 1\)</span> and <span class="math inline">\(D\)</span> is linearly equivalent to an effective divisor. This shows that the map taking effective degree <span class="math inline">\(n\)</span> divisors to <span class="math inline">\(\operatorname{Cl}^n K\)</span> taking a divisor to its divisor class (restricted to effective divisors) is surjective. But we just saw that the set of effective degree <span class="math inline">\(n\)</span> divisors is finite – it was built out of finitely many closed points of bounded degrees – forcing <span class="math inline">\(\operatorname{Cl}^n K\)</span> to be finite. The result follows because <span class="math inline">\(\operatorname{Cl}^n K\)</span> is a coset of <span class="math inline">\(\operatorname{Cl}^0 K\)</span>, all of which have the same size, and the index is finite.</p>
</div>
<div class="definition" title="Class Number of $K$">
<p>The <strong>class number</strong> of <span class="math inline">\(K\)</span> is defined as <span class="math display">\[\begin{align*}   h \mathrel{\vcenter{:}}={\left\lvert {\operatorname{Cl}^0 K} \right\rvert} .\end{align*}\]</span></p>
</div>
<div class="remark">
<p>There is a much fancier proof: there exists a <span class="math inline">\(g{\hbox{-}}\)</span>dimensional abelian variety <span class="math inline">\(A / {\mathbb{F}}_q\)</span>, the <em>Jacobian variety</em> of <span class="math inline">\(C/{\mathbb{F}}_q\)</span>, such that <span class="math inline">\(\operatorname{Cl}^0 K + A({\mathbb{F}}_q)\)</span>. It is built out of the degree 0 divisor class group in some functorial way. In particular, <span class="math inline">\(A\)</span> is a projective variety, and thus embeds into some <span class="math inline">\({\mathbb{P}}^N_{/{\mathbb{F}}_q}\)</span>, and so <span class="math inline">\({\left\lvert {A({\mathbb{F}}_q)} \right\rvert} \leq {\left\lvert {{\mathbb{P}}^N_{/{\mathbb{F}}_q}} \right\rvert} &lt; \aleph_0\)</span>.<br />
</p>
<p>As one varies over all function fields over all finite fields, there will only be finitely many whose class number is bounded by some fixed <span class="math inline">\(h_0\)</span>. E.g. there are only finitely many function fields of class number 1, and these can be explicitly listed. So <span class="math inline">\(h\to \infty\)</span> in some sense, which is not proved by showing that <span class="math inline">\({\left\lvert {A({\mathbb{F}_{q}})} \right\rvert} \to \infty\)</span>, and we’ll instead prove it using methods closer to what we’re seeing in this course.</p>
</div>
<p>Up next: setting up the zeta function.</p>
<h1 id="lecture-13-splitting-places">Lecture 13: Splitting Places</h1>
<p>Recall that we previously looked at the regular function fields: we took a function field in one variable and considered the class of function fields for which we could take any extension of the constant field that we wanted. As long as the ground field is perfect, being regular is equivalent to the constant subfield being <span class="math inline">\(k\)</span> itself. However, we haven’t done anything with them yet!</p>
<p>If you take an algebraic closure of the finite ground field <span class="math inline">\({\mathbb{F}}_q\)</span>, there is a unique subextension of degree <span class="math inline">\(r\)</span> for every <span class="math inline">\(r\)</span>, so we call that <span class="math inline">\({\mathbb{F}}_{q^r}\)</span>. The extension <span class="math inline">\({\mathbb{F}}_{q^r}/{\mathbb{F}}_q\)</span> is cyclic galois, with a geometric Frobenius <span class="math inline">\(x\to x^q\)</span>. Note that <span class="math inline">\({\mathbb{F}}_{q^r}\)</span> is the fixed field of <span class="math inline">\(F^r\)</span>, the <span class="math inline">\(r\)</span>th power of the Frobenius map. We set <span class="math inline">\(K_r \mathrel{\vcenter{:}}= K {\mathbb{F}}_{q^r}\)</span>, which is a regular function field over <span class="math inline">\({\mathbb{F}}_{q^r}\)</span>. Note that we could view this as a function field just over <span class="math inline">\({\mathbb{F}}_q\)</span>, but it would not be regular. Then <span class="math inline">\(K_r/K\)</span> is a degree <span class="math inline">\(r\)</span> arithmetic extension of function fields.</p>
<div class="question">
<p>What happens to places when making this scalar extension? I.e., how to places in <span class="math inline">\(K\)</span> decompose in <span class="math inline">\(K_r\)</span>?</p>
</div>
<div class="remark">
<p>This is related to an Algebraic Number Theory I problem: for <span class="math inline">\(v\in \Sigma(K_{/\mathbb{F}_q})\)</span> above an affine Dedekind domain <span class="math inline">\(R\)</span> such that <span class="math inline">\(v\in \Sigma(K/R)\)</span>, let <span class="math inline">\(S\)</span> be the integral closure of <span class="math inline">\(K\)</span> in <span class="math inline">\(K_r\)</span>. Then we want to factor <span class="math inline">\(p_v S\)</span>? </p>
</div>
<h2 id="how-places-split">How Places Split</h2>
<div class="lemma" title="Key lemma about how places split.">
<p>Suppose <span class="math inline">\(d\mathrel{\vcenter{:}}=\deg(v)\)</span>. Then <span class="math inline">\(K_r/K\)</span> is galois, so we have <span class="math inline">\(efg=r\)</span>. In fact, <span class="math inline">\(c=1\)</span>, so <span class="math inline">\(f = {r\over \gcd(d, r)}\)</span> and <span class="math inline">\(g = \gcd(d, r)\)</span> and each place <span class="math inline">\(w\in \Sigma(K_r / {\mathbb{F}}_{q^r})\)</span> has degree <span class="math inline">\({d\over \gcd(d, r)}\)</span>.</p>
</div>
<div class="remark">
<p>We have the following cases:</p>
<ul>
<li><p>The extension is <em>inert</em> iff <span class="math inline">\(\gcd(d, r) = 1\)</span>,</p></li>
<li><p>The extension <em>splits completely</em> iff <span class="math inline">\(r{~\Bigm|~}d\)</span>,</p></li>
<li><p>All <span class="math inline">\(w\)</span> dividing <span class="math inline">\(v\)</span> have degree 1 iff <span class="math inline">\(d{~\Bigm|~}r\)</span>.</p></li>
</ul>
</div>
<p>The last thing we proved was that the degree zero divisor class group is finite when we’re over a finite ground field. Why is this true? Whenever there is a divisor of degree <span class="math inline">\(n\)</span>, then the set of degree <span class="math inline">\(n\)</span> divisors is a coset of the degree zero divisors, all of which have the same cardinality. We proved finiteness using the Riemann-Roch theorem, using the fact that the set of <em>effective</em> degree <span class="math inline">\(n\)</span> divisors is finite for all <span class="math inline">\(n\)</span>.</p>
<p>The next main topic will be the <strong>zeta function</strong>, which keeps track of three equivalent packets of information: <span class="math inline">\(A_n\)</span>, the number of effective divisors of degree <span class="math inline">\(n\)</span>, the number of places of degree <span class="math inline">\(d\)</span> (since an effective divisor is a linear combination of these), and <span class="math inline">\(N_r\)</span> the number of degree 1 points in the degree <span class="math inline">\(r\)</span> extension, i.e. the number of <span class="math inline">\({\mathbb{F}}_{q^r}\)</span> rational points.</p>
<h2 id="counting-effective-divisors">Counting Effective Divisors</h2>
<div class="lemma" title="?">
<p>Suppose <span class="math inline">\(C\in \operatorname{Cl}(K)\)</span>, then</p>
<ul>
<li><p>The number of effective divisors <span class="math inline">\(D \in [C]\)</span> is given by <span class="math display">\[\begin{align*}       {q^{\ell(C)} -1 \over q-1}      ,\end{align*}\]</span> where <span class="math inline">\(\ell(C)\)</span> is the dimension of the linear system associated to the divisor class <span class="math inline">\(C\)</span>, and this is the dimension of a projective space over <span class="math inline">\({\mathbb{F}}_q\)</span>.</p></li>
<li><p>For all <span class="math inline">\(n&gt;2g-2\)</span> with <span class="math inline">\(\delta {~\Bigm|~}n\)</span>, we have <span class="math display">\[\begin{align*}       A_n = h \qty{ q^{n+1-g} - 1\over q-1}     .\end{align*}\]</span></p></li>
</ul>
</div>
<div class="proof" title="?">
<p><strong>Proof of (a)</strong>: The set of effective divisors linearly equivalent to <span class="math inline">\(D\)</span> is naturally viewed as the projectivization <span class="math inline">\({\mathbb{P}}\mathcal{L}(D)\)</span> of the one-dimensional subspaces of the linear system of that divisor class. It is then a fact that the number of elements in a <span class="math inline">\(d{\hbox{-}}\)</span>dimensional vector space over <span class="math inline">\({\mathbb{F}}_q\)</span> has dimension precisely <span class="math inline">\(\frac{q^d-1}{q-1}\)</span> elements. The projectivization comes in because two different functions have the same divisor if one of them is a constant multiple of the other. Note that the number of elements is computed as the number of nonzero elements divided by the number of nonzero scalars.<br />
</p>
<p><strong>Proof of (b)</strong>: This will come out of the Riemann-Roch theorem. In order to compute the number of divisors in a divisor class, you need to know the dimension of the linear system, which is not easy in general. However, if the divisor class has sufficiently large degree, the Riemann-Roch theorem tells you exactly what it is. As long as <span class="math inline">\(n &gt; 2g-2\)</span>, there is no correction term, and the dimension of the linear system is equal to its degree minus the genus plus one. So by Riemann-Roch, since <span class="math inline">\(\deg(D) &gt; 2g-2\)</span>, <span class="math inline">\(D\)</span> is non-special and <span class="math inline">\(\ell([D]) = n-g+1\)</span>, which yields the desired formula for <span class="math inline">\(A_n\)</span>.</p>
</div>
<div class="remark">
<p>This is the sharpest result possible: the canonical divisor has degree <span class="math inline">\(2g-2\)</span> and is special, so this fails for the canonical class.</p>
<p>The upshot: there are three piece of information:</p>
<ul>
<li><p><span class="math inline">\(N_r\)</span>, the number of <span class="math inline">\({\mathbb{F}}_{q^r}\)</span> rational points,</p></li>
<li><p><span class="math inline">\({\left\lvert {\Sigma_d(K_{/\mathbb{F}_q})} \right\rvert}\)</span> the number of closed points / places of degree <span class="math inline">\(d\)</span>,</p></li>
<li><p><span class="math inline">\(A_n\)</span> the number of effective divisors of degree <span class="math inline">\(n\)</span>,</p></li>
</ul>
<p>and there are simple formulas relating these. Moreover, it is enough to know only finitely many of these quantities, where the number depends on <span class="math inline">\(g\)</span>.</p>
</div>
<h2 id="hasse-weil-zeta-functions">Hasse-Weil Zeta Functions</h2>
<p>There is a general theory that will unify</p>
<ul>
<li><p>The Riemann zeta function, thought of as the zeta function of <span class="math inline">\({\mathbb{Z}}\)</span>,</p></li>
<li><p>The Dedekind zeta function, attached to the ring of integers over a number field,</p></li>
<li><p>The Hasse-Weil zeta function of a one variable function field over a finite field,</p></li>
</ul>
<p>all of which will be special cases of a <em>Serre zeta function</em> which can be attached to a finite type scheme over <span class="math inline">\({\mathbb{Z}}\)</span>.</p>
<p>Note that we aren’t specifically discussing schemes in this course, but you don’t need to know much about what a scheme is to define the Hasse-Weil zeta function. Just note that an affine finite-type <span class="math inline">\({\mathbb{Z}}{\hbox{-}}\)</span>scheme corresponds to a finitely generated <span class="math inline">\({\mathbb{Z}}{\hbox{-}}\)</span>algebra, and a general finite-type <span class="math inline">\({\mathbb{Z}}{\hbox{-}}\)</span>scheme will be covered by finitely many affine ones, the zeta function will be determined by these finitely many <span class="math inline">\({\mathbb{Z}}{\hbox{-}}\)</span>algebras and some kind of inclusion-exclusion principle (since the scheme is a not necessarily disjoint union of affine schemes).</p>
<p>Recall that <span class="math inline">\(A_n = A_n(K)\)</span> is the number of effective divisors of degree <span class="math inline">\(n\)</span>, which we’ve proved is finite. We have a formula when <span class="math inline">\(n&gt; 2g-2\)</span>, namely <span class="math display">\[\begin{align*}   Z(t) = \sum_{n=0}^\infty A_n t^n = \sum_{D\in \operatorname{Div}^+(K)} t^{\deg(D)} \in {\mathbb{Z}}[[t]] ,\end{align*}\]</span> where <span class="math inline">\(\operatorname{Div}^+\)</span> are the effective divisors and we’ve collected terms based on their degree. This is analogous to the Dedekind zeta function of a number field <span class="math inline">\(K\)</span>, a formal Dirichlet series which is given by <span class="math display">\[\begin{align*}   \zeta_K(s) = \sum_{I \in \mathcal{I}\qty{{\mathbb{Z}}_K^\bullet}} {\left\lvert { {\mathbb{Z}}_K / I} \right\rvert}^{-s} .\end{align*}\]</span> where the sum is now over all of the nonzero ideals of the ring of integers, where we measure the size using the <em>norm</em>, i.e. the size of the residue field. There’s an analogy between integral ideals (vs fractional ideals) and effective divisors. We could get an Euler product decomposition for the Dedekind zeta function by only considering prime ideals, since in a Dedekind domain all ideals factor uniquely into prime ideals. In fact, any nonzero ideal is a linear combination of prime ideals. Similarly, the effective divisors are linear combinations of effective divisors, so an Euler product expansion is possible here too. If we take a prime ideal, since we’re in a discrete valuation ring, we can consider the local ring at that point. We can take the residue field, which in general won’t be finite, but will be a finite extension. So a reasonable measure of the size of a prime divisor would be the dimension of its residue field as a vector space over <span class="math inline">\(K\)</span>.</p>
<p>Note that if we wanted to make these look even more similar to each other, we could define <span class="math inline">\(a_n\)</span> (depending on <span class="math inline">\({\mathbb{Z}}_K\)</span>) as <span class="math display">\[\begin{align*} a_n = {\left\lvert {\left\{{I {~\trianglelefteq~}{\mathbb{Z}}_K ~{\text{s.t.}}~{\left\lvert {{\mathbb{Z}}_K/I} \right\rvert} = n}\right\}} \right\rvert} ,\end{align*}\]</span> which allows us to write <span class="math display">\[\begin{align*}   \zeta_K(s) = \sum_{n=1}^\infty {a_n \over n^s} .\end{align*}\]</span></p>
<div class="question">
<p>Where we’re going: how does <span class="math inline">\(Z(t)\)</span> depend on <span class="math inline">\(K\)</span>?</p>
</div>
<div class="answer">
<p>It turns out that it only depends on <span class="math inline">\(A_0, A_1, \cdots, A_{2g-2}\)</span>, and thus <span class="math inline">\(Z(t)\)</span> depends on only finitely much information. We will</p>
<ol type="1">
<li>Show that <span class="math inline">\(Z(t) \in {\mathbb{Z}}(t)\)</span>, i.e. it is a rational function and can be written <span class="math inline">\(Z(t) = P(t)/ Q(t)\)</span>.</li>
</ol>
<blockquote>
<p>Note: the denominator will always be the same, <span class="math inline">\((1-t)(1-qt)\)</span>, and we’ll always have <span class="math inline">\(\deg P = 2g\)</span>. This is essentially coming from <span class="math inline">\(\ell{\hbox{-}}\)</span>adic cohomology. We’ll also determine the leading coefficient.</p>
</blockquote>
<ol start="2" type="1">
<li><p>Understand <span class="math inline">\(\deg P\)</span> and <span class="math inline">\(\deg Q\)</span> in terms of the genus <span class="math inline">\(g\)</span>.</p></li>
<li><p>Ask about the roots of <span class="math inline">\(P(t)\)</span>, and establish a Riemann hypothesis for Dedekind zeta functions (and in particular, the Riemann zeta function).</p></li>
</ol>
<blockquote>
<p>In particular, what are their magnitudes? This is what Weil did, this is the big theorem in this area. Note that we’ll need to consider reciprocal roots, which will end up having magnitude <span class="math inline">\(\sqrt{q}\)</span>. We’ll see why this happens, and it turns out to be analogous to fact that the nontrivial zeros of the Riemann zeta function have real part <span class="math inline">\(1/2\)</span>.</p>
</blockquote>
</div>
<p>These are approximately in order of difficulty. The first two will follow from Riemann-Roch, but the third will be much deeper. This is essentially a positive characteristic analogue of the usual Riemann hypothesis. Note that we’re in a global field, the positive characteristic analog of a number field, and for number fields the Riemann hypothesis is the single outstanding problem. In the function field case, it is a theorem!</p>
<div class="proposition" title="Formula for the zeta function exhibiting rationality">
<p>Let <span class="math inline">\(K_{/\mathbb{F}_q}\)</span> have genus <span class="math inline">\(g\)</span> and <span class="math inline">\(\delta = I(K)\)</span> the index, the least positive degree of a divisor.<a href="#fn59" class="footnote-ref" id="fnref59" role="doc-noteref"><sup>59</sup></a></p>
<ol type="a">
<li><p>If <span class="math inline">\(g=0\)</span>, then <span class="math display">\[\begin{align*}       Z(t) = {1\over q-1} \qty{{q \over 1-q^\delta t^\delta} - {1 \over 1-t^\delta}}     .\end{align*}\]</span></p></li>
<li><p>If <span class="math inline">\(g\geq 1\)</span>, then <span class="math inline">\(Z(t) + F(t) + G(t)\)</span> where <span class="math display">\[\begin{align*}       F(t)      &amp;= {1\over q-1} \sum_{0\leq \deg C \leq 2g-2} q^{\ell(C)} t^{\deg(C)} \\     G(t)     &amp;= {h \over g-1} \qty{     { q^{1-g} (qt)^{2g-2+\delta} \over 1 - (qt)^\delta } - {1 \over 1 - t^\delta}     }     ,\end{align*}\]</span> so <span class="math inline">\(F\)</span> involves summing over all divisor classes of degree at most <span class="math inline">\(2g-2\)</span>, and <span class="math inline">\(G\)</span> is a term coming from Riemann-Roch involving the class number <span class="math inline">\(h\)</span>.</p></li>
</ol>
</div>
<div class="remark">
<p>Note that as a consequence, it will definitely be rational in <span class="math inline">\(q\)</span>, and will have a simple pole at <span class="math inline">\(t=1\)</span>. There’s no major idea for the proof: when the degree of the divisor class is sufficiently large, we just have an exact formula. If it is smaller, than the formula involves the dimension of the linear system.</p>
</div>
<h2 id="proof-of-rationality">Proof of Rationality</h2>
<div class="proof" title="of rationality of $Z(t)$">
<p>Recall that <span class="math inline">\(\ell(C)\)</span> is the dimension of the associated Riemann-Roch space.</p>
<p>When <span class="math inline">\(g=0\)</span>, by Riemann-Roch we have <span class="math inline">\(\operatorname{Cl}^0(K) = 0\)</span> over any ground field <span class="math inline">\({\Bbbk}\)</span> (see exercises), and so <span class="math inline">\(h=1\)</span>. Since every <span class="math inline">\(n\geq 0\)</span> satisfies <span class="math inline">\(n\geq 2g-2\)</span> when <span class="math inline">\(g=0\)</span>, if <span class="math inline">\(\delta{~\Bigm|~}n\)</span> we have <span class="math display">\[\begin{align*}   A_n = h \qty{ q^{n+1 - g} - 1 \over q-1} = {q^{n+1} - 1 \over q-1} ,\end{align*}\]</span> and since <span class="math inline">\(A_n=0\)</span> unless <span class="math inline">\(n\)</span> is divisible by <span class="math inline">\(\delta\)</span>, we have <span class="math display">\[\begin{align*}   Z(t) = \sum_{n=0}^\infty A_n t^n = \sum_{n=0}^{\infty} A_{\delta n} t^{\delta n} = \sum_{n=0}^\infty {q^{\delta n + 1} -1 \over q-1} t^{\delta n} .\end{align*}\]</span> This can now be split into two terms, each of which will have a geometric series to sum.</p>
<p>Now let <span class="math inline">\(g\geq 1\)</span>, and write <span class="math display">\[\begin{align*}   \sum_{{n=0}}^\infty A_n t^n = \sum_{\deg(C) \geq 0} {\left\lvert {\left\{{ A\in C ~{\text{s.t.}}~A\geq 0}\right\}} \right\rvert}t^{\deg(C)} ,\end{align*}\]</span> where we instead count the number of divisors in each divisor class (a consequence of the previous lemma). Continuing this computation, we separate out the part where <span class="math inline">\(\deg(C) \leq 2g-2\)</span> and pull out the <span class="math inline">\(-1\)</span> in the numerator: <span class="math display">\[\begin{align*}   \cdots  &amp;= \sum_{\deg(C) \geq 0} {q^{\ell(C)} - 1 \over q - 1}t^{\deg(C)} \\ &amp;= \qty{1\over q-1} \qty{ \sum_{0\leq \deg(C) \leq 2g-2} q^{\ell(C)} t^{\deg(C)}  + \sum_{\deg(C) &gt; 2g-2} q^{\deg(C) - g + 1} t^{\deg(C)} - \sum_{\deg(C) \geq 0} t^{\deg(C)} } \\ &amp;\mathrel{\vcenter{:}}= F(t) + G(t) ,\end{align*}\]</span></p>
<p>so we can write</p>
<p><span class="math display">\[\begin{align*}   F(t) &amp;= {1\over q-1} \sum_{0\leq \deg(C) \leq 2g-2} q^{\ell(C)} t^{\deg(C)} \\ (q-1)G(t) &amp;= \sum_{n = {2g-2 \over \delta} + 1}^\infty  h q^{n\delta + 1 - g} t^{n\delta}  - \sum_{{n=0}}^\infty ht^{n\delta} .\end{align*}\]</span></p>
<p>Note that <span class="math inline">\(\delta{~\Bigm|~}2g-2\)</span> since the canonical divisor has degree <span class="math inline">\(2g-2\)</span> and <span class="math inline">\(\delta\)</span> is a gcd. Note that for <span class="math inline">\(g=1\)</span>, the index divides zero, which tells you nothing about it! This now reduces to some geometric series that can be summed, which shows these are rational functions in <span class="math inline">\(t\)</span>.</p>
</div>
<div class="exercise" title="?">
<p>Let <span class="math inline">\(K = {\mathbb{F}}_q(t)\)</span>, then <span class="math inline">\(g=0, \delta = 1\)</span>, and <span class="math display">\[\begin{align*}   Z(t) = {1\over (1-qt)(1-t)} .\end{align*}\]</span> We will see in general that the numerator is of the form <span class="math inline">\(L(t)\)</span> where <span class="math inline">\(L\in {\mathbb{Z}}[t]\)</span> has degree <span class="math inline">\(2g\)</span>.</p>
</div>
<p>Note that this all generalized to higher dimensional projective varieties <span class="math inline">\(X_{/{\mathbb{F}}_q}\)</span>, for which these properties were proved by the work of Deligne. In general, <span class="math inline">\(Z(t)\)</span> will be of the form <span class="math display">\[\begin{align*}   Z_X(t) = {L_1(t) \cdots L_{2d-1}(t) \over L_0(t) \cdots L_{2d}(t)} ,\end{align*}\]</span> where <span class="math inline">\(d = \dim(X)\)</span> and <span class="math inline">\(\deg L_i\)</span> will be the dimension of the <span class="math inline">\(i\)</span>th <span class="math inline">\(\ell{\hbox{-}}\)</span>adic cohomology. Moreover, if <span class="math inline">\(X_{/{\mathbb{F}}_q}\)</span> is a reduction mod <span class="math inline">\(q\)</span> of a variety in characteristic zero, these will be the Betti numbers of <span class="math inline">\(X_{/{\mathbb{C}}}\)</span>. If we take a compact Riemann surface, which has a honest topological genus of <span class="math inline">\(g\)</span>, the Betti numbers are <span class="math inline">\(1, 2g, 1\)</span>, and this recovers the formula above for <span class="math inline">\(L(t)\)</span> and its degree.</p>
<p>The next result will be the following theorem:</p>
<div class="theorem" title="Schmidt, 1910ish">
<p>For all <span class="math inline">\(K_{/\mathbb{F}_q}\)</span>, <span class="math display">\[\begin{align*}   \delta = I(K) = 1 .\end{align*}\]</span></p>
</div>
<p>This will greatly simplify the previous formulas. A useful application is if you have a genus zero curve of index 1, applying Riemann-Roch to a divisor of degree 1 shows that the function field is rational. Thus the only genus zero function field over <span class="math inline">\({\mathbb{F}}_q\)</span> is the rational function field. Useful aside: the Riemann hypothesis here gives an estimate of the number of <span class="math inline">\({\mathbb{F}}_{q^r}\)</span> rational points.</p>
<h1 id="lecture-14-the-hasse-weil-zeta-function">Lecture 14: The Hasse-Weil Zeta Function</h1>
<p>Recall the that <em>Hasse-Weil zeta function</em> of a one-variable function field <span class="math inline">\(K/{\mathbb{F}}_q\)</span> over a finite ground field is defined in the following way: let <span class="math inline">\(A_n = A_n(K)\)</span> be the number of effective divisors of degree <span class="math inline">\(n\)</span>. We have proved that <span class="math inline">\(A_n\)</span> is finite, and for <span class="math inline">\(n&gt;2g-2\)</span> we have a formula <span class="math display">\[\begin{align*}   Z(t) = \sum_{n=0}^\infty A_n t^n = \sum_{D\in \operatorname{Div}^+(K)} t^{\deg(D)} \in {\mathbb{Z}}[[t]] ,\end{align*}\]</span> which is a formal power series with integer coefficients.</p>
<div class="remark">
<p>Recall that we have proved that it is a rational function of <span class="math inline">\(t\)</span>, and in particular when <span class="math inline">\(g=0, \delta = 1\)</span><a href="#fn60" class="footnote-ref" id="fnref60" role="doc-noteref"><sup>60</sup></a> we get <span class="math display">\[\begin{align*}   Z(t) = {1 \over (1-qt)(1-t)} .\end{align*}\]</span></p>
<p>We got another expression which isn’t fantastic: it involves this <span class="math inline">\(\delta\)</span>, which we’ll work toward proving is equal to 1. When <span class="math inline">\(g&gt;1\)</span>, we broke the zeta function into two pieces <span class="math inline">\(Z(t) = F(t) + G(t)\)</span>. For divisors of sufficiently high degree, Riemann-Roch tells you what the dimension of the Riemann-Roch space is, and <span class="math inline">\(G(t)\)</span> explains the part coming from divisors of large degree. We obtained a formula previously for <span class="math inline">\(F(t)\)</span> and <span class="math inline">\(G(t)\)</span>, and once we show <span class="math inline">\(\delta=1\)</span> the formula for <span class="math inline">\(G\)</span> will simplify. For <span class="math inline">\(F(t)\)</span>, we specifically had <span class="math display">\[\begin{align*}   F(t) = {1\over q-1} \sum_{0\leq \deg(c) \leq 2g-2} q^{\ell(c) t^{\deg(c)}} ,\end{align*}\]</span> where the sum is over divisor classes and <span class="math inline">\(\ell\)</span> is the dimension of linear system corresponding to a divisor. But this isn’t a great formula: what are these classes, dhow many are in each degree, and what is the dimension of the Riemann-Roch space?</p>
</div>
<div class="remark">
<p>This is analogous to the Dedekind zeta function of a number field <span class="math inline">\(K\)</span>, in which case <span class="math display">\[\begin{align*}   \zeta_K(s) = \sum_{T\in \ell({\mathbb{Z}}_k)}^\bullet {\left\lvert {{\mathbb{Z}}_k/I} \right\rvert}^{-s} ,\end{align*}\]</span> which will be covered in a separate lecture on <em>Serre zeta functions</em>.</p>
</div>
<div class="theorem" title="F.K. Schmidt">
<p>For all <span class="math inline">\(K/{\mathbb{F}}_q\)</span>, we have <span class="math inline">\(\delta = I(K) = 1\)</span> where <span class="math inline">\(I\)</span> is the index.</p>
</div>
<p>This will follow from the associated, but it much weaker. However, this is one of the facts we’d like to establish to use to <em>prove</em> the Riemann hypothesis.</p>
<div class="remark">
<p>Pete studied this in 2004 and found that every <span class="math inline">\(I\in {\mathbb{Z}}^+\)</span> arises as the index of a genus one function field <span class="math inline">\(K/{\mathbb{Q}}\)</span>.</p>
</div>
<p>Notation: for <span class="math inline">\(n\in{\mathbb{Z}}^+\)</span>, let <span class="math inline">\(\mu_n\)</span> denote the <span class="math inline">\(n\)</span>th roots of unity in <span class="math inline">\({\mathbb{C}}\)</span>.</p>
<div class="lemma" title="?">
<p>For <span class="math inline">\(m, r\in {\mathbb{Z}}^+\)</span>, set <span class="math inline">\(d \mathrel{\vcenter{:}}=\gcd(m, r)\)</span>. Then <span class="math display">\[\begin{align*}   \qty{1-t^{mr/d}}^d = \prod_{\xi\in \mu_r}  1 - (\xi t)^m .\end{align*}\]</span></p>
</div>
<div class="proof" title="?">
<p>In <span class="math inline">\({\mathbb{C}}[x]\)</span>, we have <span class="math display">\[\begin{align*}   (X^{r/1} - 1)^d = \prod_{\xi\in \mu_r}(X - \xi^m) ,\end{align*}\]</span> where both sides are monic polynomials whose roots include the <span class="math inline">\((r/d)\)</span>th roots of unity, each with multiplicity <span class="math inline">\(d\)</span>. On the LHS, the distinct roots are the <span class="math inline">\(r/d\)</span>th roots of unity, then raising to the <span class="math inline">\(d\)</span>th power gives them multiplicity <span class="math inline">\(d\)</span>. On the RHS, this is an exercise in cyclic groups: consider the <span class="math inline">\(n\)</span>th power map on <span class="math inline">\({\mathbb{Z}}/r{\mathbb{Z}}\)</span> and compute its image and kernel. As <span class="math inline">\(\xi\)</span> ranges over <span class="math inline">\(r\)</span>th roots of unity, <span class="math inline">\(\xi^m\)</span> ranges over all <span class="math inline">\(r/d\)</span>th roots of unity, each occurring with multiplicity <span class="math inline">\(d\)</span>.</p>
<p>Substituting <span class="math inline">\(X= t^{-m}\)</span> and multiplying both sides by <span class="math inline">\(t^r\)</span> yields the original result.<a href="#fn61" class="footnote-ref" id="fnref61" role="doc-noteref"><sup>61</sup></a></p>
</div>
<h2 id="comparing-zeta-functions-after-extending-scalars">Comparing Zeta Functions After Extending Scalars</h2>
<p>Next up, we want to compare the zeta function <span class="math inline">\(Z(t)\)</span> for a function field over <span class="math inline">\({\mathbb{F}}_q\)</span> to the zeta function obtained when extending scalars to <span class="math inline">\({\mathbb{Q}}^r\)</span>.</p>
<div class="proposition" title="Factorization identity for the zeta function">
<p>Let <span class="math inline">\(K/{\mathbb{F}}_q\)</span> be a function field, <span class="math inline">\(r\in {\mathbb{Z}}^+\)</span>, and take the compositum <span class="math inline">\(K_r\)</span> of <span class="math inline">\(K\)</span> and <span class="math inline">\({\mathbb{F}}_q^r\)</span> viewed as a function field over <span class="math inline">\({\mathbb{F}}_q^r\)</span>. Let <span class="math inline">\(Z(t)\)</span> be the zeta function of <span class="math inline">\(K/{\mathbb{F}}_q\)</span> and <span class="math inline">\(Z_r(t)\)</span> the zeta function of <span class="math inline">\(K_r/{\mathbb{F}}_q^r\)</span>. Then <span class="math display">\[\begin{align*}   Z_r(t^r) = \prod_{\xi \in \mu_r} Z(\xi t) .\end{align*}\]</span></p>
</div>
<div class="proof" title="?">
<p>We have an Euler product formula <span class="math display">\[\begin{align*}   Z(t) = \prod_{p\in \Sigma(K/{\mathbb{F}}_q)} (1 - t^{\deg(p)})^{-1}  .\end{align*}\]</span> where the sum is over places of the function field.<a href="#fn62" class="footnote-ref" id="fnref62" role="doc-noteref"><sup>62</sup></a></p>
<div class="exercise">
<p>Why is this product expansion true? Write as a geometric series with ratio <span class="math inline">\(t^{\deg(p)}\)</span>. Here just expand each summand to get <span class="math display">\[\begin{align*}   Z(t) = \prod_p \sum_{j=1}^\infty t^{j\deg(p)} .\end{align*}\]</span> Multiplying this out and collecting terms is in effect multiplying out the prime divisors to get effective divisors.</p>
</div>
<p>We now use the result about splitting that was stated (but not proved):</p>
<div class="claim">
<p>If <span class="math inline">\(p\in \Sigma_m(K/{\mathbb{F}}_q)\)</span> is a degree <span class="math inline">\(n\)</span> place and <span class="math inline">\(r\in {\mathbb{Z}}^+\)</span>, then there exist precisely <span class="math display">\[\begin{align*} d\mathrel{\vcenter{:}}=\gcd(m, r) \end{align*}\]</span> places <span class="math inline">\(p^r\)</span> of <span class="math inline">\(K_r\)</span> lying over <span class="math inline">\(p\)</span>, where each place <span class="math inline">\(p^r\)</span> has degree <span class="math inline">\(m/d\)</span>.</p>
</div>
<p>In order to compare <span class="math inline">\(Z_r(t)\)</span> to <span class="math inline">\(Z(t)\)</span>, we collect the <span class="math inline">\(p&#39;\)</span> into ones that have the same fiber. We then can range over all <span class="math inline">\(p\)</span> first, then over all <span class="math inline">\(p&#39;\)</span> in the fiber above <span class="math inline">\(p\)</span>, yielding <span class="math display">\[\begin{align*}   Z_r(t^r) = \prod_{p\in \Sigma(K_{/{\mathbb{F}}_q})} \prod_{p&#39;/p} {1 \over 1 - t^{r\deg(p&#39;)}} .\end{align*}\]</span></p>
<p>Using the Euler product identity, we have for <span class="math inline">\(p\in \Sigma_m(K_{/{\mathbb{F}}_q})\)</span> and <span class="math inline">\(d\mathrel{\vcenter{:}}=\gcd(m, r)\)</span> we can express the innermost product as</p>
<p><span class="math display">\[\begin{align*}   \prod_{p&#39;/p} {1 \over 1 - t^{r\deg(p&#39;)}} = (1 - t^{rm/d})^{-d} = \prod_{\xi\in \mu_r} (1- (\xi t)^m)^{-1} ,\end{align*}\]</span> where we’ve used the fact that we know there are exactly <span class="math inline">\(d\)</span> places and each contributes the same degree in the first expression. By using <span class="math inline">\(-d\)</span> in the previous lemma, we get the last term. Combining all of this yields <span class="math display">\[\begin{align*}   Z_r(t^r)  = \prod_{\xi \in \mu_r} \prod_{p\in \Sigma(K_{/{\mathbb{F}}_q})} (1- (\xi t)^{\deg p})^{-1}  = \prod_{\xi \in \mu_r} Z(\xi t) .\end{align*}\]</span></p>
</div>
<div class="remark">
<p>Similar to taking an abelian extension of number fields and noting that the Dedekind zeta function factors into a finite product: the original zeta function, and in general, Hecke <span class="math inline">\(L\)</span> functions. If you do this for an abelian number field over <span class="math inline">\({\mathbb{Q}}\)</span>, then the Dedekind zeta function of the upstairs number field will be a finite product where one of the terms in the Riemann zeta function and the others are Dirichlet <span class="math inline">\(L\)</span> functions associated to certain Dirichlet characters. So this is some (perhaps simpler) version of that.</p>
</div>
<h2 id="proof-that-delta-1">Proof That <span class="math inline">\(\delta = 1\)</span></h2>
<p>We can finally prove Schmidt’s theorem that <span class="math inline">\(\delta = 1\)</span>:</p>
<div class="proof" title="$\delta = 1$">
<p>Take a <span class="math inline">\(\delta\)</span>th root of unity <span class="math inline">\(\xi \in \mu_\delta\)</span>. Then for all places <span class="math inline">\(p \in \Sigma(K_{/{\mathbb{F}}_q})\)</span>, <span class="math inline">\(\delta\)</span> divides <span class="math inline">\(\deg p\)</span> by definition since it is a gcd, and so we have <span class="math display">\[\begin{align*}   Z(\xi t)  = \prod_{p\in \Sigma(K_{/{\mathbb{F}}_q})} (q - (\xi t)^{\deg p} )^{-1}  = \prod_{p\in \Sigma_{K_{{\mathbb{F}}_q}}} {1 \over 1 - t^{\deg p}} = Z(t) ,\end{align*}\]</span> using the fact that <span class="math inline">\(\xi^{\deg p} = 1\)</span>.</p>
<p>We’re now in a situation where we can apply the previous proposition, which gives the following identity for the zeta function over the degree <span class="math inline">\(\delta\)</span> extension: <span class="math display">\[\begin{align*}   Z_{\delta}(t^\delta) = \prod_{\xi \in \mu_\delta} Z(\xi t) = Z(t)^\delta .\end{align*}\]</span></p>
<p>Our previous formulas show that any zeta function for a 1-variable function field over a finite field has a simple pole at <span class="math inline">\(t=1\)</span>, and since <span class="math inline">\({\operatorname{Ord}}_{t-1}(t^\delta) = 0\)</span>, we get <span class="math display">\[\begin{align*}   -1 = {\operatorname{Ord}}_{t-1} Z_\delta(t^\delta) = {\operatorname{Ord}}_{t-1} Z(t)^\delta) = -\delta ,\end{align*}\]</span> where for the first equality we’re using the fact that the <span class="math inline">\((t-1){\hbox{-}}\)</span>adic valuation of <span class="math inline">\(Z_\delta(t^\delta)\)</span> is one, and for the RHS, the ordinary zeta function has a simple pole at <span class="math inline">\(t=1\)</span> and since we have a valuation, raising something to the <span class="math inline">\(\delta\)</span>th power is just <span class="math inline">\(\delta\)</span> times the original valuation.</p>
</div>
<p>There is some modest representation theory (character theory) that shows up when looking at zeta functions of abelian extensions.</p>
<div class="remark">
<p>We can also conclude that every genus zero function field <span class="math inline">\(K_{/\mathbb{F}_q}\)</span> is isomorphic to <span class="math inline">\({\mathbb{F}}_q(t)\)</span> and thus rational, since such a function field rational iff it has index one. Why? By Riemann-Roch, index one implies existence of a divisor of degree one, and taking a genus zero curve says that every divisor of nonnegative degree is linearly equivalent to an effective divisor. Thus if you have a divisor of degree one, you have an effective divisor of degree one, which makes the function field a degree one extension of a rational function field.</p>
</div>
<div class="exercise" title="?">
<p>Let <span class="math inline">\(K = {\mathbb{F}}_q(t)\)</span>, then show that <span class="math inline">\(g=0, \delta = 1\)</span>, and <span class="math display">\[\begin{align*}   Z(t) = {1 \over (1-qt)(1-t)} .\end{align*}\]</span></p>
<blockquote>
<p>Hint: go back to complicated formulas and substitute <span class="math inline">\(\delta=1\)</span> to simplify things.</p>
</blockquote>
</div>
<p>Thus for rationality of the zeta function, we can get rid of the <span class="math inline">\(\delta\)</span> cluttering up formulas.</p>
<h2 id="the-functional-equation">The Functional Equation</h2>
<p>Going back to the plan, we wanted to show</p>
<ol type="1">
<li><p>Rationality: <span class="math inline">\(Z(t) \in {\mathbb{Q}}(t)\)</span> and thus <span class="math inline">\(Z(t) = P(t) / Q(t)\)</span>,</p></li>
<li><p>Understand the degrees of <span class="math inline">\(P\)</span> and <span class="math inline">\(Q\)</span> in terms of the genus, and</p></li>
<li><p>Ask about the roots of <span class="math inline">\(P(t)\)</span> to understand the analog of the Riemann Hypothesis for Dedekind zeta functions</p></li>
</ol>
<p>We’ll want to establish a functional equation, as is the usual yoga for zeta functions, since it helps establish a meromorphic continuation to <span class="math inline">\({\mathbb{C}}\)</span>. The algebraic significance of the functional equation is that it aids in understand several equivalent packets of data:</p>
<ul>
<li><p>The number of effective divisors of a given degree,</p></li>
<li><p>The number of places of a given degree,</p></li>
<li><p>The number of rational points over each finite degree extension of the base field.</p></li>
</ul>
<div class="theorem" title="Functional Equation">
<p>Let <span class="math inline">\(K_{/\mathbb{F}_q}\)</span> be a function field of genus <span class="math inline">\(g\)</span>, then <span class="math display">\[\begin{align*}   Z(t) = q^{g-1} t^{2g-2} Z\qty{1\over qt} .\end{align*}\]</span></p>
</div>
<div class="proof" title="?">
<p>For <span class="math inline">\(g=0\)</span>, we know that <span class="math display">\[\begin{align*}   Z(t) = {1 \over (1-t)(1-qt)} ,\end{align*}\]</span> and plugging in <span class="math inline">\({1\over qt}\)</span> is a straightforward calculation. So assume <span class="math inline">\(g\geq 1\)</span>.</p>
<p>The idea was that we wrote <span class="math inline">\(Z(t) = F(t) + G(t)\)</span>. The <span class="math inline">\(F(t)\)</span> piece came from summing over divisor classes of degree between <span class="math inline">\(0\)</span> and <span class="math inline">\(2g-2\)</span> and recording the dimension of the associated linear system. The tricky piece <span class="math inline">\(G(t)\)</span> came from summing an infinite geometric series to get a more innocuous closed-form expression of a rational function. So the strategy here is to separately establish the functional equation for each of <span class="math inline">\(F\)</span> and <span class="math inline">\(G\)</span> separately. How to do this: for <span class="math inline">\(g=0\)</span>, there was no <span class="math inline">\(F(t)\)</span> piece. If we have a closed form it’s just a computational check. For <span class="math inline">\(F(t)\)</span>, we’ll use our greatest weapon and dearest ally, the Riemann-Roch theorem. This will provide the extra symmetry we need.</p>
<p>We essentially already applied Riemann-Roch to <span class="math inline">\(G(t)\)</span> to get the closed-form expression, but we haven’t applied it to the small degree divisors. This doesn’t tell you what the dimension is, but rather gives you a duality result: ti gives the dimension in terms of the dimension of a complementary divisor.</p>
<p>Take a canonical divisor <span class="math inline">\(\mathcal{K} \in \operatorname{Div}(K)\)</span>, so <span class="math inline">\(\deg \mathcal{K} = 2g-2\)</span>. As <span class="math inline">\(C\)</span> runs through all divisor classes of <span class="math inline">\(\mathcal{K}\)</span> of degree <span class="math inline">\(d\)</span> with <span class="math inline">\(0\leq d \leq 2g-2\)</span>, so does the complementary divisor <span class="math inline">\(\mathcal{K}-C\)</span>.</p>
<p>We can thus write</p>
<p><span class="math display">\[\begin{align*}   (q-1) F(t)  &amp;= \sum_{0 \leq \deg C \leq 2g-2 } q^{\ell(C)} t^{\deg(C)} \\ (q-1)G(t) &amp;= h \qty{ {q^g t^{2g-1} \over 1-qt} - {1 \over 1-t} } .\end{align*}\]</span></p>
<p>We can thus compute <span class="math display">\[\begin{align*}   (q-1) F\qty{1\over qt} &amp;= \sum_{0\leq \deg C \leq 2g-2} q^{\ell(C)} \qty{1\over {qt} }^{\deg C} \\ &amp;= \sum_{0\leq \deg C \leq 2g-2} q^{\ell(\mathcal{K} - C)} \qty{1\over {qt} }^{2g-2-\deg C} ,\end{align*}\]</span> where in the second step we’ve exchanged <span class="math inline">\(C\)</span> for <span class="math inline">\(\mathcal{K}- C\)</span> and noted that <span class="math inline">\(\deg(\mathcal{K}-C) = 2g-2-\deg(C)\)</span>. We now do the calculation another way, <span class="math display">\[\begin{align*}   (q-1) F(t)  &amp;= \sum_{0\leq \deg C \leq 2g-2} q^{\ell(C)} t^{\deg C} \\ &amp;= q^{g-1} t^{2g-1} \sum_{0\leq \deg C \leq 2g-2} q^{\deg(C) - (2g-2) + \ell(\mathcal{K}-C)} t^{\deg(C) - (2g-2)} &amp;&amp; \text{by Riemann-Roch} \\ &amp;= q^{g-1} t^{2g-2} \sum_{0 \leq \deg C \leq 2g-2} q^{\ell(\mathcal{K} - C)} \qty{1\over qt}^{\deg(\mathcal{K} - C)} \\ &amp;= q^{g-1} t^{2g-2} (q-1) F\qty{1\over qt} .\end{align*}\]</span> where we’ve used Riemann-Roch to find that <span class="math inline">\(\ell(C) = \ell(\mathcal{K}-C) + \deg(C) - g + 1\)</span>. Cancelling the common factor of <span class="math inline">\((q-1)\)</span> establishes the functional equation for <span class="math inline">\(F(T)\)</span>.</p>
<p>Now using the fact that <span class="math inline">\(\delta = 1\)</span>, we have <span class="math display">\[\begin{align*}   (q-1)G(t) = h \qty{ {q^g t^{2g-1} \over 1-qt} - {1\over 1-t} } ,\end{align*}\]</span> and thus <span class="math display">\[\begin{align*}   (q-1) q^{g-1} t^{2g-2} G\qty{1\over qt} &amp;= hq^{g-1} t^{2g-2} \qty{q^g \qty{1\over qt}^{2g-1} - {1\over 1 - q \qty{1\over qt}} - {1\over 1 - {1\over qt}} } \\ &amp;= h\qty{ {-1\over 1-t} + {q^g t^{2g-1} \over 1-qt}} \\ &amp;= (q-1) G(t) ,\end{align*}\]</span> which establishes the functional equation for <span class="math inline">\(G(t)\)</span>.</p>
</div>
<h2 id="the-l-polynomial">The <span class="math inline">\(L\)</span> Polynomial</h2>
<div class="definition" title="The $L$ Polynomial">
<p><span class="math display">\[\begin{align*}   L(t) \mathrel{\vcenter{:}}=(1-t) (1-qt)  Z(t) \in {\mathbb{Z}}[t] .\end{align*}\]</span></p>
</div>
<p>This clears the denominators in <span class="math inline">\(Z(t)\)</span>, so this is now a polynomial of degree at most <span class="math inline">\(2g\)</span>. We can thus rewrite <span class="math display">\[\begin{align*}   Z(t) = {L(t) \over (1-t)(1-qt)} = {a_{2g} t^{2g} + \cdots + a_1 t + a_0 \over (1-t)(1-qt)} .\end{align*}\]</span> Note that if we know <span class="math inline">\(L(t)\)</span>, then we know <span class="math inline">\(Z(t)\)</span>, and in particular we would like to know what the coefficients <span class="math inline">\(a_j\)</span> are. We’ll be able to determine <span class="math inline">\(a_0 = 1\)</span> in all cases, as well as <span class="math inline">\(a_{2g}\)</span> in all cases pretty easily. So it looks like it only remains to compute <span class="math inline">\(a_1, \cdots, a_{2g-1}\)</span>, but the functional equation will give a “mirror” relation between pairs of coefficients. The upshot is that the functional equation shows that we only need to know <span class="math inline">\(a_1, \cdots, a_g\)</span> to completely determine <span class="math inline">\(Z(t)\)</span>. If <span class="math inline">\(g=1\)</span>, just one coefficient suffices. It turns out that <span class="math inline">\(a_1\)</span> will be <span class="math inline">\(q+1\)</span> minus the number of degree one places.</p>
<div class="question">
<ul>
<li><p>What are the constraints on these quantities?</p></li>
<li><p>Can we write the zeta function in a nice way?</p></li>
<li><p>Exactly what do we need to compute to determine it?</p></li>
</ul>
</div>
<p>It will turn out that computing the number of rational points over <span class="math inline">\({\mathbb{F}}_{q}, {\mathbb{F}}_{q^2}, \cdots, {\mathbb{F}}_{q^g}\)</span> will be possible. For example, for a hyperelliptic curve, we’ll have an explicit defining equation and can make an explicit point count, and you only need <span class="math inline">\(g\)</span> of them.</p>
<h1 id="lecture-15-the-lhbox-polynomial">Lecture 15: The <span class="math inline">\(L{\hbox{-}}\)</span>Polynomial</h1>
<h2 id="big-list-of-important-facts">Big List of Important Facts</h2>
<p>Recall that we had <span class="math inline">\(Z(t) + F(t) + G(t)\)</span>:</p>
<p><span class="math display">\[\begin{align*}   (q-1) F(t)  &amp;= \sum_{0 \leq \deg C \leq 2g-2 } q^{\ell(C)} t^{\deg(C)} \\ (q-1)G(t) &amp;= h \qty{ {q^g t^{2g-1} \over 1-qt} - {1 \over 1-t} } .\end{align*}\]</span></p>
<p>Note that <span class="math inline">\(F(t)\)</span> is a polynomial of degree at most <span class="math inline">\(2g-2\)</span>, and clearing denominators in <span class="math inline">\(G(t)\)</span> yields a polynomial of degree at most <span class="math inline">\(2g\)</span></p>
<div class="definition" title="The $L\dash$polynomial">
<p>The <span class="math inline">\(L{\hbox{-}}\)</span>polynomial is defined as <span class="math display">\[\begin{align*}   L(t) \mathrel{\vcenter{:}}=(1-t)(1-qt) Z(t) = (1-t)(1-qt) \sum_{n=0}^\infty A_n t^n \in {\mathbb{Z}}[t] .\end{align*}\]</span></p>
</div>
<p>It turns out that the degree bound of <span class="math inline">\(2g\)</span> is sharp, and the coefficients closer to the middle are most interesting:</p>
<div class="theorem" title="?">
<p>Let <span class="math inline">\(K/{\mathbb{F}}_q\)</span> be a function field of genus <span class="math inline">\(g\geq 1\)</span>, then</p>
<ol type="a">
<li><span class="math inline">\(\deg L = 2g\)</span>.</li>
<li><span class="math inline">\(L(1) = h\)</span></li>
<li><span class="math inline">\(L(t) = q^g t^{2g} L\qty{1\over qt}\)</span>.</li>
<li>Writing <span class="math inline">\(L(t) = \sum_{j=1}^{2g} a_j t^{j}\)</span>,</li>
</ol>
<ul>
<li><p><span class="math inline">\(a_0 = 1\)</span> and <span class="math inline">\(a_{2g} = q^g\)</span>.</p></li>
<li><p>For all <span class="math inline">\(0\leq j \leq g\)</span>, we have <span class="math inline">\(a_{2g-j} = q^{g-j}a_j\)</span>.</p></li>
<li><p><span class="math inline">\(a_1 = {\left\lvert {\Sigma_1(K/{\mathbb{F}_{q}})} \right\rvert} - (q+1)\)</span>, which notably does not depend on <span class="math inline">\(g\)</span>.</p></li>
<li><p>Write <span class="math inline">\(L(t) = \prod_{j=1}^{2g} (1 - \alpha_j t) \in {\mathbb{C}}[t]\)</span><a href="#fn63" class="footnote-ref" id="fnref63" role="doc-noteref"><sup>63</sup></a></p></li>
</ul>
<ol start="5" type="a">
<li><p>The <span class="math inline">\(\alpha_j \in \mkern 1.5mu\overline{\mkern-1.5mu{\mathbb{Z}}\mkern-1.5mu}\mkern 1.5mu\)</span><a href="#fn64" class="footnote-ref" id="fnref64" role="doc-noteref"><sup>64</sup></a> (which were <em>a priori</em> in <span class="math inline">\({\mathbb{C}}\)</span>) and can be ordered such that for all <span class="math inline">\(1\leq j \leq g\)</span>, we have <span class="math inline">\(a_j a_{g+j} = q\)</span>.<a href="#fn65" class="footnote-ref" id="fnref65" role="doc-noteref"><sup>65</sup></a></p></li>
<li><p>If <span class="math inline">\(L_r(t) = (1-t)(1-q^rt) Z_r(t)\)</span> then <span class="math inline">\(L_r(t) = \prod_{j=1}^{2g}(1-\alpha_j^r t)\)</span>, where <span class="math inline">\(K_r\)</span> is the constant extension <span class="math inline">\(K {\mathbb{F}_{q^r}}/{\mathbb{F}_{q^r}}\)</span></p></li>
</ol>
</div>
<p>Note that the <span class="math inline">\(\alpha_j\)</span> are reciprocal roots.</p>
<h2 id="proofs">Proofs</h2>
<h3 id="the-degree-of-l-and-l1">The degree of <span class="math inline">\(L\)</span> and <span class="math inline">\(L(1)\)</span></h3>
<div class="proof" title="of a">
<p>We saw from <span class="math inline">\(Z(t) = F(t) + G(t)\)</span> that <span class="math inline">\(\deg L \leq 2g\)</span>. Equality will follow from the proof of (d) part 1, since this would imply that <span class="math inline">\(a_{2g} = q^g \neq 0\)</span>.</p>
</div>
<div class="proof" title="of b">
<p>Our formula <span class="math inline">\(Z(t) = F(t) + G(t)\)</span> and Schmidt’s theorem (showing <span class="math inline">\(\delta = 1\)</span>) gives <span class="math display">\[\begin{align*}   L(t) = (1-t) (1-qt) F(t) + {h \over q-1} \qty{ q^g t^{2g-2} (1-t) - (1-qt)} ,\end{align*}\]</span> where we’ve expanded <span class="math inline">\(G\)</span> but not <span class="math inline">\(F\)</span> because it involves various <span class="math inline">\(\ell(D)\)</span> which are difficult to compute. It is some polynomial though, and we can evaluate <span class="math inline">\(L\)</span> at 1 to get <span class="math inline">\(L(1) = h\)</span>. Thus the class number is the sum of the coefficients!</p>
</div>
<h3 id="functional-equation">Functional Equation</h3>
<div class="proof" title="of c">
<p>This follows easily from the functional equation for <span class="math inline">\(Z(t)\)</span>, which we already established using the Riemann-Roch theorem: <span class="math display">\[\begin{align*}   Z(t) = q^{g-1} t^{2g-2} Z\qty{1\over qt} .\end{align*}\]</span> We can compute <span class="math display">\[\begin{align*}   q^g t^{2g} L\qty{1\over qt}  &amp;= q^g t^{2g} \qty{1 - {1\over qt}} \qty{1 - {1\over t}} Z\qty{1\over qt} \\ &amp;= q^{g-1} t^{2g-2} (1-t) (1-qt) Z\qty{1\over qt} \\ &amp;= (1-t) (1-qt) Z(t) \\ &amp;\mathrel{\vcenter{:}}= L(t) ,\end{align*}\]</span> where we’ve distributed one <span class="math inline">\(q\)</span> and two <span class="math inline">\(t\)</span>s in the first steps.</p>
</div>
<h3 id="coefficients-a_j-for-j0-1-2g-and-duality">Coefficients <span class="math inline">\(a_j\)</span> for <span class="math inline">\(j=0, 1, 2g\)</span> and Duality</h3>
<div class="proof" title="of d">
<p>Using the functional equation from (c), we can write <span class="math display">\[\begin{align*}   L(t) = q^g t^{2g}  L\qty{1\over qt} = \qty{a_{2g} \over q^g} + \qty{a_{2g-1} \over q^{g-1}}t + \cdots +  \qty{a_0 q^g} t^{2g} ,\end{align*}\]</span> where we’re correcting by enough in <span class="math inline">\(t\)</span> but not enough in <span class="math inline">\(q\)</span> and seeing what we get. Equating coefficients, for <span class="math inline">\(0\leq j \leq g\)</span> we have <span class="math display">\[\begin{align}   a_{2g-j} = q^{g-j} a_j \label{eq:sym_formula_proofc} .\end{align}\]</span></p>
<p>Using the fact that <span class="math inline">\(A_0\)</span> is the number of effective degree zero divisors, which is only zero, we have <span class="math inline">\(A_0 = 1\)</span> and we can multiply formal power series to obtain <span class="math display">\[\begin{align*}   L(t) = a_0 + a_1 t + \cdots + a_{2g} t^{2g}  &amp;= (1-t)(1-qt) \sum_{n=0}^\infty A_n t^n \\ &amp;= \qty{ 1 - (q+1)t + qt^2 }(1 + A_1 t + A_2 t^2 + \cdots)\\ &amp;= 1 + \qty{A_1 - (q+1) }t + \cdots .\end{align*}\]</span> From this, we can read off</p>
<ul>
<li><span class="math inline">\(L(0) = a_0 = 1\)</span></li>
<li><span class="math inline">\(a_1 = A_1 - (q+1) = \Sigma_1(K/k) - (q+1)\)</span></li>
<li><span class="math inline">\(a_{2g} = a_{2g-0} = q^{g-0}a_0 = a^g\)</span> by taking <span class="math inline">\(j=0\)</span> in , and thus <span class="math inline">\(\deg L = 2g\)</span>.</li>
</ul>
</div>
<h3 id="absolute-values-of-roots-rh">Absolute Values of Roots / RH</h3>
<div class="proof" title="of e (the most interesting!)">
<p>Consider the <strong>reciprocal polynomial</strong> <span class="math display">\[\begin{align*}   L^\perp(t) \mathrel{\vcenter{:}}= t^{2g} L\qty{1\over t} = t^{2g} + a_1 t^{2g-1} + \cdots + q^g .\end{align*}\]</span> The original polynomial had <span class="math inline">\({\mathbb{Z}}\)</span> coefficients and constant term 1, so this polynomial is monic and has a nonzero constant term. Thus its roots are patently nonzero algebraic integers in <span class="math inline">\(\mkern 1.5mu\overline{\mkern-1.5mu{\mathbb{Z}}\mkern-1.5mu}\mkern 1.5mu^{\bullet}\)</span>. If <span class="math inline">\(L^\perp(t) = \prod_{j=1}^{2g} (t-\alpha_j)\)</span>, then <span class="math display">\[\begin{align*}   L(t) = t^{2g} L^\perp\qty{1\over t} = \prod_{j=1}^{2g} (1 - \alpha_j t) \end{align*}\]</span> and if the roots of <span class="math inline">\(L(t)\)</span> are <span class="math inline">\(r_j\)</span>, then the roots of <span class="math inline">\(L^\perp(t)\)</span> are the reciprocal roots <span class="math inline">\(1/r_j\)</span> and vice-versa. This shows the first assertion that <span class="math inline">\(r_j \in \mkern 1.5mu\overline{\mkern-1.5mu{\mathbb{Z}}\mkern-1.5mu}\mkern 1.5mu\)</span> as well.</p>
<p>The most interesting part is what follows. Making the substitution <span class="math inline">\(t=qu\)</span> and using (c) we get <span class="math display">\[\begin{align*}   L^\perp(t) &amp;= \prod_{j=1}^{2g} (t- \alpha_j) \\ &amp;\mathrel{\vcenter{:}}= t^{2g} L\qty{1\over t} \\ &amp;= q^{2g} u^{2g} L\qty{1\over qu} &amp;&amp; \text{by (c)} .\end{align*}\]</span></p>
<p>Using <span class="math inline">\(u = t/q\)</span>, we can write <span class="math display">\[\begin{align*}   q^g L(u)  &amp;= q^g \prod_{j=1}^{2g} (1 - \alpha_j u) \\ &amp;= q^g \prod_{j=1}^{2g} \qty{ 1 - {\alpha_j \over q}t} \\ &amp;= q^g \prod_{j=1}^{2g} {\alpha_j \over q} \prod_{j=1}^{2g}\qty{ t - {1\over \alpha_j} } \\ &amp;= \prod_{j=1}^{2g} \qty{t - {q\over \alpha_j}} ,\end{align*}\]</span> where we’ve pulled out a factor of <span class="math inline">\(-\alpha_j/q\)</span> and in the last step we’ve used that <span class="math inline">\(\prod_{j=1}^{2g} \alpha_j = q^g\)</span>. This follows because the <span class="math inline">\(\alpha_j\)</span> are the roots of <span class="math inline">\(L^\perp\)</span>, which has even degree, so the product of all of the roots is equal to the constant term of <span class="math inline">\(L^\perp\)</span>, which is the leading term of <span class="math inline">\(L\)</span>, which we showed was <span class="math inline">\(q^g\)</span>.</p>
<p>This says that if we take these roots <span class="math inline">\(\alpha_j\)</span> as a multiset and replace each <span class="math inline">\(\alpha_j\)</span> with <span class="math inline">\(q/\alpha_j\)</span>, we get the same multiset back. I.e., this multiset is stable under the involution <span class="math display">\[\begin{align*}   {\mathbb{C}}^{\times}&amp;\to {\mathbb{C}}^{\times}\\ z &amp;\mapsto {q\over z} .\end{align*}\]</span> This almost pairs up the elements of this finite set of roots, except it may have fixed points. The complex numbers <span class="math inline">\(\alpha\)</span> such that <span class="math inline">\(\alpha = q/\alpha\)</span> are precisely <span class="math inline">\(\pm \sqrt q\)</span>. So group the <span class="math inline">\(\alpha_i^{-1}\)</span> into</p>
<ul>
<li><span class="math inline">\(k\)</span> <strong>pairs</strong> of nonfixed points, where <span class="math inline">\(\alpha_i \neq q/\alpha_i\)</span>,</li>
<li><span class="math inline">\(m\)</span> points such that <span class="math inline">\(\alpha_i = \sqrt q\)</span>,</li>
<li><span class="math inline">\(n\)</span> points such that <span class="math inline">\(\alpha_i = -\sqrt q\)</span>.</li>
</ul>
<p>So we’d like to show that <span class="math inline">\(m\)</span> and <span class="math inline">\(n\)</span> are both even, so when we’re pairing roots with reciprocals these get paired with themselves. We know <span class="math inline">\(2k + m + n = 2g\)</span>, so <span class="math inline">\(m+n\)</span> is even. We also know that <span class="math display">\[\begin{align*}   q^g  &amp;= \prod_{j=1}^{2g} \alpha_j \\ &amp;= q^k \qty{\sqrt{q}}^m \qty{-\sqrt q}^n  \\ &amp;= (-1)^n q^{k + {m \over 2} + {n\over 2}} \\ &amp;= (-1)^n q^g .\end{align*}\]</span> This forces <span class="math inline">\(n\)</span> to be even, and since <span class="math inline">\(m = 2g-2k-n\)</span>, <span class="math inline">\(m\)</span> must be even as well.</p>
</div>
<div class="proof" title="of f">
<p>We used Dirichlet’s character-style decomposition of <span class="math inline">\(Z(t)\)</span> in Schmidt’s theorem, and we’ll use it again here. Write <span class="math display">\[\begin{align*}   L_r(t^r)  &amp;= (1-t^r) (1-q^r t^r) Z_r(t^r) \\ &amp;= (1-t^r) (1-q^r t^r) \prod_{\xi \in \mu_r} Z(\xi t) \\ &amp;= (1-t^r) (1-q^r t^r) \prod_{\xi \in \mu_r} {L(\xi t) \over (1-\xi t)(1-q\xi t) } \\ &amp;= \prod_{\xi \in \mu_r} L(\xi t)  ,\end{align*}\]</span></p>
<p>where we’ve used that <span class="math display">\[\begin{align*}   \prod_{\xi \in \mu_r} {1\over 1 - \xi t} &amp;= 1-t^r \\ \prod_{\xi \in \mu_r} {1\over 1 - q\xi t} &amp;= 1-q^rt^r \\ \end{align*}\]</span> which leads to all of the denominators canceling. We can then expand <span class="math inline">\(L_r(t^r)\)</span> as a product to compute <span class="math display">\[\begin{align*}   L_r(t^r)  &amp;= \prod_{\xi \in \mu_r} L(\xi t) \\ &amp;= \prod_{\xi\in \mu_r} \prod_{j=1}^{2g} (1- \alpha_j qt) \\ &amp;= \prod_{j=1}^{2g} \prod_{\xi\in \mu_r} (1- \alpha_j qt)  &amp;&amp; \text{since these are finite products}\\ &amp;= \prod_{j=1}^{2g} (1 - \alpha_j^r t^r) .\end{align*}\]</span></p>
<p>From this we can conclude that <span class="math inline">\(L_r(t) = \prod_{j=1}^{2g} (1- \alpha_j^r t)\)</span>, since <span class="math inline">\(t^r\)</span> is just an indeterminate and these are all identities of polynomials.</p>
</div>
<h2 id="applications-and-corollaries">Applications and Corollaries</h2>
<h3 id="counting-rational-points">Counting Rational Points</h3>
<div class="corollary" title="?">
<p>Suppose <span class="math inline">\(K/{\mathbb{F}_{q}}\)</span> is genus <span class="math inline">\(g\geq 1\)</span> and <span class="math inline">\(L(t) = \prod_{j=1}^{2g}(1- \alpha_j t)\)</span>. Then for all <span class="math inline">\(r\in {\mathbb{Z}}^{\geq 0}\)</span>, we have a nice expression for <span class="math inline">\(N_r\)</span>: <span class="math display">\[\begin{align*}   N_r \mathrel{\vcenter{:}}={\left\lvert {\Sigma_1(K_r/{\mathbb{F}_{q^r}})} \right\rvert} = q^r + 1 - \sum_{j=1}^{2g} \alpha_j^r .\end{align*}\]</span></p>
</div>
<div class="proof" title="?">
<p>Let <span class="math inline">\(L_r(t) = \sum_{j=1}^{2g} a_{j, r} = \prod_{j=1}^{2g} (1 - \alpha_j^r t)\)</span>, so <span class="math inline">\(a_{1, r} = -\sum_{j=1}^{2g} \alpha_j^r\)</span>. Then using (d) part 3, we can write <span class="math display">\[\begin{align*}   {\left\lvert {\Sigma_1(K_r/{\mathbb{F}_{q^r}})} \right\rvert} = q^r + 1 + a_{1, r} = q^r + 1 - \sum_{j=1}^{2g} \alpha_j^r .\end{align*}\]</span> This follows from consider <span class="math inline">\(\prod (1-\alpha_j^r t)\)</span>, where extracting the <span class="math inline">\(t^1\)</span> coefficient involves choosing <span class="math inline">\(-\alpha_j^r\)</span> once and 1 from all of the remaining terms, and then you sum over the disjoint possibilities.</p>
</div>
<div class="remark">
<p>We’d really like to compute the coefficients of the <span class="math inline">\(L\)</span> polynomials, since we can solve a polynomial equation to get the roots. But the Galois groups of these polynomials may not be solvable, so the term <span class="math inline">\(\sum \alpha_j^r\)</span> will in general be some symmetric function in the complex roots. Note that any symmetric polynomial in the roots is also a symmetric polynomial in the coefficients.</p>
</div>
<h3 id="relating-rational-points-to-coefficients">Relating Rational Points to Coefficients</h3>
<div class="corollary" title="?">
<p>For <span class="math inline">\(K/{\mathbb{F}_{q}}\)</span> a function field, define <span class="math display">\[\begin{align*}   S_r \mathrel{\vcenter{:}}= N_r - (q^r + 1) = - \sum_{j=1}^{2g} \alpha_j^r .\end{align*}\]</span> Note that <span class="math inline">\(N_r = {\left\lvert {\Sigma(K_r/{\mathbb{F}_{q^r}})} \right\rvert}\)</span> is the number of <span class="math inline">\({\mathbb{F}_{q^r}}{\hbox{-}}\)</span>rational point. Then</p>
<ol type="a">
<li><span class="math inline">\(L&#39;(t)/L(t) = \sum_{r=1}^\infty S_r t^{r-1}\)</span>.</li>
<li><span class="math inline">\(a_0 = 1\)</span>, and for all <span class="math inline">\(1\leq i \leq g\)</span>, <span class="math display">\[\begin{align*}       ia_i = S_i a_0 + S_{i-1} a_1 + \cdots + S_1 a_{i-1}     .\end{align*}\]</span></li>
</ol>
</div>
<div class="remark">
<p>What’s the usefulness here? If you only have the coefficients of the <span class="math inline">\(L\)</span> polynomials, taking the logarithmic derivative gives access to these quantities <span class="math inline">\(S_r\)</span>. The second formula is a recursive expression for the <span class="math inline">\(a_i\)</span> in terms of the <span class="math inline">\(S_i\)</span>. So you can compute the coefficients of the <span class="math inline">\(L\)</span> polynomial by counting <span class="math inline">\({\mathbb{F}_{q^r}}{\hbox{-}}\)</span>rational points on your curve (or places on your function field) for <span class="math inline">\(r=1,2,\cdots, g\)</span>. Similarly, if you have all of the coefficients for a <span class="math inline">\(Z\)</span> polynomial, you can solve for the <span class="math inline">\(S_i\)</span>.</p>
</div>
<div class="proof" title="of a">
<p>Essentially just a computation. Logarithmically differentiating both sides of <span class="math inline">\(L(t) = \prod_{j=1}^{2g} (1-\alpha_j t)\)</span> and expanding in a geometric series yields <span class="math display">\[\begin{align*}   {L&#39;(t)  \over L(t) }  &amp;= \sum_{j=1}^{2g} {-\alpha_j \over a -\alpha_j t} \\ &amp;= \sum_{j=1}^{2g} (-\alpha_j) \sum_{r=0}^\infty \qty{\alpha_j t}^r \\ &amp;= \sum_{r=1}^{\infty} \qty{\sum_{j=1}^{2g} (-\alpha_j^r) }t^{r-1} \\ &amp;= \sum_{r=1}^{\infty} S_r t^{r-1} .\end{align*}\]</span></p>
</div>
<div class="proof" title="of b">
<p>Clearing denominators and equating coefficients in <span class="math inline">\(L&#39;(t) = L(t) \sum_{r=1}^{\infty} S_r t^{r-1}\)</span> yields the result immediately, since the <span class="math inline">\(ia_i\)</span> are what appear as coefficients in the derivative of a formal power series, whereas the RHS is a Cauchy product.</p>
</div>
<div class="remark">
<p>The moral: to compute zeta functions, you don’t have to enumerate divisors and compute dimensions of Riemann-Roch spaces. Note that the Riemann-Roch theorem tells us something interesting about these dimensions, but doesn’t compute the dimension outright! Instead, it suffices to compute <span class="math inline">\({\mathbb{F}_{q^r}}{\hbox{-}}\)</span>rational points for <span class="math inline">\(r\leq g\)</span>.</p>
<p>A few lectures ago we discussed the places on a hyperelliptic function field, including a place at infinity. Computing the zeta function of a hyperelliptic curve involves plugging in <span class="math inline">\(x{\hbox{-}}\)</span>values and determining if it is</p>
<ul>
<li>A nonzero non-square: no <span class="math inline">\(y{\hbox{-}}\)</span>values,</li>
<li>Zero: exactly one <span class="math inline">\(y{\hbox{-}}\)</span>value,</li>
<li>A nonzero square: two <span class="math inline">\(y{\hbox{-}}\)</span>values.</li>
</ul>
<p>This is what happens at the finite places. To handle the place at <span class="math inline">\(\infty\)</span>, there is a recipe for the degree of the polynomial in terms of the coefficients. So for any hyperelliptic function field (and in particular, for any elliptic function field) we have a concrete algorithm for computing their zeta functions. Note that this is not necessarily a <em>good</em> algorithm: it still involves plugging in many values and checking if things are squares in finite values. It seems that most people who compute a lot of zeta functions mostly focus on hyperelliptic function fields.</p>
<p>How are you going to compute zeta functions or even places for more complicated function fields? The Riemann-Hurwitz formula says that since any function field is a finite degree extension of a rational function field, the curve is given as a degree 2 branched cover of <span class="math inline">\({\mathbb{P}}^1\)</span>, it suffices to compute the fibers of this cover in order to get point counts.</p>
</div>
<h1 id="lecture-16-todo">Lecture 16 (Todo)</h1>
<h1 id="lecture-17-todo">Lecture 17 (Todo)</h1>
<h1 id="lecture-18-todo">Lecture 18 (Todo)</h1>
<h1 id="lecture-19-todo">Lecture 19 (Todo)</h1>
<h1 id="lecture-20-todo">Lecture 20 (Todo)</h1>
<h1 id="lecture-21-todo">Lecture 21 (Todo)</h1>
<h1 id="lecture-22-todo">Lecture 22 (Todo)</h1>
<h1 id="lecture-23-sketch">Lecture 23 (Sketch)</h1>
<div class="corollary" title="?">
<p>Let <span class="math inline">\(k\)</span> be a perfect field of characteristic <span class="math inline">\(p&gt;0\)</span>, <span class="math inline">\(d\in {\mathbb{Z}}^{\geq 0}\)</span> with <span class="math inline">\(\gcd(d, p) = 1\)</span>, and let <span class="math inline">\(f\in k[x]\)</span> and <span class="math inline">\(L\mathrel{\vcenter{:}}= K(p^{-1} (f))\)</span>. Then <span class="math inline">\([L:K] = p\)</span> and <span class="math inline">\(L/k\)</span> is a regular function field of genus <span class="math inline">\(g = {1\over 2}(p-1)(d-1)\)</span> that is unramified away from <span class="math inline">\(\infty\)</span>.</p>
</div>
<h2 id="artin-schreier-extensions-of-function-fields">Artin-Schreier Extensions of Function Fields</h2>
<div class="fact">
<p>For <span class="math inline">\(k\)</span> a field, <span class="math inline">\(\operatorname{ch}(k) = p &gt; 0\)</span>, and <span class="math inline">\(a, b\in k\)</span>, TFAE:</p>
<ol type="1">
<li><p><span class="math inline">\(k(p^{-1}(a)) = k(p^{-1}(b))\)</span></p></li>
<li><p><span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> generate the same cyclic subgroup of <span class="math inline">\(k/p(k)\)</span>.</p></li>
</ol>
<p>In particular, if <span class="math inline">\(K(p^{-1}(u))/k\)</span> is an Artin-Schreier extension, then for all <span class="math inline">\(x\in k\)</span>, <span class="math inline">\(k(p^{-1}(u - (x^p - x))) = k(p^{-1}(u))\)</span>.</p>
</div>
<div class="lemma" title="?">
<p>Let <span class="math inline">\(k\)</span> a <em>perfect</em> field of characteristic <span class="math inline">\(p&gt;0\)</span>, <span class="math inline">\(K/k\)</span> a function field, <span class="math inline">\(u\in K\)</span>, and <span class="math inline">\(p\in \Sigma(K/k)\)</span>.</p>
<ul>
<li><p>There exists a <span class="math inline">\(z\in K\)</span> such that <span class="math inline">\(z_v \mathrel{\vcenter{:}}= v_p(u - (z^p - z))\)</span> satisfies either</p>
<ul>
<li><span class="math inline">\(z_v \geq 0\)</span>, or</li>
<li><span class="math inline">\(z_v\leq 0\)</span> and <span class="math inline">\(z_p\)</span> is prime to <span class="math inline">\(p\)</span>.</li>
</ul></li>
<li><p>There exists a most one <span class="math inline">\(m\in {\mathbb{Z}}\)</span> that is negative and prime to <span class="math inline">\(p\)</span> such that for some <span class="math inline">\(z\in K\)</span> we have <span class="math inline">\(v_p(u - (z^p - z)) = m\)</span>. If such an <span class="math inline">\(m\)</span> exists, it is given by <span class="math inline">\(m = \max\left\{{v_p(u - (z^p - z)) ~{\text{s.t.}}~z\in K }\right\}\)</span>.</p></li>
<li><p>It follows that precisely <em>one</em> of the two alternatives in the first statement holds.</p></li>
</ul>
</div>
<div class="theorem" title="Genus Formula for Artin-Schreier Extensions">
<p>Let <span class="math inline">\(k\)</span> a <em>perfect</em> field of characteristic <span class="math inline">\(p&gt;0\)</span>, <span class="math inline">\(K/k\)</span> a function field, <span class="math inline">\(u\in K\)</span>, <span class="math inline">\(L\mathrel{\vcenter{:}}= K(p^{-1}(u))\)</span>, <span class="math inline">\(p\in \Sigma(K/k)\)</span>, and set <span class="math display">\[\begin{align*}   M_p \mathrel{\vcenter{:}}= \begin{cases} {\left\lvert {m} \right\rvert} &amp; \text{if there exists a $z\in K$ such that } v_p(u - (z^p - z)) = m \\ -1 &amp; \text{if there exists a $z\in K$ such that } v_p(u - (z^p - z)) \geq 0 \\ \end{cases} .\end{align*}\]</span></p>
<p>Then</p>
<ol type="a">
<li><p>If <span class="math inline">\(M_p = -1\)</span>, then <span class="math inline">\(p\)</span> is unramified in <span class="math inline">\(L\)</span>.</p></li>
<li><p>If <span class="math inline">\(M_p \geq 1\)</span>, then <span class="math inline">\(p\)</span> is totally ramified in <span class="math inline">\(L\)</span>. Letting <span class="math inline">\(\tilde p\)</span> be the unique place lying over <span class="math inline">\(p\)</span>, then <span class="math display">\[\begin{align*}         d(\tilde p / p) = (p-1)(M_p + 1) &amp;&amp; \text{(wild ramification)}       .\end{align*}\]</span></p></li>
<li><p>Suppose there exists a <span class="math inline">\(p\)</span> such that <span class="math inline">\(M_p \geq 1\)</span>. Then <span class="math inline">\([L: K] = p\)</span>, <span class="math inline">\(L/k\)</span> is regular, and we have a genus formula <span class="math display">\[\begin{align*}         g_L = p g_K + \qty{p-1 \over 2} \qty{ -2 + \sum_{p\in \Sigma(K/k)}(M_p+1)\deg p }       .\end{align*}\]</span></p></li>
</ol>
</div>
<h1 id="lecture-24-hermitian-function-fields-sketch">Lecture 24: Hermitian Function Fields (Sketch)</h1>
<div class="theorem" title="Stichtenoth Prop 6.4.1">
<p>Let <span class="math inline">\(k\)</span> be a perfect field of characteristic <span class="math inline">\(p&gt;0\)</span>, <span class="math inline">\(q \mathrel{\vcenter{:}}= p^s\)</span> some power of <span class="math inline">\(p\)</span>, <span class="math inline">\(K \mathrel{\vcenter{:}}= k(x)\)</span>. Let <span class="math inline">\(u \in k^{\times}\)</span> and suppose <span class="math inline">\(T^q + \mu T\)</span> splits in <span class="math inline">\(k\)</span>.<a href="#fn66" class="footnote-ref" id="fnref66" role="doc-noteref"><sup>66</sup></a> Let <span class="math inline">\(f\in k[x]\)</span> with <span class="math inline">\(\deg(f) = M\)</span> where <span class="math inline">\(p\not{~\Bigm|~}M\)</span>. Then</p>
<ol type="a">
<li><p>The polynomial <span class="math display">\[\begin{align*}       P(x, y) \mathrel{\vcenter{:}}= y^q + uy -f(x) \in k[x]     \end{align*}\]</span> is geometrically irreducible, and so <span class="math inline">\(L\mathrel{\vcenter{:}}=\operatorname{ff}(k[x,y]/\left\langle{p}\right\rangle)\)</span> is a regular function field over <span class="math inline">\(k\)</span>.</p></li>
<li><p>We have <span class="math inline">\([L: K] = q\)</span>.</p></li>
<li><p><span class="math inline">\(A\mathrel{\vcenter{:}}=\left\{{\gamma\in k ~{\text{s.t.}}~\gamma^q + u\gamma = 0}\right\}\)</span> is an order <span class="math inline">\(q\)</span> subgroup of <span class="math inline">\({\mathbb{G}}_a/k \mathrel{\vcenter{:}}=(k, +)\)</span>. Moreover, for all <span class="math inline">\(\sigma\in {\operatorname{Aut}}(L/K)\)</span>, there exists a unique <span class="math inline">\(\gamma(\sigma)\in A\)</span> such that <span class="math inline">\(\sigma(y) = y + \gamma(\sigma)\)</span> and <span class="math inline">\(\sigma \mapsto \gamma(\sigma)\)</span> yields an isomorphism <span class="math inline">\({\operatorname{Aut}}(L/K) \xrightarrow{\sim} A\)</span>.</p></li>
<li><p>No finite place of <span class="math inline">\(K\)</span> ramifies in <span class="math inline">\(L\)</span>, while <span class="math inline">\(p_\infty\)</span> is totally ramified. If <span class="math inline">\(\tilde p_ \infty / p_ \infty\)</span>, then <span class="math inline">\(d(\tilde p_ \infty / p_ \infty) = (q-1)(M+1)\)</span>.</p></li>
<li><p>We have <span class="math display">\[\begin{align*}       g_L = \qty{1\over 2}(q-1)(m-1)     .\end{align*}\]</span></p></li>
</ol>
</div>
<p>Next up: one of the most important function fields of all time!</p>
<div class="definition" title="Hermitian Function Field">
<p>Set <span class="math inline">\(A_q \mathrel{\vcenter{:}}={\mathbb{F}}_{q^2}(x, y)\)</span> and consider the polynomial <span class="math display">\[\begin{align*}   y^q + y = x^{q+1} .\end{align*}\]</span> Then <span class="math inline">\(u=1, M = q+1\)</span>, and <span class="math inline">\(g = \qty{1\over 2}(q)(q-1) = {q \choose 2}\)</span>.</p>
</div>
<div class="theorem" title="?">
<p><span class="math display">\[\begin{align*}   {\left\lvert {\Sigma_1(A_q / {\mathbb{F}}_{q^2})} \right\rvert} = q^3 + 1 .\end{align*}\]</span></p>
</div>
<div class="corollary" title="Ihara">
<p>If <span class="math inline">\(K/{\mathbb{F}}_q\)</span> is a maximal function field of genus <span class="math inline">\(g\)</span>, then <span class="math display">\[\begin{align*}   g\leq \qty{1\over 2}\qty{q - \sqrt q} .\end{align*}\]</span></p>
</div>
<div class="fact">
<p>If <span class="math inline">\(K/{\mathbb{F}}_{q^2}\)</span> is maximal, then <span class="math inline">\(N_1 = q^2 + 1 + 2gq = q^2 + q - \sum_{j=1}^{2g} \alpha_j\)</span>. Applying the RH, <span class="math inline">\({\left\lvert {\alpha_j} \right\rvert} = q\)</span>, and it follows that <span class="math inline">\(\alpha_j = -q\)</span> for all <span class="math inline">\(j\)</span> and thus <span class="math display">\[\begin{align*}   L(t) = \qty{1+qt}^{2g} .\end{align*}\]</span></p>
</div>
<div class="theorem" title="Kleiman, Serre">
<p>If <span class="math inline">\(K/{\mathbb{F}}_q \subset L/{\mathbb{F}}_q\)</span> is a finite extension of function fields, then <span class="math inline">\(L_K(t)\)</span> divides <span class="math inline">\(L_L(t)\)</span>.</p>
</div>
<div class="corollary" title="?">
<p>If <span class="math inline">\(L/{\mathbb{F}}_{q^2}\)</span> is maximal, so is <span class="math inline">\(K/{\mathbb{F}}_{q^2}\)</span>.</p>
</div>
<div class="theorem" title="Stichtenoth?">
<p><span class="math display">\[\begin{align*}   {\operatorname{Aut}}(A_1 / {\mathbb{F}}_{q^2}) \cong \operatorname{PGU}_3({\mathbb{F}}_{q^2}) ,\end{align*}\]</span> the <em>projective unitary group</em>, which is of order <span class="math inline">\(q^3(q^2-1)(q^3+1)\)</span>.</p>
</div>
<div class="remark">
<p>The size of this group <span class="math inline">\(G_q\)</span> is asymptotically <span class="math inline">\(G_q \sim q^8\)</span>, while <span class="math inline">\(g(A_q) \sim {q^2\over 2}\)</span>, so this is a lot of automorphisms compared to the sizes of automorphism groups of Riemann surfaces. More precisely, <span class="math inline">\(G_q &gt; 16 g(q)^4\)</span>.</p>
</div>
<div class="theorem" title="Stichtenoth">
<p>For any other function field <span class="math inline">\(K/k\)</span> for any field <span class="math inline">\(k\)</span>, <span class="math inline">\({\left\lvert {{\operatorname{Aut}}(K/k)} \right\rvert} &lt; 16g^4\)</span>.</p>
</div>
<div class="remark">
<p>This only happens in positive characteristic, when <span class="math inline">\(\operatorname{ch}(k), g, q\)</span> match up in a very specific way. So Hermitian function fields are the algebraic curves with the most symmetries.</p>
</div>
<div class="theorem" title="Hurwtiz">
<p>In characteristic zero, if <span class="math inline">\(g\geq 2\)</span> then <span class="math inline">\({\left\lvert {{\operatorname{Aut}}(K/k)} \right\rvert} \leq 84(g-1)\)</span>.</p>
</div>
<h1 id="lecture-25-differential-pullback-theorem-sketch">Lecture 25: Differential Pullback Theorem (Sketch)</h1>
<p>This will recover the Riemann-Hurwitz formula by taking degrees.</p>
<div class="lemma" title="?">
<p>Let <span class="math inline">\(K/k \subset L/\ell\)</span> be a finite degree extension of function fields, and suppose <span class="math inline">\(K/k\)</span> is regular and <span class="math inline">\(L/K\)</span> is separable. Then <span class="math inline">\(\ell/k\)</span> and <span class="math inline">\(L/\ell\)</span> are separable and <span class="math inline">\(L\ell\)</span> is regular.</p>
<p><p style="text-align:center;"> <img class="tikz" src="/home/zack/SparkleShare/github.com/Notes/Class_Notes/2020/Fall/Algebraic Curves/684944a202eb97d0335e3bb18368e8b47a7ccb57.svg"></p></p>
<p><a href="https://q.uiver.app/?q=WzAsNCxbMSwyLCJrIl0sWzIsMSwiXFxlbGwiXSxbMSwwLCJMIl0sWzAsMSwiSyJdLFszLDIsIlxcc2NyaXB0c2l6ZVxcdGV4dHtzZXBhcmFibGV9IiwwLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dLFsyLDEsIiIsMCx7InN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMSwwLCIiLDAseyJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzMsMCwiXFxzY3JpcHRzaXplXFx0ZXh0e3JlZ3VsYXJ9IiwyLHsic3R5bGUiOnsiaGVhZCI6eyJuYW1lIjoibm9uZSJ9fX1dXQ==">Link to diagram</a></p>
</div>
<p>Recall some facts/definitions:</p>
<ul>
<li><p>The <strong>adele ring of <span class="math inline">\(K\)</span></strong> is defined as <span class="math display">\[\begin{align*}     \mathcal{A}_K \mathrel{\vcenter{:}}=\prod_{v\in \Sigma(K/k)}&#39; K     \end{align*}\]</span> which is a <em>restricted direct product</em>, i.e. each element <span class="math inline">\(\alpha\in \mathcal{A}_K\)</span> has the property that for almost every <span class="math inline">\(p\)</span>, the <span class="math inline">\(p{\hbox{-}}\)</span>adic valuation of the <span class="math inline">\(p\)</span>th coordinate <span class="math inline">\(v_p(\alpha_p) \geq 0\)</span>. There is a diagonal embedding <span class="math display">\[\begin{align*}       K &amp;\hookrightarrow\mathcal{A}_K \\     f &amp;\mapsto (f, f, \cdots)     .\end{align*}\]</span></p></li>
<li><p>For any divisor <span class="math inline">\(D\in \operatorname{Div}K\)</span>, define <span class="math display">\[\begin{align*}       \mathcal{A}_K(D) \mathrel{\vcenter{:}}=\left\{{\alpha\in \mathcal{A}_K ~{\text{s.t.}}~v_p(\alpha_p) \geq - v_p(D)\,\, \forall p}\right\}     ,\end{align*}\]</span> the adelic analog of the Riemann-Roch space.</p></li>
<li><p>A space of linear forms <span class="math display">\[\begin{align*}     \Omega(D) \mathrel{\vcenter{:}}=\left\{{\omega: \mathcal{A}_K \to A ~{\text{s.t.}}~\ker \omega \supseteq K + \mathcal{A}_K(D)}\right\}     \end{align*}\]</span> where <span class="math inline">\(D_1 \leq D_2 \implies \Omega_K(D_2) \leq \Omega_K(D_1)\)</span>.</p></li>
<li><p><span class="math inline">\(\Omega_K \mathrel{\vcenter{:}}=\varinjlim_{D} \Omega_K(D)\)</span>.</p></li>
<li><p>For any <span class="math inline">\(\omega \in \Omega_K^{\bullet}\)</span>, <span class="math inline">\((\omega) \mathrel{\vcenter{:}}=\max\left\{{D ~{\text{s.t.}}~\omega=0 \text{ on } \mathcal{A}_K(D) + K}\right\}\)</span>.</p></li>
<li><p><span class="math inline">\(\mathcal{A}_{L/K} = \left\{{\alpha\in \mathcal{A}_L ~{\text{s.t.}}~\alpha q_1 = \alpha q_2 \text{ if } Q_1, Q_2 / p}\right\} \leq_{{\text{Vect}}_\ell} A_L\)</span></p></li>
<li><p>The <strong>adelic trace map</strong> <span class="math display">\[\begin{align*}       \operatorname{Tr}_{L/K} : \mathcal{A}_{L/K} &amp; \to \mathcal{A}_K  \\     \alpha &amp;\mapsto \operatorname{Tr}_{L/K}(\alpha) / p = \operatorname{Tr}_{L/K}(\alpha_Q) &amp;&amp; \text{for any }Q/p     .\end{align*}\]</span></p></li>
</ul>
<div class="theorem" title="?">
<p>Let <span class="math inline">\(\omega\in \Omega_K\)</span>, then there exists a unique <span class="math inline">\(\omega^* \in \mathcal{A}_L\)</span> such that</p>
<ul>
<li>For all <span class="math inline">\(\alpha\in \mathcal{A}_{L/K}\)</span>, we have <span class="math inline">\(\operatorname{Tr}_{\ell/k} \omega^*(\alpha) = \omega(\operatorname{Tr}_{L/K}(\alpha))\)</span>.</li>
</ul>
<p><span class="math inline">\(\omega^*\)</span> is formally denoted <span class="math inline">\(\mathrm{Cotr}_{L/K}(\omega)\)</span> and called the <strong>cotrace</strong> of <span class="math inline">\(\omega\)</span>.</p>
</div>
<div class="theorem" title="?">
<p>If <span class="math inline">\(K/k \subset L/\ell\)</span> is a finite extension of function fields with <span class="math inline">\(K/k\)</span> regular, then for all <span class="math inline">\(\omega\in \mathcal{A}_K^{\bullet}\)</span>, we have <span class="math inline">\(\omega^* \in \mathcal{A}_L^{\bullet}\)</span>. Moreover, <span class="math display">\[\begin{align*}   (\omega^*) = \iota_{L/K}((\omega)) + D(L/K) .\end{align*}\]</span> Taking degrees yields the Riemann-Hurwitz formula.</p>
</div>
<h1 class="unnumbered" id="lecture-26-todo">Lecture 26 (Todo)</h1>
<div id="refs" class="references hanging-indent" role="doc-bibliography">
<div id="ref-stichtenoth_2009">
<p>Stichtenoth, H. (2009). <em>Algebraic function fields and codes</em>. Springer.</p>
</div>
</div>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>Note <span class="math inline">\(k[t]\)</span> is not a field.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>Hint: Zariski’s lemma.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3" role="doc-endnote"><p>See Artin-Tate Lemma, this doesn’t necessarily hold for general rings.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4" role="doc-endnote"><p>There is a common generalization: matroids.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5" role="doc-endnote"><p>This is similar to checking if a vector is in the span of a collection of previous vectors.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6" role="doc-endnote"><p>See NT 1 notes for more details on valuations.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7" role="doc-endnote"><p>Reminder: for <span class="math inline">\(\ell/k\)</span> and <span class="math inline">\(\alpha\in \ell\)</span> algebraic over <span class="math inline">\(k\)</span>, then <span class="math inline">\(k(\alpha) = k[\alpha]\)</span>.<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8" role="doc-endnote"><p>Note that the frobenius maps <span class="math inline">\(k^{1\over p} \twoheadrightarrow k\)</span>, so this is sort of like inverting this map.<a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn9" role="doc-endnote"><p>This is a good time to review valuations and uniformizing elements from NTII.<a href="#fnref9" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn10" role="doc-endnote"><p>I.e. <span class="math inline">\(k(t)\otimes_k \mkern 1.5mu\overline{\mkern-1.5muk\mkern-1.5mu}\mkern 1.5mu\)</span> is a domain.<a href="#fnref10" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn11" role="doc-endnote"><p>See Cornell-Silverman-Stevens covering the proof of FLT, modular curves from the function field perspective.<a href="#fnref11" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn12" role="doc-endnote"><p>Hint: use a denominator clearing argument.<a href="#fnref12" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn13" role="doc-endnote"><p>Referred to as <em>hyperelliptic</em> or <em>superelliptic</em> function fields. Hint: use FT 9.21 or Lang’s Algebra.<a href="#fnref13" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn14" role="doc-endnote"><p>This is an example of a non-rational genus zero function field.<a href="#fnref14" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn15" role="doc-endnote"><p>In other words, <span class="math inline">\(e^{-v({\,\cdot\,})}\)</span> is an ultrametric norm.<a href="#fnref15" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn16" role="doc-endnote"><p>This means that the two structures are compatible.<a href="#fnref16" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn17" role="doc-endnote"><p>This follows from the fact that the quotient map is a group morphism. Note that the additive notation makes this more suggestive of what an original valuation satisfied.<a href="#fnref17" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn18" role="doc-endnote"><p>Any such map satisfying these two properties is a <strong>Krull valuation</strong>, Krull’s generalization of classical valuations.<a href="#fnref18" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn19" role="doc-endnote"><p>Note that in a totally ordered group, either <span class="math inline">\(v(x) \geq 0\)</span> or <span class="math inline">\(-v(x) \geq 0\)</span>, so we get the property that either <span class="math inline">\(x, x^{-1} \in R_v\)</span>.<a href="#fnref19" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn20" role="doc-endnote"><p>Pete’s Commutative Algebra Notes, Ch. 17.10<a href="#fnref20" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn21" role="doc-endnote"><p>Here <span class="math inline">\(\mathfrak{m}_v\)</span> denotes pulling back the maximal ideal along this morphism of rings.<a href="#fnref21" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn22" role="doc-endnote"><p>Finitely generated field extension of transcendence degree one.<a href="#fnref22" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn23" role="doc-endnote"><p>Note that in French, separated may be interpreted as Hausdorff, but here we mean points are closed or equivalently any two distinct points admit open neighborhoods that do not meet the other point.<a href="#fnref23" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn24" role="doc-endnote"><p>Schemes are a full subcategory of the much larger category of locally ringed spaces.<a href="#fnref24" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn25" role="doc-endnote"><p>Resolving means given <span class="math inline">\(K/k\)</span>, we want to find a complete nonsingular affine variety whose function field is <span class="math inline">\(K\)</span>.<a href="#fnref25" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn26" role="doc-endnote"><p>See NTII, Corollary 1.60: a valuation on a field whose restriction to a finite index subfield is discrete is itself discrete.<a href="#fnref26" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn27" role="doc-endnote"><p>See CA notes, “Second Normalization Theorem”, where normalization is a more geometric synonym for integral closure.<a href="#fnref27" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn28" role="doc-endnote"><p>Krull dimension, i.e. the supremum of lengths of chains of prime ideals.<a href="#fnref28" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn29" role="doc-endnote"><p>It will be discrete in our case. Note that this finiteness condition always holds if <span class="math inline">\(L/K\)</span> is separable.<a href="#fnref29" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn30" role="doc-endnote"><p>An element of valuation one.<a href="#fnref30" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn31" role="doc-endnote"><p>This is the localization at <span class="math inline">\(\mathfrak{p}\)</span>.<a href="#fnref31" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn32" role="doc-endnote"><p>This is a truly standard fact from commutative algebra.<a href="#fnref32" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn33" role="doc-endnote"><p>A field extension that is finitely generated as an algebra is necessarily a finite degree extension.<a href="#fnref33" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn34" role="doc-endnote"><p>This may not necessarily be a Dedekind domain, since it need not be integrally closed.<a href="#fnref34" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn35" role="doc-endnote"><p>Use the fact that the degree will be bigger than 1 when the constant field is bigger than <span class="math inline">\(k\)</span>.<a href="#fnref35" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn36" role="doc-endnote"><p>These are very rich but easier to understand: take a polynomial ring in finitely many variables and mod out by a prime ideal.<a href="#fnref36" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn37" role="doc-endnote"><p>These will be Noetherian by the Hilbert basis theorem, but may not be integrally closed.<a href="#fnref37" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn38" role="doc-endnote"><p>This says that if you have an affine domain <span class="math inline">\(R\)</span> of a certain Krull dimension, then it is finitely generated as a module over a subring which is a polynomial ring in <span class="math inline">\(\operatorname{trdeg}(R)\)</span> variables. This is like a stronger integral version of taking a finitely generated field extension and writing it as a finite degree field extension of a purely transcendental extension.<a href="#fnref38" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn39" role="doc-endnote"><p>Pete’s Commutative Algebra, Theorem 18.4 (a normalization theorem).<a href="#fnref39" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn40" role="doc-endnote"><p>Pete’s NTII, Proposition 1.17<a href="#fnref40" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn41" role="doc-endnote"><p>Pete’s CA, Section 23.2.<a href="#fnref41" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn42" role="doc-endnote"><p>Alternatively, see Pete’s Commutative Algebra, Corollary 23.6.<a href="#fnref42" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn43" role="doc-endnote"><p>Note that primes in a UFD are principal.<a href="#fnref43" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn44" role="doc-endnote"><p>This quantity made an appearance near the end of Pete’s advanced course on elliptic curves.<a href="#fnref44" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn45" role="doc-endnote"><p>As usual for an extension of Dedekind domains, we push forward an ideal (maybe principal) into its integral closure and see how it factors.<a href="#fnref45" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn46" role="doc-endnote"><p>Later we will show that <span class="math inline">\(\operatorname{Cl}^0 K\)</span> is finite when <span class="math inline">\(k\)</span> is finite.<a href="#fnref46" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn47" role="doc-endnote"><p>So the residue field of the corresponding DVR is <span class="math inline">\(k\)</span> itself rather than some proper finite degree extension.<a href="#fnref47" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn48" role="doc-endnote"><p>Recall that this is the divisor pole.<a href="#fnref48" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn49" role="doc-endnote"><p>Recall that <span class="math inline">\(\infty\)</span> is the <span class="math inline">\(1/t{\hbox{-}}\)</span>adic place.<a href="#fnref49" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn50" role="doc-endnote"><p>These are formal linear combinations of places, so the coefficients in front of each place in <span class="math inline">\(A\)</span> should be less than the corresponding coefficient for <span class="math inline">\(B\)</span>, or equivalently <span class="math inline">\(B-A\)</span> is effective.<a href="#fnref50" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn51" role="doc-endnote"><p>Note that <span class="math inline">\(v_p\)</span> is the <span class="math inline">\(p{\hbox{-}}\)</span>adic valuation, i.e. the coefficient of <span class="math inline">\(P\)</span> in the divisor as a formal linear combination of points.<a href="#fnref51" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn52" role="doc-endnote"><p>Consider scaling by nonzero constants, where the valuation of constants are zero.<a href="#fnref52" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn53" role="doc-endnote"><p>This “cone structure” on divisors is very useful!<a href="#fnref53" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn54" role="doc-endnote"><p>So every Adele differs from a rational function by an effective Adele.<a href="#fnref54" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn55" role="doc-endnote"><p><span class="math inline">\(e\)</span> is the prime ramification index, <span class="math inline">\(f\)</span> is the prime residual degree, and <span class="math inline">\(g\)</span> is the number of distinct primes. This result essentially comes from ANTI, replacing <span class="math inline">\(\sum e_i f_i = r\)</span>.<a href="#fnref55" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn56" role="doc-endnote"><p>See Pete’s NTII notes, Theorem 1.64.<a href="#fnref56" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn57" role="doc-endnote"><p>There is an exact formula for this quantity.<a href="#fnref57" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn58" role="doc-endnote"><p>By a theorem of Schmidt, we’ll later prove that <span class="math inline">\(\delta = 1\)</span>.<a href="#fnref58" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn59" role="doc-endnote"><p>It will turn out (by a theorem of Schmidt) that <span class="math inline">\(\delta = 1\)</span> in the case of a finite ground field.<a href="#fnref59" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn60" role="doc-endnote"><p>The <em>index</em> of the function field, least positive degree of a divisor.<a href="#fnref60" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn61" role="doc-endnote"><p>Special case: set <span class="math inline">\(m=r\)</span>, so <span class="math inline">\(d=r\)</span>, then the RHS is <span class="math inline">\(r\)</span> copies of 1.<a href="#fnref61" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn62" role="doc-endnote"><p>Proving this Euler product formula might show up in a separate lecture, but it is not any more difficult than proving it for the Riemann zeta function.<a href="#fnref62" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn63" role="doc-endnote"><p>The polynomial isn’t monic, but rather has a constant coefficient, so this expansion is somewhat more natural than (say) <span class="math inline">\(\prod (t-\alpha)\)</span>.<a href="#fnref63" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn64" role="doc-endnote"><p><span class="math inline">\(\mkern 1.5mu\overline{\mkern-1.5mu{\mathbb{Z}}\mkern-1.5mu}\mkern 1.5mu\)</span> denotes the algebraic integers.<a href="#fnref64" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn65" role="doc-endnote"><p>This is the first hint at the Riemann hypothesis: if for example they all had the same complex modulus, this would force <span class="math inline">\({\left\lvert {a_j} \right\rvert} = \sqrt q\)</span>. Thus proving that they all have the same absolute value is 99% of the content!<a href="#fnref65" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn66" role="doc-endnote"><p>When <span class="math inline">\(u=-1\)</span>, this recovers <span class="math inline">\(q{\hbox{-}}\)</span>Artin-Schreier extensions.<a href="#fnref66" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
<!--bookdown:body:end-->




<script src="https://cdnjs.cloudflare.com/ajax/libs/pushy/1.3.0/js/pushy.min.js" integrity="sha512-+YLFvWFpPgQOV1/PoGgIinfvZEsUpfO5YEoxH4MlBAW5lf2WAVK5F4HtWA1BvZEYqK+AWW0fb/C797ttp1fL7g==" crossorigin="anonymous"></script>

</body>
</html>
