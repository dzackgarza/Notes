# Tuesday, March 30

## Chapter 15 (continued)

:::{.remark}
We want to develop theorems of ideal theory for $\ZZ_K$ for $K$ a general number field, i.e. factorization into prime ideals and the finiteness of the class group.
The strategy:

- Prove $\Cl(\ZZ_K)$ is a finite monoid,
- Prove $\Cl(\ZZ_K)$ has inverses and is thus a group, i.e. every nonzero ideal can be multiplied by another ideal to become principle (principle multiple lemma),
- Run proofs/corollaries as before.

Last time, we proved the first one.
:::

:::{.lemma title="?"}
Let $I, J \in \Id(\ZZ)_K$, then if $IJ = J$ then $I = \gens{ 1 }$. 
:::

:::{.remark}
Note that this is a special case of cancellation.
To prove this, we'll use that $\ZZ_K$ is Noetherian, i.e. every ideal is finitely generated as a \(\ZZ_K\dash\)module.
In fact, $\ZZ_K \cong \ZZ^n$, so any ideal is free of rank $\leq n$ as a \(\ZZ\dash\)module, hence finitely generated as a \(\ZZ\dash\)module, hence finitely-generated as a $\ZZ_K\dash$module since one can use the same generators.
:::


:::{.proof title="?"}
Let $J = \gens{ \beta_1, \cdots, \beta_n }$, then since $IJ = J$, for every $j$ we can write \( \beta_j = \sum_{i=1}^m A_{ij} \beta_i  \).
This means that there is some matrix $A\in \Mat(m\times m, I)$ with entries $A_{ij} \in I$ such that
\[
\tv{\beta_1, \cdots, \beta_m}
=
\tv{\beta_1, \cdots, \beta_m}A
.\]
Then $A-\one \vector{\beta} = 0$, making $A-\one$ singular since not all of the $\beta_i$ were zero since they were generators of a nonzero ideal.
Now take the determinant mod $I$, which yields
\[
0 \equiv \det(A-\one) \equiv \det(-\one) \equiv \pm 1\mod I
,\]
but this can only occur if $1\in I$, making \( \gens{ 1 }= I  \).
:::


:::{.lemma title="?"}
Let $I, J\normal \ZZ_K$, then if $IJ = \beta J$ with $\beta \in \ZZ_K \smz$, we have $I = \gens{ \beta }$. 
:::


:::{.remark}
Note that the previous lemma is a special case of this where $\beta = 1$.
One can then bootstrap the previous lemma to get this, see the book.
:::


:::{.lemma title="Principal Multiple Lemma"}
For all $I\in \Id(\ZZ_K)$ there is a $J \in \Id(\ZZ_K)$ such that $IJ$ is principal.
:::


:::{.proof title="?"}
Consider $[I], [I]^2, \cdots \in \Cl(\ZZ_K)$.
By the pigeonhole principle, there is some $k, \ell$ such that $[I^k] = [I]^\ell$, so $I^k = \lambda I^\ell$ for some $\lambda \in K\units$.
Note that any nonzero element of $K$ can be written as $k/n$ for $k\in K$ and $n\in \ZZ_K$.
So we can scale $\lambda$ to put it in $\ZZ_K$, yielding $\lambda = \alpha/m$ where \( \alpha\in \ZZ_K \) and $m\in \ZZ\units$.
We then have
\[
mI^k = \alpha I^\ell = (\alpha I^{\ell-k})I^k
.\]
We have enough to cancel the $I^k$, and so \( \gens{ m }= \alpha I^{\ell - k}  \).
Dilating both sides by \( \alpha\inv \) yields 
\( \gens{ m/\alpha } = I^{\ell-k}  \).
But this is a power of $I$ that is principle, so we can take $J \da I^{\ell-k-1}$.
:::

:::{.remark}
Note that the logical order in which these theorems are proved is slightly reversed.
:::

:::{.corollary title="?"}
\envlist

a. $\Cl(\ZZ_K)$ is a group, and thus a finite abelian group.

b. $\Id(\ZZ_K)$ is cancellative.
  Just show one can cancel principle ideals (by dilation), and then in general you cancel by multiplying both sides principle and cancelling that principle ideal.

To show unique factorization, we before showed factorization into irreducibles first, then uniqueness as a consequence of Euclid's lemma.

:::


:::{.lemma title="?"}
$\Id(\ZZ_K)$ is atomic, i.e. every element factors into irreducibles.
:::


:::{.proof title="?"}
We'll proceed by induction on $N(I)$, using that $N(AB) \leq N(A)$ for any $A$ and so $I\divides J \implies N(I) < N(J)$.
Before we used that $N(AB) = N(A) N(B)$, but we haven't proved that here yet.
We also don't know that "to divide is to contain" here, but since $I\divides J$ and $I\neq J$, we do obtain $J \subsetneq I$.
Hence there is a surjection
\[
\ZZ_K/J \to \ZZ_K/I
.\]
This has nontrivial kernel since $I\sm J \neq \emptyset$, so \( \abs{\ZZ_K/J}> \abs{\ZZ_K/I} \).
:::


:::{.lemma title="Analog of Euclid's Lemma"}
Irreducibles in $\Id(\ZZ_K)$ are prime.
:::

:::{.proof title="?"}
Same as before!
Literally use the exact same words, we've set it up this way.
:::


:::{.theorem title="?"}
$\Id(\ZZ_K)$ is a UFM, or equivalently every nonzero ideal factors uniquely as a product of prime ideals.
:::

## Modern Approach


:::{.remark}
What is the widest class of domains for which the previous theorem holds?
:::


:::{.definition title="?"}
Let $R$ be a domain that is not a field.
:::


















