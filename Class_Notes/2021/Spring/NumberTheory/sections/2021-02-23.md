# Chapter 11: Prime Producing Polynomials and Unique Factorization (Tuesday, February 23)

18th century observation by Euler about the following polynomial:
\[
f(x) \da x^2 -x + 41 
.\]
Goldbach proved that it's impossible for any polynomial $g\in \ZZ[x]$ to have *every* output prime.
Euler noted that this $f$ produces quite a few: for $x=1, \cdots, 40$, the output $f(x)$ is prime, but $f(41) = 41^2 - 41 + 41 = 41^2$ is not.
Let's define a variant: for $q$ a positive integer, set
\[
f_q(x) \da x^2 - x + q
.\]
Note that $f_q(q) = q^2$, so eventually the output is composite.
We'll say $f_q$ is **optimal** if $f_q(x)$ is prime for all integers $0 < x < q$.
As an example, $q=41$ was optimal.


:::{.theorem title="Rabonowitch"}
Let $q \geq 2 \in \ZZ^{> 0}$ and let $d = \Delta(f_q) = 1-4q$ be the discriminant of $f_q$.
Assume that $d$ is squarefree, then $f_q$ is optimal if and only if $\zadjoin{ {1 + \sqrt{d}\over 2 }}$ is a UFD.
[^actual_ring_of_ints]

[^actual_ring_of_ints]: 
Note that this is equal to $\ZZ_K$ when $K\da \QQ( \sqrt{d} )$.

:::


:::{.example title="?"}
For $q=41, d = -163$ and thus $\zadjoin{ {1 + \sqrt{-163} \over 2}}$ is a UFD.
:::


:::{.remark}
The forward direction is harder here.
:::


:::{.proof title="$\impliedby$"}
Assume \( \zadjoin{ \tau } \) is a UFD, where \( \tau\da {1 + \sqrt{d} \over 2 } \).
Toward a contradiction, suppose $f_q(x)$ is composite for some $0<x<q$.
We can write
\[
f_q(x) = x^2 - x + q = (x - \tau)( x - \conjugate{ \tau} ) = \min_{ \tau}(x)_{/\QQ}
.\]
By considering how this function increases, we can conclude $1<q<f_q(x) < f_q(q) = q^2$.
Let $p$ be the least prime factor of $f_q(x)$, which is necessarily bounded by $\sqrt{ f_q(x) }$, so $p<q$.
Since $p\divides f_q(x)$, we have $x\in \ZZ$ as a root of $f\mod p$. 
So $\min_\tau$ has a root modulo $p$.
Recall that studying how \( \gens{ p }  \) factors into ideals of \( \ZZ_K \) involved studying how \( \min_\tau \) factors mod $p$.
Since we've shown it has a root mod $p$, it breaks into two linear factors.
So \( \gens{ p } = P_1 P_2  \) as prime ideals of norm $p$.
By assumption, $\zadjoin[\tau]$ is a UFD and the ring of integers of a number field, and by an earlier theorem, is thus also a PID (noting that this is not generally the case).
So $P_1, P_2$ are principal, and we can write 
\[
P_1 = \gens{ a + b \tau }\implies p = N(p_1) = N( a + b \tau) = a^2 + ab + qb^2
.\]
Completing the square yields
\[
\cdots = (a + b/2)^2 + (q-1/4)b^2
.\]
Note that $b\neq 0$, since this would yield $p = a^2$ in the first equation and $a, p \in \ZZ$ with $p$ prime.
So both terms in the second equation are non-negative, and the second is positive because $b>1$, so $p \geq q- 1/4$.
Since $p, q\in \ZZ$ we can strengthen this to $p \geq q$.
But $p$ was the *least* prime factor of $f_q(x) < q^2$ which was composite, so this is a contradiction.
$\contradiction$

> Big idea: uses that $\min_\tau(x) = f_q(x)$ and remembering that how $\min_\tau(x) \mod p$ factors is exactly how \( \gens{ p }  \) factors into prime ideals.

:::


:::{.proof title="$\implies$"}
We'll prove something stronger.
Assume $f_q(x)$ is prime whenever
\[
1 \leq x \leq {1\over 2} \sqrt{ \abs{d} \over 3 } + {1 \over 2}
,\]
then we'll prove that $\ZZ_K$ is a PID and hence a UFD.
Note that this is stronger because the range is smaller than $0<x<q$.


:::









