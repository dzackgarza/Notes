# Lecture 4 (Wednesday, January 27)

Today: the failure of unique factorization.
Roughly corresponds to chapter 4: "Paradise Lost"!

Setup: $K$ is a quadratic field, a degree 2 extension of $\QQ$, which can be written as $K = \QQ(\sqrt{d})$ with $d$ squarefree.
Last time, we completely described $\ZZ_K$ (the algebraic integers in $K$):
\[
\ZZ_K = 
\begin{cases}
\ZZ[ \sqrt{d} ] &  d \equiv 2,3 \mod 4
\\
\ZZ\left[{1 + \sqrt{d} \over 2}\right] & d \equiv 1 \mod 4.
\end{cases}
\]
We saw that the second admitted a different description as $\ts{ {a + b \sqrt{d} \over 2}}$ where $a,b$ are either both even or both odd.
Note that we can do interesting arithmetic in $\ZZ_K$, but it's not necessarily well-behaved: $\ZZ_K$ is not always a UFD.
Letting $d=-5$, we have $\ZZ_K = \ZZ[ \sqrt{-5} ]$ where $6$ factors in two ways: $6 = (1 + \sqrt{5} )(1 - \sqrt{-5} ) = (2)(3) = 6$.
Note that this isn't quite enough to show failure of unique factorization, e.g. we can factor $16 = (4)(4) = (2)(8)$.
Here you should check that all 4 factors are irreducible, and that the factors on the right aren't unit multiples of the ones on the left.
For example, $21 = (-7)(-3) = (7)(3)$, but the factors only differ by the unit $-1\in \ZZ\units$.
The key to checking all of those: the **norm map**:
\[
N(a + b \sqrt{-5} ) = (a + b \sqrt{-5} ) (a - \sqrt{-5} ) = a^2 + 5b^2
.\]
where the second factor was the *conjugate*, i.e. the image of the element under the nontrivial element of the Galois group of $K_{/\QQ}$.
If $a + b \sqrt{-5} \in \ZZ_K$, then $N(a + b \sqrt{-5} \in \ZZ_{\geq 0}$ and is equal to zero if and only if $a + b \sqrt{-5} = 0$.
Moreover, this is a unit if and only if its norm is 1,
[^why_norm_argument]
i.e. $a^2 + 5b^2 = 1$, which forces $b=0$ and $a=\pm 1$.
So $U(\ZZ[ \sqrt{-5} ] ) = \ts{\pm 1}$.


[^why_norm_argument]: 
$\impliedby$: If the norm is 1, the conjugate is the inverse. 
For the reverse direction, the argument was more complicated, and reduced to showing norms of units are $\pm 1$, and positivity forces it to be $1$.


We'll show one of the factors is irreducible, $1 + \sqrt{-5}$.
Recall that $x\in R$ a domain is *irreducible* if and only if whenever $x = ab$, one of $a,b$ is a unit.
It itself is not a unit, since $N(1 + \sqrt{-5 }) = 6 \neq 1$.
So suppose $1 + \sqrt{-5} = \alpha \beta$.
Then
\[
6 = N(\alpha \beta ) = N( \alpha) N( \beta)
,\]
and so up to reordering, we have $N \alpha = 2, N \beta= 3$.
Writing \( \alpha= a + b \sqrt{-5} \)  and taking norms yields $2 = a^2 + 5b^2$, which has no solutions: considering the equation $\mod 5$ yields $2\equiv a^2$, but $2$ is not a square in $\ZZ/5\ZZ$.
$\contradiction$

Note that the only other way of factoring $6$ is $6=(1)(6)$, and taking norms shows that one factor is a unit.
So if we assume \( \alpha, \beta \)  aren't units, both $N \alpha, N \beta > 1$, which leads to the previous situation.
By similar arguments, all 4 factors are irreducible.

To see that the LHS factors aren't unit multiples of the RHS factors, we can use the fact that the units are $\pm 1$, and multiplying the LHS by $\pm 1$ can't yield $2$ or $3$.
So this is a genuine counterexample to unique factorization.

What went wrong in this example?
We'll use a big of terminology from an area of algebra called *factorization theory*.


:::{.definition title="Monoid"}
A **monoid** is a nonempty set with a commutative associative binary operation $\cdot$ with an identity $1$.
We say a monoid is **cancellative** if and only if whenever \( \alpha \beta= \beta \alpha \) or \( \beta \alpha = \gamma \alpha \) then \( \beta = \gamma \).
:::

A lot of concepts related to divisibility can be discussed in this language!
A bunch of definitions: let $M$ be a cancellative monoid.

- We say \( \alpha\divides \beta \) if and only if \( \beta= \alpha \gamma \) for some \( \gamma \).
- We say \( \epsilon \) is a **unit** if \( \epsilon\divides 1 \).
- We say \( \alpha , \beta \) are **associates** if \( \alpha = \epsilon \beta \) for some unit \( \epsilon \) 
- We say \( \pi\in M \) is **irreducible** if and only if \( \pi \) is a unit and whenever \( \pi= \alpha \beta \) then either \( \alpha \) or \( \beta \) is a unit.
- An element \( \pi \in M \) is **prime** whenever \( \pi\divides \alpha \beta \) then \( \pi\divides \alpha \) or \( \pi\divides \beta \).
- An element \( \delta \in M \) is a greatest common divisor of \( \alpha, \beta \) if and only if \( \delta \) is a common divisor that is divisible by every other common divisor.
- $M$ is a **unique factorization monoid** if and only if every nonunit element in $M$ factors uniquely as a product of irreducibles (uniqueness up to order and associates).


:::{.remark}
Given $R$ an integral domain, then $R\smz$ with multiplication is a cancellative monoid.
Moreover, $R\smz$ is a unique factorization monoid if and only if $R$ is a UFD.
:::


:::{.question}
How do you show something is a UFD?
:::

How does this proof go for $\ZZ$?

- Use existence of a division algorithm
- Prove Euclid's lemma: every irreducible is prime
- Use factorization into irreducibles and proceed by induction (writing out two factorizations and cancelling things out in a combinatorial way)

So we'd like

1. To know that irreducibles are prime, and
2. Everything to factor into irreducibles.



:::{.definition title="Atomic"}
For $M$ a cancellative monoid, $M$ is **atomic** if every nonunit element of $M$ is a product of irreducibles.
:::





