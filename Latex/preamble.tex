%\RequirePackage[l2tabu, orthodox]{nag}

%\documentclass[]{article}
\documentclass[11pt, a4paper, bibliography=totoc, parskip=full]{scrartcl}
% Remove indentation for new paragraphs
%\usepackage{parskip}
% But leave space before amsthm environments
\makeatletter
\def\thm@space@setup{%
  \thm@preskip=0em
  \thm@postskip=0emem
}
\makeatother
\setkomafont{subsection}{\normalfont\itshape}
\setkomafont{author}{\fontfamily{qzc}\selectfont\LARGE}
% Encoding
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[usename, dvipsnames]{xcolor}
\usepackage{datetime}
\usepackage{biblatex}
\usepackage{spectralsequences}
% Fancy symbols
\usepackage{adforn}
\usepackage{pgfornament}
% Make figures stay where you put them!
\usepackage{float}
\floatplacement{figure}{H}

\usepackage[autooneside=false,automark]{scrlayer-scrpage}
%\clearscrheadfoot{}
\clearpairofpagestyles
\renewcommand*{\sectionmarkformat}{}
\KOMAoption{headwidth}{198mm:-9em} % 
\KOMAoption{headheight}{50mm} % 
\KOMAoption{footwidth}{159mm:0em} % 
\KOMAoption{headsepline}{1.1pt} % 
\KOMAoption{footsepline}{0.5pt} % 
\ihead[\clearscrheadfoot]{\mbox{
    \sffamily\bfseries\smash{%
    \setlength\fboxsep{0pt}\raisebox{-2pt}{
        \colorbox{gray!80}{\makebox[33.7mm]{\hfill%
        \ifnum\value{section}>0
            \textcolor{white}{\fontsize{18}{19}\selectfont
            \thesection }~
        \fi%
    \rule[-2.85pt]{2mm}{13mm}}}}}
}}
\chead{\hspace{33.7mm}\leftmark}
\cfoot*{\scriptsize \rightmark \hfill \pagemark}



% List of Theorems Attempt
\usepackage{etoolbox}
\makeatletter
\patchcmd\thmtlo@chaptervspacehack
  {\addtocontents{loe}{\protect\addvspace{10\p@}}}
  {\addtocontents{loe}{\protect\thmlopatch@endchapter\protect\thmlopatch@chapter{\thechapter}}}
  {}{}
\AtEndDocument{\addtocontents{loe}{\protect\thmlopatch@endchapter}}
\long\def\thmlopatch@chapter#1#2\thmlopatch@endchapter{%
  \setbox\z@=\vbox{#2}%
  \ifdim\ht\z@>\z@
    \hbox{\bfseries\chaptername\ #1}\nobreak
    #2
    \addvspace{10\p@}
  \fi
}
\def\thmlopatch@endchapter{}

\def\ll@tdefn{%
   \protect\thmtopatch@numbernametext
     \ifx\@empty\thmt@shortoptarg\else[\thmt@shortoptarg]\fi
     {\csname the\thmt@envname\endcsname}%
     {\thmt@thmname}%
}

\newcommand\thmtopatch@numbernametext[3][]{%
  #2 #3%
  \if\relax\detokenize{#1}\relax\else\space -- #1\fi
}

\makeatother
\renewcommand{\thmtformatoptarg}[1]{ -- #1}
%\renewcommand{\listtheoremname}{List of definitions}

%\usepackage{adjustbox}

% Custom section headings: redefining the KOMA-Script command \sectionlinesformat:
\newdimen\thesectionwdmax
\newdimen\sectiontitlewd
\AtBeginDocument{%
  \setbox0=\hbox{{\usekomafont{disposition}\usekomafont{section}\scalebox{2}{99}}}%
  \thesectionwdmax\wd0%
  \sectiontitlewd\dimexpr\textwidth-\thesectionwdmax-.75cm-1pt\relax
}

\renewcommand\sectionformat{\protect\scalebox{2}{\thesection}}
\addtokomafont{section}{\huge}



%\bibliography{/home/zack/Notes/library.bib}

\input{/home/zack/Notes/Latex/preamble_common}

\usepackage[noabbrev, capitalise, nameinlink]{cleveref} % use \cref{}, automatically deduces theorem, proposition, etc
\crefname{figure}{fig.}{figs.}
\Crefname{figure}{Fig.}{Figs.}
\crefname{equation}{equation}{eqns.}
\Crefname{equation}{Equation}{Eqns.}
\crefname{section}{section}{secs.}
\Crefname{section}{Section}{Secs.}

